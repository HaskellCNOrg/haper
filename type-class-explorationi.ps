%!PS-Adobe-2.0
%%Creator: dvipsk 5.58c Copyright 1986, 1994 Radical Eye Software
%%Title: multi.dvi
%%Pages: 16
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%EndComments
%DVIPSCommandLine: dvips multi.dvi
%DVIPSParameters: dpi=300, compressed, comments removed
%DVIPSSource:  TeX output 1997.05.02:1542
%%BeginProcSet: texc.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 300 300 (multi.dvi)
@start /Fa 53 122 df<EB0FE0EB3810EBE038EA01C0143038038000A5381FFFF03807
00E0A6380E01C0A6381C0380A238FF8FF0151A809915>12 D<123812441284A212801288
1270060770991F>23 D<13181320134013C0EA0180EA0300120212065AA25AA212381230
A212701260A312E0A45AA47E1260A47EA212107E120C12040D267C9B0F>40
D<5A1380120013401360A21330A413381318A41338A41330A313701360A213E013C0A2EA
0180A2EA0300120212065A5A12105A12C00D26809B0F>I<12381278A212381208A21210
A2122012401280050B7E830B>44 D<EAFFC0A20A027F880D>I<136013E0121EEA01C0A6
EA0380A6EA0700A6120E120FEAFFF00C187C9713>49 D<13F8EA030EEA04070008138013
031218121CEA180700001300A2130E5B13185B5B5B485AEA02021204485A1210EA3FFC48
5A12FF11187E9713>I<EA01FCEA060738080380120C121C120CEA00071400130E130C13
38EA03F0EA001C7F130FA312E0A2EAC00EEA801EEA403CEA3070EA0FC011187E9713>I<
EA0603EA0FFE13FC13F0EA0800A35AA2EA13E0EA1C30EA1018EA001C130C131CA2124012
E0A2EA80381330EA4060EA20C0EA1F0010187D9713>53 D<137CEA0183EA0301EA0603EA
0C07EA180012385AA2EA73E0EAE418EAE80CEAF00EEAE006A2130E12C0A3131CEA601813
30EA3060EA0F8010187D9713>I<EA01F0EA070CEA0C061218EA38031270A313071260A2
EA700FEA3017EA1827EA07CEEA000EA2130C1318EAE038EAC030EA8060EAC180EA3E0010
187D9713>57 D<121CA2123C12181200A81270A212F0126006107D8F0B>I<144014C013
01801302A21304A2EB0870A21310A2132080134013C0EBFFF838010038801202A25AA200
0C7F001C131EB4EBFFC01A1A7F991D>65 D<380FFFF03801C01C140E140F1407EA038014
0FA3141E143C380700F8EBFFE0EB0078143C141EA2120EA4143C1438481370EB01E0B512
80181A7E991B>I<90380FC080EB78313801C00B3803800738070003000E14005A003C7F
1238127891C7FC127012F0A414025C1270A200785B00385B6C5B6C5B38038380D800FCC7
FC191A7C991C>I<000FB5FC3801C00714031401A2EA0380A31440A214C03807018013FF
13011300A3000E1302A314061404140C48131C1478B512F8181A7E991A>69
D<000FB5FC3801C00714031401A2EA0380A31440A214C03807018013FF13011300A3000E
1300A65A121EEAFFE0181A7E9919>I<90380FC080EB78313801C00B3803800738070003
000E14005A003C7F1238127891C7FC127012F0A3903801FF809038001E00141C1270A212
7812386C133C6C1338380381D83800FE08191A7C991E>I<EA0FFCEA01C0A4EA0380A6EA
0700A6120EA65A121EEAFFC00E1A7E990E>73 D<EBFFC0EB0E00A45BA65BA65BA3124012
E0485A485AEA4380003EC7FC121A7D9914>I<EA0FFEEA01C0A4485AA648C7FCA6000E13
08A31410A21430481370EB01E0B5FC151A7E9918>76 D<D80FE0EB0FE00001EC1E00152E
1370154E0002145C159CA2903838011CA214020004495A131C1408A21410A2486C485AA2
1440A2EB0780140000185CD838067F00FFEB07FE231A7E9923>I<390FC007F83901E001
C0EC00801370A23902380100A2131CA2130EA238040702A2EB0382A2EB01C2A2380800E4
A21474143CA2141C0018131800381308B4FC1D1A7E991D>I<380FFFF03801C03C140E14
0FA2EA0380A4140E141C380700381470EBFFC090C7FCA3120EA65A121EEAFFC0181A7E99
1A>80 D<EB1FC0EB70703801C01C48487E3807000F000E7F481480123C12381278A21270
12F0A4EC0F00A2140E00705BEB383C3838C438381C8270380F03C0380787803801FE02EA
00031406148C14FC5C6D5A6D5A19217C991E>I<EB7C2038018360380200E05A000C1360
000813401218A2001C1300121E6C7EEA07F8EA03FEC67EEB1F8013031301A21240A3EB03
00EA6002EAF006EACC18EA83F0131A7E9915>83 D<003FB5128038380E03002013010060
130012405B1280A200001400A35BA65BA65B7FEA1FFF191A7C991C>I<3AFF81FF07F83A
3C007801C0001CEC0080A29138B80100A29038013802A2390E023C04141C01045BA20108
5BA201185B3807101EEC0E6001201340A201405BA2D9800FC7FC1203EB0006A200021304
251A7B9927>87 D<EA07F0EA0C18EA1C0CEA080E1200A2EA01FEEA0F1C1238127012E014
80133CEB3900EA70DDEA3F1E11107E8F13>97 D<123E120EA45AA513F8EA3B06EA3C0300
381380A21301A2EA7003A314005B1306EAF00CEAC838EA87E0111A7D9915>I<EA01FCEA
0606EA0C0EEA1804EA30001270A25AA41260EA7004EA3008EA1830EA0FC00F107E8F11>
I<EB03E01300A4EB01C0A5EA01F138070F80EA0C03121812301270A238E00700A412605B
EA301EEA182F380FCFC0131A7E9915>I<EA03F0EA0618EA1C0C1238EA300E1270EA7FFE
EAE000A412601304EA3008EA1830EA0FC00F107E8F11>I<131FEB718013E33801C30013
C0485AA5EA1FF80007C7FCA6120EA65A121EB47E111A80990C>I<EBF8F038038F303807
0600EA0E07A3130E130CEA0618EA09F00018C7FCA3EA1FF8EA0FFE7FEA30073860038013
0138C0030012601306EA381CEA0FE01418808F13>I<EA07C01201A4485AA5EB8F803807
30C0EB40E013801300A3380E01C0A6381C0380A238FF9FF0141A809915>I<EA0180EA03
C0A2EA0180C7FCA6EA1F80EA0700A6120EA65AA2EAFF800A1A80990A>I<EA07C01201A4
485AA5EB83F0380701C0EB0300130613085B1370EA0EF8EA0F38EA0E3C131C131E130EEA
1C0F148038FF9FE0141A809914>107 D<EA07C01201A4EA0380A6EA0700A6120EA65AA2
EAFF800A1A80990A>I<391F9F07C03907218860903841D070EB81E0EB01C0A3390E0380
E0A6391C0701C0A239FF9FE7F81D107F8F20>I<381F8F80380730C0EB40E013801300A3
380E01C0A6381C0380A238FF9FF01410808F15>I<EA01F0EA060CEA1C06EA1807EA3003
1270A2EAE007A4EA600E130CEA3018EA1870EA0FC010107E8F13>I<380FCF803803B0E0
EBC070EB8038A4EA0700A31430147014E0380F01C0380E8380EB7E0090C7FCA35AA3B47E
1517818F15>I<3801F0C038070880EA0C05EA180312381270A238E00700A41260EA700F
EA301EEA186EEA0F8EEA000EA35BA3EBFF8012177E8F14>I<EA1F9EEA07231347138213
00A3120EA65A121EEAFF801010808F0F>I<EA07ECEA0C18EA10081230A2EA3C00EA3FC0
EA1FE0EA07F0EA0078EA403813181310EAE030EAD060EA8F800E107F8F0F>I<1204A25A
A21218A21278EAFFC0EA7000A65AA21380A3EAE100A21262123C0A177C960F>I<38FC1F
8038380700A6EA700EA5131E5BEA305E381F9F8011107D8F15>I<38FF0FC0383C0700EA
1C061304A2EA1E08EA0E10A25B120F6C5AA25B90C7FC7E120212107D8F14>I<39FF3F8F
C0393C1E0700381C0C06EB0E04A2EB1E08120EEB26101327EB4720EBC740EA0783EB0380
A2000690C7FCA21A107D8F1C>I<383FC7E038078380EB0200EA038413C8EA01D8EA00F0
5B7F120113381202487EEA081E123838FC3FC013107F8F14>I<381FE1F8380780E00003
13C01480A2EBC100EA01C2A213C413E4EA00E8A213F05B13601340A25BA20061C7FC12E2
12E412781517808F14>I E /Fb 1 60 df<1203EA0780120F12071300C7FCA61218123C
123E123C121C120C5A5A12E05A0915798F14>59 D E /Fc 39 123
df<13401380EA0300120212065A121C12181238A25AA412F0A91270A47EA21218121C12
0C7E12021203EA008013400A257C9B11>40 D<7E12401230121012187E120E12061207A2
EA0380A413C0A91380A4EA0700A21206120E120C5A1210123012405A0A257E9B11>I<13
07ADB612F8A3D80007C7FCAD1D1D7E9722>43 D<127012F812FCA3127C1204A21208A212
1012201240060D7D850C>I<EA0180120712FFA21207B2EAFFFCA20E187C9716>49
D<EA0FF0EA3FFCEA787EEAFC1F1480130FA21278EA001F1400131E5B5B13705BEA018038
0301801206120CEA1003383FFF005AB5FCA211187E9716>I<EA07F0EA1FFCEA383E127C
7FA3EA383FEA003E133C5BEA07F0EA003C133E7F1480127812FCA2140012F8EA703EEA3F
FCEA0FF011187E9716>I<1306130E131E133E137E13DEEA019E131E12031206120C1218
1230126012C0B512E0A238001E00A53801FFE0A213187F9716>I<EA3006EA3FFC5B5B5B
13800030C7FCA3EA37F0EA381CEA201EC67EA21480127012F8A31400EA601FEA383EEA1F
F8EA07E011187E9716>I<EA01F8EA07FEEA0F06EA1E0F485AA2EA780E90C7FC12F8EAF9
F0EAFA1CEAFC0E130F00F81380A41278A21400123CEA1E1EEA0FFCEA03F011187E9716>
I<1260387FFFC0A214801400EAE00612C05B5BC65A5B13E0A212015B1203A31207A66C5A
12197E9816>I<EA07F0EA1FFCEA381EEA30071270A21278EA7E06EA3F8C13F86C5AEA0F
FC487EEA38FFEA703F38E01F8013071303A21400EA7007EA3C0EEA1FFCEA07F011187E97
16>I<EA07E0EA1FF8EA3C1CEA781E7F12F8A21480A4EA781F1238EA1C2FEA07CFEA000F
14001238EA7C1F131EEA783CEA3078EA1FF0EA0FC011187E9716>I<127812FCA4127812
00A5127812FCA4127806117D900C>I<90381FE0209038FFFCE03803F80F3807C003381F
800190C7FC123E007E1460127C00FC1400A8007C1460127E123E6C14C07F3907C0038039
03F80F003800FFFCEB1FF01B1A7E9920>67 D<B512F014FC380F803FEC0F80EC07C0EC03
E0A2EC01F0A215F8A815F0A2140315E0EC07C0EC0F80EC3F00B512FC14F01D1A7E9922>
I<90381FE0209038FFFCE03803F80F3807C003381F800190C7FC123E007E1460127C00FC
1400A6EC7FFCA2007CEB03E0127E123E7E1380EA07C03803F8073800FFFC90381FF0601E
1A7E9923>71 D<39FFF87FFCA2390F8007C0A990B5FCA2EB8007AB39FFF87FFCA21E1A7E
9923>I<EA1FF0EA383CEA7C1E7FA21238120013FFEA0FCFEA3E0F127C12F8A31317387C
27E0EA1FC313117F9015>97 D<12FCA2123CA713FE383F8780383E01C0003C13E0EB00F0
A214F8A514F0A2EB01E0003E13C0383B07803830FE00151A7E9919>I<EA03FCEA0F0EEA
1C1F123C1278130E00F8C7FCA51278A2383C0180381C0300EA0F06EA03FC11117F9014>
I<EB07E0A21301A7EA03F9EA0F07EA1C03EA3C011278A212F8A51278A2123CEA1C03380F
0DF8EA03F9151A7F9919>I<EA03F0EA0E1C487EEA3C071278148012F8A2B5FC00F8C7FC
A21278A2383C0180381C0300EA0E06EA03FC11117F9014>I<13FEEA03C738078F80EA0F
0FA2EB070090C7FCA3EAFFF0A2000FC7FCADEA3FE0A2111A80990E>I<3807F1C0381C1E
E0EA380E38780FC01400A4EA380E6C5AEA37F00020C7FC1230A2EA3FFE381FFF8014C0EA
700338E000E0A4387001C0383C07803807FC0013197F9016>I<12FCA2123CA7133EEBC7
80EA3D03003E13C0A2123CAA38FF0FF0A2141A7E9919>I<123C127EA4123C1200A412FC
A2123CAD12FFA2081B7E9A0D>I<12FCA2123CA7EB1FC0A2EB0E005B5B13605BEA3FE07F
EA3E78EA3C387F131E7F7F38FF0FE0A2131A7E9917>107 D<12FCA2123CB3A412FFA208
1A7E990D>I<39FC3E03E09038C78C78393D039038003EEBE03CA2003C13C0AA39FF0FF0
FFA220117E9025>I<EAFC3EEBC780EA3D03003E13C0A2123CAA38FF0FF0A214117E9019>
I<EA03F8EA0E0E383C0780EA3803007813C0A200F813E0A6007813C0EA7C07003C138038
0E0E00EA03F813117F9016>I<EAFCFE38FF8780383E03C0383C01E014F0130014F8A514
F0130114E0383E03C0383F0780383CFE0090C7FCA5B4FCA215187E9019>I<EAF8F0EAF9
38EA3A7CA2123C13381300A9EAFF80A20E117E9012>114 D<EA1FD8EA2078EA401812C0
A2EAF000EAFF80EA7FE0EA3FF0EA07F8EA003CEAC00CA212E01308EAF830EACFE00E117F
9011>I<38FC0FC0A2EA3C03AB1307A2381E0BF0EA07F314117E9019>117
D<38FF07F0A2001E1300EA0F06EA078CEA03DC13F86C5A1200487E13BCEA031E1207EA0E
0F381C078038FE0FF0A214117F9017>120 D<38FF03F0A2383E01C0001E1380EA1F0300
0F1300A2EA0786A2EA03CCA213FC6C5AA26C5AA21360A2EA70C012F812F95B0077C7FC12
3C14187F9017>I<EA7FFFEA781EEA703EEA603C137813F0120113E0EA03C0EA0780EA0F
831303121EEA3C06127CEA781EEAFFFE10117F9014>I E /Fd 1
84 df<00E0141CB3AD00701438A26C1470A26C14E0001E1301390F8007C03907E01F8039
01FFFE0038007FF8EB1FE01E2A7E7F23>83 D E /Fe 3 111 df<1204120C1200A51230
12581298A21230A212601264A21268123006127E910B>105 D<3871F1F0389A1A18EA9C
1CEA9818121838303030A214321462386060641438170B7E8A1B>109
D<EA71F0EA9A18129C12981218EA3030A213321362EA606413380F0B7E8A13>I
E /Ff 1 97 df<124012C0A8EAFFFEA2EAC000A812400F147E9315>96
D E /Fg 18 120 df<126012F0A2126004047B830F>46 D<EA7FE0EAFFF0A2C7FCA3EAFF
F0A2EA7FE00C097F8C0F>61 D<124012E07E12787E7E7EEA07C012031207EA0F00121E5A
5A5A5A12400A117E900F>I<EA07B0EA1FF0EA3870EA30301260A2EAC000A6EA6030A212
30EA3860EA1FC0EA07800C127F910F>67 D<EAFFE0A2EA6060A313001263A2127FA21263
A21260A412F8A20B127E910F>70 D<EAFF8013C0EA60E013701330A3137013E0EA7FC013
80EA6000A512F0A20C127F910F>80 D<123E127FEA7180EA20C01200121F123F126012C0
A21261EA7FF8EA1E780D0D7F8C0F>97 D<EA0F80EA3FC01271EA6080EAC000A5EA60C012
70EA3F80EA0F000A0D7E8C0F>99 D<120FEA1F80EA30C01260EAC060A2EAFFE0A2EAC000
EA60601230EA1FC0EA0F800B0D7F8C0F>101 D<12F0A21230A3EA33C0EA3FE0EA3C3012
381230A7EAFCFCA20E1280910F>104 D<1208121C1208C7FCA3127CA2120CA9EAFF80A2
09137D920F>I<EAF3C0EAFFE0EA3C3012381230A7EAFCFCA20E0D808C0F>110
D<121E123FEA73801261EAC0C0A5EA61801273EA3F00121E0A0D7E8C0F>I<EAF9F0EAFB
F8EA1E38EA1C1013001218A6B4FCA20D0D7F8C0F>114 D<EA3F80127F12C1A2EAE00012
7E121FEA0180EA40C012C012E0EAFF80EADF000A0D7E8C0F>I<12081218A2EA7FC012FF
EA1800A61360A3EA0FC0EA07800B107F8F0F>I<EAF0F0A2EA3030A81370EA1FFCEA0FBC
0E0D808C0F>I<EAF9F0A2EA6060A3126FA3EA2F40A2EA39C0A30C0D7F8C0F>119
D E /Fh 1 49 df<1208121CA21238A312301270A21260A212C0A2060D7E8D09>48
D E /Fi 10 118 df<EB3F08EBC09838030070000613305A5A00381320481300A35AA314
4000601380A2383001001302EA0C1CEA07E015147E9318>67 D<3807FFE03800E0703801
C018141CA338038038A21470EB81C03807FF0090C7FCA3120EA45AB47E16147F9315>80
D<EA0780EA1840EA3020EA604012C0EAFF80EAC0005AA2EAC0201340EA6180EA3E000B0D
7E8C10>101 D<1206120712061200A41238124CA2128C12981218A212301232A21264A2
123808147F930C>105 D<EA30F8EA590C124E129C12981218A2EA301813191331A2EA60
32131C100D7F8C15>110 D<EA0C78EA168CEA1304EA2606A21206A2EA0C0CA213081310
EA1A20EA19C0EA1800A25AA312FC0F13818C11>112 D<EA31E0EA5A70124CEA9C60EA98
001218A25AA45AA20C0D7F8C0F>114 D<1207EA1880EA19C0EA3180EA3800121E7EEA03
80124112E1EAC1001282127C0A0D7E8C10>I<1204120CA35AEAFF80EA1800A25AA45A12
61A212621264123809127F910D>I<EA380C124CA2EA8C1812981218A2EA30301332A213
72EA18B4EA0F1C0F0D7F8C14>I E /Fj 27 118 df<EA01F038070C08380C0E10EA1807
123000701320126000E01340A214801400A3EA601B383063A0380F81C015107F8F19>11
D<EB03C0EB0C301310EB203813401380EA0100A2000213701460EB1FC0131138041F60EB
0070A35AA31460001813E014C0EB018038140300EA230EEA20F890C7FCA25AA45A152180
9916>I<1370138CEA010CEA030EEA0606120EEA0C0E121CA21238A3EA7FFCA2EA701CA2
EA6038A2EAE0301370EA606013E013C0EA6180EA3300121C0F1A7F9912>18
D<381FFF805A481300EA408012801201A348C7FCA35AA3120E120611107E8F11>28
D<126012F0A2126004047D830B>58 D<126012F0A212701210A31220A21240A2040B7D83
0B>I<903807E04090383C18C0EBE0053801C0033903800180EA0700120E5A003C140012
38007890C7FCA25AA41404A35C00705B1230003813606C1380D80703C7FCEA01FC1A1A7E
991B>67 D<3803FFFC38007007EC0380EC01C09038E000E0A315F0485AA439038001E0A3
15C038070003A21580EC0700000E130E141E14385C48485AB5C7FC1C1A7E9920>I<3803
FFFC3800700FEC0380A201E013C0A43901C00780A2EC0F00141E38038038EBFFE00180C7
FCA248C8FCA4120EA45AEAFFC01A1A7E9919>80 D<EB0FE0EB3838EBE00E48487EEA0780
D80F001380000E13035A003C14C012381278A248EB0780A315005C140E141E141C387070
38EB8070383904E0381D07C0D80F0FC7FC3803FC04EA0006140C5CEB07F85C5C6D5A1A21
7E991E>I<3803FFF83800700FEC0780140301E013C0A43901C007801500141E14783803
FFC0EB8060801438EA0700A4000E1378A21540158048133C39FFC01F001A1A7E991D>I<
EB1F08EB60D8EB8038EA01004813101206A31400120713C0EA03FC6CB4FC38007F80EB0F
C01301A213001220A238600180A2EB0300EA7006EACC1CEA83F0151A7E9917>I<003FB5
128038380E010020130012405B1280A348481300A45BA45BA4485AA41203EA7FFC191A7F
9916>I<39FF801FE0391C000700140614045C121E000E5B5CA25C14C05CD80F01C7FC12
0713025BA25B5BEA039013A013C0A25BA290C8FC1B1A7E9916>86
D<EA03E6EA0617EA1C0E123812301270EA601C12E0A3133912C012E0EA6079EA219AEA1E
0E10107F8F14>97 D<127E120EA35AA45AA2EA39E0EA3E10EA7818EA701C130C131C12E0
A313181338EAC030EAE070EA60E0EA2180EA1F000E1A7F9910>I<EB0FC01301A3EB0380
A4EB0700A2EA03E7EA0617EA1C0E123812301270EA601C12E0A3133912C012E0EA6079EA
219AEA1E0E121A7F9914>100 D<EA01F0EA0608EA1C04123812701308EAFFF0EAE000A4
1304EA60081310EA3060EA0F800E107F8F12>I<120313801300C7FCA7123C124EA2128E
A2129C121CA25AA212391271A21272A2123C091A7E990D>105 D<39383E0F80394CC330
C0398F03C0E0A2008E1380A2391C0701C0A3EC0380D8380E1388A2EC0708151039701C03
2039300C01C01D107E8F22>109 D<EA703EEA58C7389D0380129E129CA238380700A313
0E00701340A2131C1480EAE00C3860070012107E8F17>I<EA01F0EA070CEA0C06EA1807
12301270126012E0A21306130E130C1318EA6030EA30E0EA0F8010107F8F13>I<380707
80380598403809E060EBC07014301470EA0380A31460380700E014C01301EB0380380E86
00137C90C7FCA25AA4B4FC1417828F13>I<EA30F0EA5918EA9E38EA9C181300A25AA45A
A45A12600D107E8F11>114 D<EA03E0EA06181208EA18381330EA1C00EA1FC0EA0FE0EA
07F0EA0070133012E0A2EA8060EA40C0EA3F000D107E8F12>I<1206120EA45AA2EAFFE0
EA1C005AA45AA4EAE080A2EAE100A2126612380B177E960E>I<EA3803004C1380384E07
00128E129CA2EA1C0E1238A338701C80A3EA303C38184D00EA0F8711107E8F16>I
E /Fk 27 122 df<126012F0A212600404798312>46 D<EAFFFEA2127FC7FCA3EA7FFE12
FFA20F097F8E12>61 D<124012E07E127C7EEA0F80EA07C0EA01E0EA00F8137813F8EA01
E0EA07C0EA0F80EA3E005A12F05A12400D137E9312>I<EA03E6EA0FFEEA1C3EEA381EEA
700EA21260EAE000A6EA600E1270A2EA381CEA1C38EA0FF0EA03E00F147F9312>67
D<EAFFFEA2EA380EA31300A213E0A2123FA21238A21300130EA4EAFFFEA20F147F9312>
69 D<B4FCA21238AC1304130EA3EAFFFEA20F147F9312>76 D<EA3FE0EA7FF0EA7070EA
E038AEEA7070EA7FF0EA3FE00D147E9312>79 D<EA1F30EA3FF01270EAE070A313001270
127FEA3FC0EA0FE0EA00F013781338126012E01330EAF070EAFFE0EACF800D147E9312>
83 D<EA7FFE12FFEAE38EA3EA0380ADEA0FE0A20F147F9312>I<EA1FC0EA3FF0EA3838EA
101C1200EA07FC123FEA781C12E0A3EA703C383FFF80EA1FCF110E7F8D12>97
D<EA07F0EA1FF8EA3838EA7010EA600012E0A41260EA70381238EA1FF0EA07E00D0E7E8D
12>99 D<13F8A21338A4EA07B8EA1FF8EA3878EA7038126012E0A41260EA70781238EA1F
FEEA0FBE0F147F9312>I<EA0780EA1FE0EA38701270EA603812E0EAFFF8A2EAE0001260
EA70381238EA1FF0EA07C00D0E7E8D12>I<12F8A21238A4EA39E0EA3FF0EA3E38123C12
38A8EAFE3EA20F147F9312>104 D<1206120FA21206C7FCA3127FA21207AAEAFFF0A20C
157D9412>I<B4FCA21207B0EAFFF8A20D147E9312>108 D<EAF71CEAFFBEEA79E7A2EA71
C7A838F9E780EAF8E3110E808D12>I<EAF9E0EAFFF0EA3E38123C1238A8EAFE3EA20F0E
7F8D12>I<EA0F80EA3FE01238EA7070EAE038A5EAF078EA7070EA38E0123FEA0F800D0E
7E8D12>I<EAFBE0EAFFF0EA3C38EA381C130C130EA4130C131CEA3C38EA3FF0EA3BC0EA
3800A512FEA20F157F8D12>I<EA079CEA1FFCEA387CEA703CEA601C12E0A41260EA703C
EA387CEA1FFCEA079CEA001CA5137FA210157F8D12>I<EAFC78EAFDFCEA1F9CEA1E0813
00121CA7EAFFC0A20E0E7E8D12>I<EA1FF0123FEA607012C0EAE000127FEA3FE0EA0FF0
EA0078EA601812E0EAF030EAFFE0EADFC00D0E7E8D12>I<1206120EA3EA7FF812FFEA0E
00A7131CA3EA07F8EA01E00E127F9112>I<EAFEFEA2EA701CA3EA3018EA3BB8EA3FF8A2
EA3AB81238EA1CF0A30F0E7F8D12>119 D<EA7C7CA2EA1CF0EA0EE0EA0FC01207EA0380
120713C0EA0EE0EA1EF0EA1C70EAFC7EA20F0E7F8D12>I<EAFC7EA2EA3838121C1370A2
120E136013E01206A2EA07C01203A21380A3EA7700127F127E12380F157F8D12>I
E /Fl 8 104 df<B512FEA217027D891E>0 D<EA0780EA1FE0EA3FF0EA7FF8A2EAFFFCA6
EA7FF8A2EA3FF0EA1FE0EA07800E107E9013>15 D<EB7FFEEA03FF38078000000CC7FC5A
5A5AA35AA51260A37E7E7EEA07803803FFFEEA007F90C7FCA6387FFFFEA2171F7D971E>
18 D<4A7EA26E7EA21560A2818181B71280A2C8EA0C005D5D5DA25DA24A5AA221147E92
26>33 D<0040131000C0133000601360A36C13C0A338180180EA1FFF6C1300EA0C03A2EA
0606A36C5AA2EA0198A3EA00F0A31360A2141A809915>56 D<124012C0ABB512C0A200C0
C7FCAB1240121A7E9917>96 D<133C13E0EA01C0EA0380ADEA0700121E12F8121E1207EA
0380ADEA01C0EA00E0133C0E257E9B13>102 D<12F8121E1207EA0380ADEA01C0EA00E0
133C13E0EA01C0EA0380ADEA0700121E12F80E257E9B13>I E /Fm
77 126 df<EAC060EAE0E0A4EAC060A5EA40400B0B7C9614>34 D<1207487EEA18C0EA38
E0A35B3839CF80138F381F1C00121EA2EA0E38121EEA37701267EAE3F05B38E1C38013E3
EA63F3383F3F00EA1E1E11177F9614>38 D<126012F012F812781218A31230A2126012C0
1280050C789614>I<EA01801203EA06005A121C121812385AA35AA91270A37E1218121C
120C7EEA03801201091D799914>I<128012C01260123012381218121C120EA31207A912
0EA3121C121812381230126012C01280081D7C9914>I<EA0380A3EA638CEAF39EEA7FFC
EA3FF8EA0FE0A2EA3FF8EA7FFCEAF39EEA638CEA0380A30F107E9214>I<EA01C0A7B512
80A33801C000A711117F9314>I<127012F812FCA2127C120C1218123012E012C0060A79
8414>I<EAFFFEA30F037E8C14>I<127012F8A312700505798414>I<1306130EA2131CA2
1338A21370A213E0A2EA01C0A2EA0380A3EA0700A2120EA25AA25AA25AA25AA25A0F1D7E
9914>I<EA07C0EA0FE0EA1C70EA3838EA3018EA701CA2EAE00EA9EA701CA2EA3838A2EA
1C70EA0FE0EA07C00F177E9614>I<1203A25A5A123F12F712471207AEEA7FF0A20C177C
9614>I<EA0FC0EA1FF0EA3838EA701CEAE00EA312401200131CA213381330137013E0EA
01C0EA030012065AEA180E1230EA7FFEA20F177E9614>I<EA0FC0EA1FF0EA3838EA701C
A212201200131813381370EA0FE013F0EA0038131C130EA2124012E0A2EA701CEA7838EA
3FF0EA0FC00F177E9614>I<EA01F0EA07F8EA0E1C121C1238EA30001270A25AEAE7C0EA
EFF0EAF838EAF01C130CEAE00EA212601270130CEA381CEA1C38EA0FF0EA07C00F177E96
14>54 D<EA07C0EA1FE0EA3830EA7038EA601C12E0130C130EA2EA601E1270EA383EEA1F
EEEA07CEEA000E131CA3EA7038133013E0EA3FC0EA1F000F177E9614>57
D<127012F8A312701200A6127012F8A312700510798F14>I<127012F8A312701200A612
6012F012F8A2127812181230127012E012800515798F14>I<130E133E137C13F0EA03E0
EA07C0EA1F00123E12F85A7E123E7EEA07C0EA03E0EA00F0137C133E130E0F137E9414>
I<B51280A27EC8FCA3387FFF80B5FCA211097F8F14>I<124012E012F8127C121EEA0F80
EA07C0EA01F0EA00F8133E131E133E13F8EA01F0EA07C0EA0F80EA1E00127C5A12E01240
0F157E9514>I<EA01E0EA07F0EA0E38EA181CEA38FC1271EA731E1277EAEE0EA7EA771C
EA7318EA71F0EA38E0EA1806EA0E1EEA07F8EA01F00F177E9614>64
D<EA01C0487EA21360A2EA0770A4EA0630EA0E38A4487EEA1FFCA2EA1C1CA2487EA238FE
3F80A211177F9614>I<EAFFF013FCEA381E130E1307A4130E131EEA3FFCA2EA381E130E
1307A5130E131EEAFFFC13F810177F9614>I<3801F180EA07FFEA0E1FEA1C071238EA70
03A348C7FCA738700380A338380700121CEA0E0EEA07FCEA01F011177F9614>I<EAFFE0
13F8EA383C7F130E7FA3EB0380A8EB0700A2130E131E5BEAFFF813E011177F9614>I<B5
FCA2EA3807A490C7FCA21338A2EA3FF8A2EA3838A290C7FCA3EB0380A4B5FCA211177F96
14>I<B51280A2EA3803A490C7FCA21338A2EA3FF8A2EA3838A290C7FCA7B4FCA211177F
9614>I<EA03C6EA0FFEEA1C3EEA181E1238EA700EA21260EAE000A4137FA2130E126012
70A2EA381E1218EA1C3EEA0FFEEA03CE10177F9614>I<38FE3F80A238380E00A8EA3FFE
A2EA380EA938FE3F80A211177F9614>I<EAFFF8A2EA0700B3EAFFF8A20D177D9614>I<B4
FCA21238AF1307A4B5FCA210177E9614>76 D<38FC1F80A2007C1300EA7637A4EA7777A2
EA7367A313E7EA71C7A2EA7007A638F80F80A211177F9614>I<38FE3F80A2383E0E0012
3BA4138E1239A213CEA31238A213EE136EA4133E12FEA211177F9614>I<EA1FF0EA7FFC
EA783CEA701CEAE00EAFEA701CEA783CEA7FFCEA1FF00F177E9614>I<EAFFF013FCEA38
1E130E1307A5130E131EEA3FFC13F0EA3800A812FEA210177F9614>I<EA1FF0EA7FFCEA
783CEA701CEAE00EADEAE38EEAE1CEEA71DCEA78FC127FEA1FF0EA00781338133C131C13
1E0F1C7E9614>I<EAFFE013F8EA383C131C7FA45B133CEA3FF85BEA38387FA51480EB1D
C0A238FE0F80EB070012177F9614>I<EA0FCCEA1FFCEA307CEA603CEAE01CA313001270
127EEA3FE0EA0FF0EA01F8EA001C131E130E126012E0A2EAF01CEAF838EAFFF0EAC7E00F
177E9614>I<387FFF80B5FCEAE1C3A43801C000AFEA0FF8A211177F9614>I<38FC1F80A2
38380E00A3EA3C1EEA1C1CA46C5AA4EA0630EA0770A3EA0360A213E0A26C5A11177F9614
>86 D<38FC1F80A238700700A7EA31C6EA33E6EA3BEE136EA5EA1B6CA2EA1A2CEA1E3CA3
11177F9614>I<EA7E3EA2EA1C3CEA1E38EA0E78EA0F7012075B12035B120112037FA2EA
0770A2EA0E781338EA1C3C131CEA3C1E38FE3F80A211177F9614>I<EA7FFE12FFEAE01C
A21338A2EA007013E0A2EA01C0A2EA0380EA0700A2120EA25AEA380EA21270A2EAFFFEA2
0F177E9614>90 D<EAFFE0A2EAE000B3A7EAFFE0A20B1D799914>I<12C07EA21270A27E
A27EA27EA27EA2EA0380A3EA01C0A2EA00E0A21370A21338A2131CA2130EA213060F1D7E
9914>I<EAFFE0A21200B3A712FFA20B1D7F9914>I<1208121812301260A212C0A312F012
F812781230050C799914>96 D<EA1FC0EA7FF0EA7078EA2018EA001CA2EA07FC121FEA3C
1C127012E0A3EA707C383FFF80EA0F8F11107E8F14>I<12FCA2121CA513F8EA1DFEEA1F
07EA1E03001C1380EB01C0A6EB0380001E1300EA1F0EEA1DFCEA0CF81217809614>I<EA
03F8EA0FFEEA1C0EEA3804EA7000126012E0A412601270EA380EEA1C1EEA0FFCEA03F00F
107E8F14>I<137EA2130EA5EA07CEEA0FFEEA1C3EEA301EEA700E12E0A61270EA301EEA
383E381FEFC0EA07CF12177F9614>I<EA07E0EA0FF0EA1C38EA301CEA700CEAE00EA2EA
FFFEA2EAE00012601270EA380EEA1C1EEA0FFCEA03F00F107E8F14>I<13FCEA01FEEA03
8EEA07041300A3EA7FFE12FFEA0700ACEAFFF8A20F177F9614>I<EA07CF381FFF80EA38
3B38301800EA701CA3EA3018EA3838EA3FF0EA37C00070C7FCA2EA3FF86C7E487EEA700F
38E00380A438700700EA3C1EEA1FFCEA07F011197F8F14>I<12FCA2121CA51378EA1DFE
EA1F86EA1E07121CAA38FF8FE0A21317809614>I<1206120FA21206C7FCA4B4FCA21207
ACEAFFF8A20D187C9714>I<12FCA2121CA5EBFF80A2EB1C005B5B5BEA1DC0EA1FE0A2EA
1E70EA1C38133C131C7F38FF1F80A21117809614>107 D<EAFF80A21203B3EAFFFEA20F
177E9614>I<EAFB8EEAFFDF383CF380A2EA38E3AA38FEFBE013791310808F14>I<EAFC78
EAFDFEEA1F86EA1E07121CAA38FF8FE0A21310808F14>I<EA07C0EA1FF0EA3C78EA701C
A2EAE00EA6EA701CEA783CEA3C78EA1FF0EA07C00F107E8F14>I<EAFCF8EAFDFEEA1F07
EA1E03001C1380EB01C0A6EB0380001E1300EA1F0EEA1DFCEA1CF890C7FCA6B47EA21218
808F14>I<EA03E7EA0FF7EA1C1FEA300F1270487EA6EA700F1230EA1C3FEA0FF7EA07C7
EA0007A6EB3FE0A213187F8F14>I<EAFE1FEB7F80EA0EE3380F810090C7FCA2120EA8EA
FFF0A211107F8F14>I<EA0FD8EA3FF8EA603812C0A2EAF000EA7F80EA3FF0EA07F8EA00
1CEA600612E012F0EAF81CEAFFF8EACFE00F107E8F14>I<1206120EA4EA7FFC12FFEA0E
00A8130EA3131CEA07F8EA01F00F157F9414>I<EAFC3FA2EA1C07AB131F380FFFE0EA03
E71310808F14>I<38FE3F80A2383C1E00EA1C1CA36C5AA3EA0630EA0770A36C5AA31110
7F8F14>I<38FE3F80A238700700EA380EA3EA39CEA3EA1B6C121AA3EA1E7CA2EA0E3811
107F8F14>I<EA7E3FA2EA1E3CEA0E78EA07705B12036C5A12037FEA0770EA0E78133848
7E38FE3F80A211107F8F14>I<38FE3F80A2381C0E005BA2120E5BA212071330A2EA0370
A25B1201A25BA3485A12730077C7FC127E123C11187F8F14>I<EA3FFF5AEA700E131C13
38EA007013E0EA01C0EA0380EA0700120EEA1C0712381270B5FCA210107F8F14>I<133E
13FEEA01E0EA0380AAEA7F0012FE127FEA0380AAEA01E0EA00FE133E0F1D7E9914>I<12
E0B3AB031D789914>I<127812FE120FEA0380AAEA01FCEA00FEEA01FCEA0380AAEA0F00
12FE12780F1D7E9914>I E /Fn 48 123 df<3801F8F038060738EA0C0E381806101400
A3B512C038180600AB387E1FC01514809314>11 D<EA01F8EA0604EA0C0E121890C7FCA3
EAFFFEEA1806AB387E1F801114809313>I<124012E0A61240A61200A4124012E0124003
147D9309>33 D<124012E012601220A31240A2128003097D9309>39
D<120212041208121812101230122012601240A212C0AA1240A212601220123012101218
120812041202071E7D950D>I<1280124012201230121012181208120C1204A21206AA12
04A2120C1208121812101230122012401280071E7E950D>I<124012E012601220A31240
A2128003097D8209>44 D<12FFA2080280860B>I<124012E0124003037D8209>I<120C12
1C12EC120CAFEAFFC00A137D9211>49 D<EA0FC0EA3070EA7038A31200133013E0EA0FC0
EA007013381318131C126012F01318EAE038EA6070EA1FC00E137F9211>51
D<136013E0A2EA016012021206120C120812101220126012C0EAFFFCEA0060A5EA03FC0E
137F9211>I<EA07C0EA0C20EA10701220EA6000A25A12CFEAD0C0EAE060EAC0201330A3
1240EA6020EA2060EA10C0EA0F000C137E9211>54 D<124012E012401200A7124012E012
40030D7D8C09>58 D<B51280EA1C031300A21440A2130814001318EA1FF8EA1C18130814
201300A21460144014C01301B5FC13147F9316>69 D<EBFC2038070360380C00E0481360
5A00701320126000E01300A4EB0FF8EB00E01260127012307E7E380703603800FC201514
7E931A>71 D<38FF87FC381C00E0A8EA1FFFEA1C00A938FF87FC16147F9319>I<EAFF80
EA1C00B2EAFF8009147F930C>I<EA0FF8EA00E0AE126012F013C0EA6180EA3F000D147F
9311>I<00FEEB0FE0001E140000171317A338138027A23811C047A23810E087A3EB7107
A2133AA2131CA2123839FE083FE01B147F931E>77 D<38FC01FC381E0070001713201380
1213EA11C0EA10E01370A21338131C130E130F1307EB03A0EB01E01300A20038136000FE
132016147F9319>I<EAFFF8EA1C07EB0380EB01C0A4EB0380EB0700EA1FF8EA1C0E7FEB
0380A41484A2EB01CC38FF80F816147F9318>82 D<EA1F10EA30F0EA603012C01310A2EA
E0001270127FEA3FC0EA0FE0EA00F0133813181280A3EAC030EAF060EA8FC00D147E9312
>I<387FFFF03860703000401310A200801308A300001300ACEA07FF15147F9318>I<127F
EAE1C0EAE040EA40601200EA07E0EA3860126012C01364A2EA61E4EA3E380E0D7E8C11>
97 D<12F01230A6EA33E0EA3430EA3808EA300C1306A5130CEA3808EA3430EA23E00F14
7F9312>I<EA0FE0EA18701220EA6020EAC000A51260EA2010EA1820EA0FC00C0D7F8C0F>
I<13781318A6EA0F98EA1878EA2038EA601812C0A51260EA2038EA1858EA0F9E0F147F93
12>I<EA0F80EA1040EA2020EA6030EAC010EAFFF0EAC000A31260EA2010EA1820EA0FC0
0C0D7F8C0F>I<EA03C0EA0CE0121813401300A3B4FC1218AB127F0B1480930A>I<EA0F3C
EA30E6EA2040EA6060A3EA2040EA30C0EA2F001260A2EA3FE013F0EA6018EAC00CA3EA60
18EA3030EA0FC00F147F8C11>I<12F01230A6EA33E0EA3430EA38181230A9EAFC7E0F14
7F9312>I<1220127012201200A512F01230AB12FC06157F9409>I<12F01230A6137C1330
13601380EA31001233EA3F801231EA30C0136013701330EAFC7C0E147F9311>107
D<12F01230B212FC06147F9309>I<38F3E1F03834321838381C0CEA3018A938FC7E3F18
0D7F8C1B>I<EAF3E0EA3430EA38181230A9EAFC7E0F0D7F8C12>I<EA0FC0EA1860EA2010
EA6018EAC00CA5EA6018A2EA3870EA0FC00E0D7F8C11>I<EAF3E0EA3430EA3808EA300C
1306A5130CEA3808EA3430EA33E0EA3000A512FC0F137F8C12>I<EAF3C0EA34E01238EA
30401300A812FE0B0D7F8C0D>114 D<EA3E80126112C0A2EAE000127EEA3F80EA03C012
80A212C0EAE180EA9F000A0D7F8C0D>I<1210A312301270EAFF80EA3000A71380A3EA11
00120E09127F910D>I<EAF078EA3018A91338EA1858EA0F9E0F0D7F8C12>I<EAF83CEA30
181310EA3830EA1820A2EA0C40A2EA0680A3EA0300A20E0D7F8C11>I<38F87CF8387070
3038305820A238188840138CA2380D04801306A238060300A3150D7F8C18>I<EAF87CEA
3030EA1860EA0C401380EA07007EEA0780EA0CC0EA08601210EA3030EAF07C0E0D7F8C11
>I<EAF83CEA30181310EA3830EA1820A2EA0C40A2EA0680A3EA0300A21202A212E4A212
E812700E137F8C11>I<EAFFF0EAC060EA80C012811380EA03001206EA0C101218EA3830
EA3020EA6060EAFFE00C0D7F8C0F>I E /Fo 9 58 df<121812F81218AA12FF080D7D8C
0E>49 D<123EEA4180EA80C012C01200A2EA0180EA03001204EA08401230EA7F8012FF0A
0D7E8C0E>I<123E1241EA61801201EA0300121EEA0180EA00C0A212C0A2EA4180EA3E00
0A0D7E8C0E>I<12035AA2120B12131223126312C3EAFFC0EA0300A3EA0FC00A0D7E8C0E>
I<EA6080EA7F00125C1240A2125FEA6180EA00C0A212C01280EA4180EA3E000A0D7E8C0E
>I<120FEA31801261EA60005A12DEEAE180EAC0C0A31260EA2180EA1E000A0D7E8C0E>I<
1240EA7FE013C0EA8080EA81001202A25A120C12081218A40B0E7E8D0E>I<121E1221EA
6180A2EA7100123E123FEA6380EAC0C0A3EA6180EA3F000A0D7E8C0E>I<121E1261EAC0
8013C0A31261121E120013801261EA6300123C0A0D7E8C0E>I E
/Fp 47 122 df<903803F0F090380E19989038183B38EC33309038380700A3EB700EA300
07B512E03900700E0013E05CA4EA01C05CA4EA03805CA3130048136014E0386630C038E6
7180D8CC63C7FCEA783E1D21819918>11 D<EB03FEEB0E03EB1C07EB1806EB3800A35BA3
3807FFFC3800701CEBE038A41470EA01C0A314E4A2EA0380A21468143090C7FC5AA21266
12E65A12781821819916>I<903803FB80EB0E0FEB1C1FEB181B9038380700A31370140E
A23807FFFE3800700E495AA45CEA01C0A31472A2EA0380A21434141890C8FC5AA2126612
E65A12781921819917>I<EA1830EA3C78A2EA1C38EA0810A3EA1020EA2040EA4080EA81
000D0B7A9914>34 D<130413181330136013C013801201EA0300A21206120E120C121C12
18A212381230A21270A21260A312E0A35AA51260A31220123012107E0E267B9B10>40
D<134013601320133013101318AB1338A21330A21370A2136013E013C0A2120113801203
13001206A25A5A12105A5A5A0D267F9B10>I<121812381278123812081210A21220A212
401280050B7D830C>44 D<EAFF80A2130009037D880E>I<1230127812F0126005047C83
0C>I<14081418A21430A21460A214C0A2EB0180EB0300A21306A25BA25B5BA25BA25BA2
485A48C7FCA21206A25AA25AA25A5AA25A5A15257F9B14>I<1308131813301370EA01F0
EA0E70EA00E0A4EA01C0A4EA0380A4EA0700A45AEAFFE00D187C9714>49
D<133E13C3380101801202380481C0134138088380120438070300EA00065BEA01F0EA00
187FA2130EA21260EAE01CA2EA8038EA4030EA20E0EA1F8012187D9714>51
D<13031480EB0700A3130EA35BA213185BA25B5B13C6EA018EEA030EEA021C1204120812
10EA7FB838807F8038003800A25BA41360111F7F9714>I<131EEB6180EA0180EA030312
06000EC7FC5A12181238EA39F0EA7218EA740CEA780E127012F012E0A35BA2EA60385BEA
30C0EA1F8011187C9714>54 D<EA01E0EA0610EA081812101220A21240EA6030EAE0F0EA
61E0EA03C0EA0F80EA0E005AEA1880EA1900121B120CC7FCA41218123C5A12300D1A7999
14>63 D<EB0F82EB7062EBC0163803801E3807000C120E5A121800381308123000701300
A25AA41420A314401260148038300100EA1006EA0C18EA03E0171A7A991B>67
D<3803FFF83800700E80809038E00180A315C0EA01C0A43903800380A3150048485AA214
0E140C000E131C5C5C5C381C0380D8FFFEC7FC1A1A7D991D>I<0003B5FC380070071403
140113E0A43801C080A313C13803FF001381A3EA0702EB0004A21408120E141814101430
4813E0B5FC181A7D991A>I<EA03FFEA0070A313E0A4EA01C0A4EA0380A4EA0700A4120E
A45AEAFF80101A7D990F>73 D<3803FFF03800701C140E140713E0A43801C00E141C1438
14E03803FF80EB80C014601470EA0700A4000E13E0A214E114E248136238FF803C181A7D
991C>82 D<EB3F10EB60903801807013004813201206A31400120713C0EA03F8EA01FEEA
007FEB0F8013031301A21220A238600300A21306EA700CEAC818EA87E0141A7D9916>I<
383FFFFC38381C0C00201304124013381280A338007000A45BA4485AA4485AA41207EAFF
F8161A79991B>I<387FE0FF380E00181410A2481320A4481340A4481380A438E00100A3
1302A25BEA60085BEA3860EA0F80181A78991D>I<EA0408EA0810EA1020EA2040A2EA40
80A2EA70E012F1A2EA60C00D0B769914>92 D<EA03CCEA0E2EEA181C123812301270EAE0
38A4EAC072A3EA60F2EA6134EA1E180F107C8F14>97 D<127E120EA35AA45AA2EA3BC0EA
3C301278EA7018A3EAE038A4EAC070136013E0EA60C0EA6380EA1E000D1A7C9912>I<EA
01E0EA0618120CEA1838EA3010EA7000126012E0A413081310EA6020EA30C0EA1F000D10
7C8F12>I<EB1F801303A3EB0700A4130EA2EA03CEEA0E2EEA181C123812301270485AA4
EAC072A3EA60F2EA6134EA1E18111A7C9914>I<EA01E0EA0E18EA1C08123812701310EA
FFE0EAE000A41308EA60101320EA30C0EA1F000D107C8F12>I<1307EB0980131BEB3B00
133813301370A4EA07FFEA00E0A5485AA5485AA490C7FC5AA21206126612E412CC127011
2181990C>I<13F338038B8038060700120E120C121CEA380EA4EA301CA3EA183C5BEA07
B8EA0038A25B1260EAE0E0EAC1C0007FC7FC11177E8F12>I<EA1F801203A348C7FCA412
0EA2137CEA0F86EA1E07A2121CA2EA380EA35B00701380A21338EB3900EAE019EA600E11
1A7E9914>I<1203120712061200A61238124C124E128E129CA2121C1238A212701272A2
12E212E41264123808197C980C>I<121F1207A3120EA4121CA41238A41270A412E4A412
E81230081A7D990A>108 D<38307C1E38598663399E0783801403129CA239380E0700A3
140ED8701C1340A2141C158038E0380C39601807001A107C8F1F>I<EA307CEA5986EA9E
07A2129CA2EA380EA35B00701380A21338EB3900EAE019EA600E11107C8F16>I<EA01F0
EA0618EA0C0CEA180E12301270126012E0A2130C131C13181330EA6060EA30C0EA1F000F
107C8F14>I<EA030F380590C0EA09E0EBC060A3380380E0A4380701C0148013031400EA
0E8E137890C7FCA25AA4B4FC1317808F14>I<EA03C2EA0E2EEA181C123812301270EAE0
38A4EAC070A3EA60F0EA61E0121E1200A2EA01C0A4EA1FF00F177C8F12>I<EA30F0EA5D
18EA9E38EA9C181300A25AA45AA45A12600D107C8F10>I<EA03E0EA04301208EA187013
60EA1C00EA1F8013C0EA0FE01200136012E0A2EA80C0EA4180EA3E000C107D8F10>I<12
06120EA45AA2EAFFC0EA1C005AA45AA412E1A312E212E412380A177C960D>I<EA3806EA
4C07EA4E0E128E129CA2EA1C1C1238A3EA7039A3EA3079EA389AEA0F0C10107C8F15>I<
EA3818EA4C1C124EEA8E0C129CA2EA1C081238A213101270A21320EA3040EA18C0EA0F00
0E107C8F12>I<38380C10384C0E38EA4E1C008E1318129CA2381C38101238A338707020
A2144012303818B880380F0F0015107C8F19>I<EA078F3808D180EA10F3EA20E1EBE000
A2EA01C0A4EA0382A212C3EAE784EAC588EA78F011107E8F12>I<EA3806EA4C07EA4E0E
128E129CA2EA1C1C1238A3EA7038A3EA3078EA38F0EA0F7012001360EA60E0EAE1C0EAC1
80EA4700123C10177C8F13>I E /Fq 9 58 df<1218127812981218AC12FF08107D8F0F>
49 D<121FEA6180EA40C0EA806012C01200A213C0EA0180EA030012065AEA10201220EA
7FC012FF0B107F8F0F>I<121FEA2180EA60C0A212001380EA0100121FEA008013401360
12C0A2EA8040EA6080EA1F000B107F8F0F>I<EA0180A212031205120D12191211122112
4112C1EAFFE0EA0180A4EA0FE00B107F8F0F>I<EA20C0EA3F80EA2E001220A3122FEA30
80EA2040EA0060A312C0EA80C0EA6180EA1F000B107F8F0F>I<EA0780EA1840EA30C012
6013005A12CFEAF080EAE040EAC060A31240EA60C0EA3080EA1F000B107F8F0F>I<1240
EA7FF013E0EA8040A2EA0080EA01001202A212061204A2120CA50C117F900F>I<121FEA
3180EA60C0A3EA3180EA3F00120EEA3380EA61C0EAC060A31340EA60C0EA1F000B107F8F
0F>I<121FEA3180EA60C0EAC0401360A3EA40E01221EA1E6012001340EA60C01380EA63
00121E0B107F8F0F>I E /Fr 83 125 df<EBFE7C380381C6380603CE000E1384001C13
80A6B512F0381C0380AE38FF8FF0171A809916>11 D<13FEEA038138060180EA0E03381C
010090C7FCA5B51280EA1C03AE38FF8FF0141A809915>I<EBFF80EA0383EA0603120E12
1CA6B5FCEA1C03AE38FF9FF0141A809915>I<90387E1F803901C17040390703C0600006
EB80E0000E14401500A5B612E0380E0380AE397F8FE3FC1E1A809920>I<126012F0A612
60AA12201200A4126012F0A21260041A7D990B>33 D<EA60C0EAF1E0EAF9F0EA68D0EA08
10A3EA1020A2EA2040EA40800C0B7F9913>I<EA01C0EA0320EA0610120EA45B5BA23907
807F809038001E0014086D5A120B3811C020EA31E000605BEB7080EAE078013DC7FC6D13
80130E39701F0100383861C3380F807C191A7E991E>38 D<126012F012F812681208A312
10A212201240050B7D990B>I<1380EA010012025A120C120812185AA35AA412E0AA1260
A47EA37E1208120C12047E7EEA008009267D9B0F>I<7E12407E7E12181208120C7EA37E
A41380AA1300A41206A35A1208121812105A5A5A09267E9B0F>I<126012F0A212701210
A31220A21240A2040B7D830B>44 D<EAFFC0A20A0280880D>I<126012F0A2126004047D
830B>I<1304130C1318A31330A31360A313C0A3EA0180A3EA0300A31206A35AA35AA35A
A35AA35AA20E257E9B13>I<EA07E0EA1C38EA381CEA300CEA700EEA6006A2EAE007AAEA
6006A2EA700EEA300CEA381CEA1C38EA07E010187F9713>I<12035AB4FC1207B3A2EA7F
F80D187D9713>I<EA0F80EA1060EA2030EA4038EA803CEAC01C12E01240EA003C1338A2
1370136013C0EA018013001202EA040412081210EA3008EA3FF8127F12FF0E187E9713>
I<EA07E0EA1838EA201CEA601EEA700EEA201E1200131CA213381370EA07E0EA0038131C
130E130FA212E0A212C0EA400EEA601CEA1838EA07E010187F9713>I<1318A213381378
13F813B8EA01381202A212041208121812101220124012C0B5FCEA0038A6EA03FF10187F
9713>I<EA3018EA3FF013E01380EA2000A5EA2FC0EA3060EA2030EA00381318131CA212
4012E0A2EA8018EA40381330EA30E0EA0F800E187E9713>I<EA01F8EA0704EA0C06EA18
0E123013001270126012E0EAE3E0EAE418EAE80CEAF00EEAE0061307A31260A2EA7006EA
300EEA180CEA0C38EA07E010187F9713>I<1240EA7FFF13FEA2EA4004EA80081310A2EA
00201340A21380120113005AA25A1206A2120EA5120410197E9813>I<EA07E0EA1818EA
300CEA20061260A21270EA780CEA3E18EA1F30EA07C0EA03E0EA0CF8EA307CEA601E130F
EAC0071303A3EA6002EA2004EA1818EA07E010187F9713>I<EA07E0EA1C30EA3018EA70
0CEA600EEAE006A21307A31260EA700FEA3017EA1827EA07C7EA00071306130E130C1270
1318EA6030EA3060EA0F8010187F9713>I<126012F0A212601200A8126012F0A2126004
107D8F0B>I<126012F0A212601200A8126012F0A212701210A31220A21240A204177D8F
0B>I<B61280A2C9FCA6B61280A2190A7E8D1E>61 D<EA1FC0EA2060EA4030EAC03812E0
A21200137013E0EA018013005A1202A6C7FCA41206120FA212060D1A7E9912>63
D<137F380180C03806003000081308487F38203E0213E13841C081384380710083EB7080
EA8700A6EA838012433941C0F1003820E131EB3E1E6CC8FC7E0006EB03803901803E0038
007FE0191A7E991E>I<130CA3131EA2132F1327A2EB4380A3EB81C0A200017F1300A248
B47E38020070A2487FA3487FA2003C131EB4EBFFC01A1A7F991D>I<B51280380E00E014
701438143CA514781470EB01E0380FFFC0380E00F01478143C141C141EA4141C143C1478
14F0B512C0171A7F991B>I<EB3F023801C0C63803002E000E131E48130E14065A007813
021270A200F01300A600701302A21278003813047E14087E000313303801C0C038003F00
171A7E991C>I<B57E380E00E01470808080A280A21580A81500A25C140E5CA2147814E0
B51280191A7F991D>I<B512F8380E003814181408140C1404A3EB0100A35BEA0FFFEA0E
037FA3EB0002A314061404A2140C143CB512FC171A7F991A>I<B512F8380E0038141814
08140C1404A3EB0100A35BEA0FFFEA0E037FA390C7FCA8EAFFE0161A7F9919>I<EB3F02
3801C0C63803002E000E131E48130E14065A007813021270A200F090C7FCA5903801FFC0
3970000E00A2127812387EA27E000313163801C06638003F821A1A7E991E>I<39FFE1FF
C0390E001C00AB380FFFFC380E001CAC39FFE1FFC01A1A7F991D>I<EAFF80EA1C00B3A6
EAFF80091A7E990E>I<EA0FFEEA0070B3124012E0A2EA40E0EA61C0EA1F000F1A7E9914>
I<39FFE01FC0390E000F00140C14085C5C5C495A0102C7FC5B130C131C132E1347EB8380
EA0F03380E01C06D7EA2147080A280141E141F39FFE07FC01A1A7F991E>I<EAFFE0000E
C7FCB01408A3141814101430147014F0B5FC151A7F9918>I<B414FF000F14F0A2390B80
0170A23809C002A33808E004A2EB7008A3EB3810A3EB1C20A2EB0E40A3EB0780A2EB0300
121C39FF8307FF201A7F9923>I<00FEEB7FC0000FEB0E001404EA0B80EA09C0A2EA08E0
1370A21338131CA2130E1307EB0384A2EB01C4EB00E4A21474143CA2141C140C121C38FF
80041A1A7F991D>I<137F3801C1C038070070000E7F487F003C131E0038130E0078130F
00707F00F01480A80078EB0F00A20038130E003C131E001C131C6C5B6C5B3801C1C0D800
7FC7FC191A7E991E>I<B51280380E01E0EB007014781438143CA4143814781470EB01E0
380FFF80000EC7FCABEAFFE0161A7F991A>I<B5FC380E01C0EB0070147880A55C1470EB
01C0D80FFFC7FC380E0380EB00C0801470A31478A31540143CEC1C8039FFE00F001A1A7F
991C>82 D<EA0FC2EA1836EA200EEA600612C01302A3EAE0001270127EEA3FE0EA1FF8EA
03FCEA007E130E130713031280A3EAC0021306EAE004EAD818EA87E0101A7E9915>I<00
7FB5FC38701C0700401301A200C0148000801300A300001400B13803FFE0191A7F991C>
I<39FFE07FC0390E000E001404B200065B12076C5B6C6C5A3800E0C0013FC7FC1A1A7F99
1D>I<39FF801FC0391C00070014066C1304A36C5BA26C6C5AA36C6C5AA26C6C5AA3EB70
80A213790139C7FCA2131EA3130CA21A1A7F991D>I<3AFF81FF07F03A3C007801C0001C
EC0080A36C90389C0100A33907010E02A33903830F04EB8207A2150C3901C40388A33900
E801D0A390387000E0A301305B01201340241A7F9927>I<39FF801FE0391E0007001406
6C13046C130CEB800800035BEA01C06D5A00001360EB7040EB78801338011DC7FC131F13
0EAAEBFFC01B1A7F991D>89 D<12FEA212C0B3AF12FEA207257D9B0B>91
D<EA2040A2EA4080A2EA8100A3EAE1C0EAF1E0A2EA60C00B0B7A9913>I<12FEA21206B3
AF12FEA20725809B0B>I<EA1FC0EA38707FEA101C1200A2EA03FCEA1E1C1238127012E0
1480A2133CEA705F381F8F0011107F8F13>97 D<12FC121CA913FCEA1D07381E0380381C
01C0130014E0A6EB01C01480381E0300EA1906EA10F8131A809915>I<EA07F8EA1C1C12
38EA700813005AA612701304EA3808EA1C18EA07E00E107F8F11>I<133F1307A9EA03E7
EA0C17EA180F487E127012E0A6126012706C5AEA1C373807C7E0131A7F9915>I<EA07C0
EA1C30EA30181270EA600C12E0EAFFFCEAE000A41260EA7004EA3808EA1C18EA07E00E10
7F8F11>I<EA01F0EA0718EA0E38EA1C101300A6EAFFC0EA1C00AEEAFF800D1A80990C>I<
EA0FCF3818718038303000EA7038A4EA30306C5AEA2FC00060C7FCA21270EA3FF013FC6C
7EEA600FEAC003A4EA6006EA381CEA07E011187F8F13>I<12FC121CA9137CEA1D87381E
0380A2121CAB38FF9FF0141A809915>I<1218123CA212181200A612FC121CAE12FF081A
80990A>I<EA0180EA03C0A2EA0180C7FCA6EA0FC01201B21241EAE180EAE300127E0A21
82990C>I<12FC121CA9EB1FC0EB0F00130C5B13205B13E0121DEA1E70EA1C7813387F13
1E7F148038FF9FE0131A809914>I<12FC121CB3A6EAFF80091A80990A>I<38FC7C1F391D
8E6380391E0781C0A2001C1301AB39FF9FE7F81D107F8F20>I<EAFC7CEA1D87381E0380
A2121CAB38FF9FF01410808F15>I<EA07E0EA1C38EA300CEA700EEA6006EAE007A6EA60
06EA700EEA381CEA1C38EA07E010107F8F13>I<EAFCFCEA1D07381E0380381C01C0A2EB
00E0A6EB01C01480381E0300EA1D06EA1CF890C7FCA6B47E1317808F15>I<EA03E1EA0C
13EA180BEA300FEA700712E0A61270A26C5AEA1C37EA07C7EA0007A6EB3FE013177F8F14
>I<EAFC78EA1D9CEA1E1C1308EA1C00ABEAFF800E10808F0F>I<EA1F20EA60E0EA402012
C0A2EAF000127FEA3FC0EA1FE0EA00F0EA8070133012C01320EAF040EA8F800C107F8F0F
>I<1208A41218A21238EAFFC0EA3800A81320A41218EA1C40EA07800B177F960F>I<38FC
1F80EA1C03AB1307120CEA0E0B3803F3F01410808F15>I<38FF0F80383C0700EA1C0613
04A26C5AA26C5AA3EA03A0A2EA01C0A36C5A11107F8F14>I<39FE7F1F8039381C070000
3C1306381C0C04130E380E16081317A238072310149013A33803C1A014E0380180C0A319
107F8F1C>I<38FE3F80383C1E00EA1C086C5AEA0F306C5A6C5A12017F1203EA0270487E
1208EA181CEA381E38FC3FC012107F8F14>I<38FF0F80383C0700EA1C061304A26C5AA2
6C5AA3EA03A0A2EA01C0A36C5AA248C7FCA212E112E212E4127811177F8F14>I<EAFFF8
EAE07012C0EA80E0EA81C0A2EA0380EA0700A2EA0E04121CA2EA380812701338EAFFF80E
107F8F11>I<B512C01201808913>I<B712F82501808926>I E /Fs
53 122 df<EA3807387C0F8038FE1FC000FF13E0A2EA7F0F383B0760EA0300A2000613C0
A2EA0E01000C138038180300EA3006EA200413107E9F1B>34 D<EAFFF0A40C047F8B11>
45 D<1238127C12FEA3127C123807077C860F>I<EA01FCEA07FF381F07C0EA1E03003E13
E0387C01F0A300FC13F8AD007C13F0A3383E03E0001E13C0EA1F8F3807FF00EA01FC151D
7E9C1A>48 D<137013F0120712FF12F91201B3A4387FFFC0A2121D7D9C1A>I<EA03FC38
1FFF8038381FC0387C07E038FE03F0A214F81301127C1238EA000314F0A2EB07E0EB0FC0
1400131E5B13705B3801C018EA0380EA0600481338381FFFF05A5AB5FCA2151D7E9C1A>
I<EA03FC380FFF80381C0FC0383C07E0387E03F0A31307003C13E01200EB0FC0EB3F8038
03FE005B38000F80EB07C0EB03E014F014F81238127C12FEA214F012FC387807E0383C0F
C0381FFF803803FC00151D7E9C1A>I<EB01C013031307A2130F131F133B1373136313C3
EA01831203EA0703120E120C12181238127012E0B512FEA2380007C0A6EBFFFEA2171D7F
9C1A>I<001C13E0EA1FFF14C01480140013FC13C00018C7FCA4EA19FE381FFF80381E07
C0381803E0381001F0120014F8A2127812FCA314F0EA7803007013E0383C0FC0380FFF00
EA03FC151D7E9C1A>I<133F3801FFC03807C0E0EA0F81381F03F0121E123E127CEB01E0
90C7FCEAFC1013FF00FD13C0EB03E038FE01F0A200FC13F8A4127CA3003C13F0123E381E
03E0380F07C03807FF803801FE00151D7E9C1A>I<1260387FFFF8A214F014E014C038E0
018038C00300A21306C65A5B13381330137013F0A2485AA21203A41207A56C5A6C5A151E
7D9D1A>I<EA01FE380FFF80381E07C0383801E0EB00F01278A2127C127FEBC1E0383FE3
C0381FFF80380FFE003807FF8014C0001F13E0383C3FF0EA780FEB03F8EAF00113001478
A214701278007C13E0383E03C0380FFF803803FC00151D7E9C1A>I<EA01FCEA0FFF381F
0780383E03C0007C13E0130100FC13F0A314F8A4EA7C03A2EA3E05EA1FFDEA07F9EA0041
EB01F0123C127EEB03E0A214C0383C078038381F00EA1FFCEA07F0151D7E9C1A>I<1238
127C12FEA3127C12381200A61238127C12FEA3127C123807147C930F>I<EA07F8EA1FFE
38381F80EA780F00FC13C0A3127838301F8000001300133E5B13705BA25BA690C7FCA4EA
01C0487E487EA36C5A6C5A12207D9F19>63 D<14E0A2497EA3497EA2EB06FCA2EB0EFEEB
0C7EA2497EA201307F141F01707FEB600FA2496C7E90B5FC4880EB8003000380EB0001A2
00066D7EA2000E803AFFE00FFFE0A2231F7E9E28>65 D<B512FEECFFC03907C007E0EC03
F0EC01F815FCA515F8140315F0EC0FE090B5128015C09038C003F0EC01F815FC140015FE
A515FC1401EC03F8EC07F0B612E015001F1F7E9E25>I<903807FC0290383FFF0E9038FE
03DE3903F000FE4848133E4848131E485A48C7120EA2481406127EA200FE1400A7127E15
06127F7E150C6C7E6C6C13186C6C13386C6C13703900FE01C090383FFF80903807FC001F
1F7D9E26>I<B512FEECFFC03907E007F0EC01F86E7E157E81A2ED1F80A316C0A91680A3
ED3F00A2157E5D4A5AEC07F0B612C04AC7FC221F7E9E28>I<B612E0A23807E007140114
00156015701530A21430A21500147014F013FFA213E014701430A391C7FCA8B57EA21C1F
7E9E21>70 D<903807FC0290383FFF0E9038FE03DE3903F000FE4848133E4848131E485A
48C7120EA2481406127EA200FE91C7FCA591381FFFE0A2007E9038007E00A2127F7EA26C
7E6C7E6C7E6C6C13FE3800FE0190383FFF8E903807FC06231F7D9E29>I<B5380FFFF0A2
3A07E0007E00AC90B512FEA29038E0007EADB5380FFFF0A2241F7E9E29>I<B5FCA2EA07
E0B3A9B5FCA2101F7E9E14>I<D8FFE0EC3FF86D147F00071600D806F814DFA3017CEB01
9FA26DEB031FA26D1306A290380F800CA2903807C018A3903803E030A2903801F060A290
3800F8C0A2EC7D80A2EC3F00A3141ED8FFF0903803FFF8140C2D1F7E9E32>77
D<EB1FF890B5FC3901F81F803907E007E0390FC003F0391F8001F890C7FC4814FC4814FE
007E147EA200FE147FA9007E147E007F14FEA26C14FCEB8001001F14F8390FC003F03907
E007E03901F81F806CB51200EB1FF8201F7D9E27>79 D<B512FCECFF803907E00FE0EC03
F081140181A45D14035DEC0FE090B5128002FCC7FCEBE03FEC0F8081140781A381A31630
EC03F802011360B53800FFC0ED3F80241F7E9E27>82 D<3803FC08380FFF38381E03F8EA
3800481378143812F01418A26C13007EEA7FC013FE383FFF806C13C06C13E06C13F0C613
F81307EB00FC147C143C12C0A36C1338147800F8137038FE01E038EFFFC000811300161F
7D9E1D>I<007FB512FCA2397C07E07C0070141C0060140CA200E0140E00C01406A40000
1400B10003B512C0A21F1E7E9D24>I<3CFFFC0FFFC0FFE0A23C0FC000FC000E007F0007
6E130CA26D151C0003D901BF1318A2D801F85D9138031F80A22600FC076D5AEC060F01FE
15E0903A7E0C07E0C0A2013FECE18091381803F1A2D91FB801FBC7FCECB00102F013FF6D
486C5AA201075C4A137CA2010314784A133801011430331F7F9E36>87
D<00041380EA0C0138180300EA3006EA700EEA600CA2485AA238DC1B8038FE1FC000FF13
E0A2EA7F0F383E07C0381C038013107B9F1B>92 D<EA07FC381FFF80383F07C0EB03E0EB
01F0A2120C1200133FEA07FDEA1F81EA3E01127C12F8A3EAFC02EA7E0C383FF87E380FE0
3E17147F9319>97 D<B4FCA2121FAAEB1FC0EB7FF0EBE0F8EB807CEB007E143EA2143FA6
143EA2147C1380381EC1F8381C7FE038181F8018207E9F1D>I<EA01FE3807FF80381F0F
C0123EA2127CEB030000FCC7FCA6127C127E003E1360003F13C0EA1F813807FF00EA01FC
13147E9317>I<EB07F8A21300AAEA01F8EA07FEEA1F83EA3E01EA7E00127CA212FCA612
7CA2127EEA3E01EA1F07380FFEFFEA03F818207E9F1D>I<EA01FE3807FF80380F83C038
1E01E0383E00F05A14F812FCB5FCA200FCC7FCA3127CA26C1318121E380F80703807FFE0
C6138015147F9318>I<EB3F80EBFFC03803E3E0EA07C71387120FEB83C0EB8000A5EAFF
FCA2EA0F80B0EA7FF8A213207F9F10>I<3803FC3C380FFFFE381E079E383C03DE007C13
E0A5003C13C0381E0780381FFF00EA13FC0030C7FCA21238383FFF806C13F06C13F84813
FC3878007C0070133E00F0131EA30078133CA2383F01F8380FFFE000011300171E7F931A
>I<B4FCA2121FAAEB0FC0EB3FE0EB61F0EBC0F813801300AD38FFE7FFA218207D9F1D>I<
121C123E127FA3123E121CC7FCA6B4FCA2121FB0EAFFE0A20B217EA00E>I<B4FCA2121F
AAEB01FEA2EB00F014C0EB0380EB0700130C5B137C13FC139E130F001E1380EB07C01303
EB01E014F0EB00F838FFC3FFA218207E9F1C>107 D<B4FCA2121FB3AAEAFFE0A20B207E
9F0E>I<3AFE0FE03F8090391FF07FC03A1E70F9C3E09039407D01F0EB807E121FEB007C
AC3AFFE3FF8FFEA227147D932C>I<38FE0FC0EB3FE0381E61F0EBC0F81380EA1F00AD38
FFE7FFA218147D931D>I<48B4FC000713C0381F83F0383E00F8A248137CA200FC137EA6
007C137CA26C13F8A2381F83F03807FFC00001130017147F931A>I<38FF1FC0EB7FF038
1FE1F8EB80FCEB007EA2143E143FA6143E147E147CEB80FCEBC1F8EB7FE0EB1F8090C7FC
A7EAFFE0A2181D7E931D>I<EAFE3EEB7F80381ECFC0138FA2121FEB030090C7FCABEAFF
F0A212147E9316>114 D<EA0FE6EA3FFEEA701EEA600EEAE006A2EAF800EAFFC0EA7FF8
EA3FFCEA1FFE1203EA001FEAC007A212E0EAF006EAF81EEAFFFCEAC7F010147E9315>I<
1203A45AA25AA2123FEAFFFCA2EA1F00AA1306A5EA0F8CEA07F8EA03F00F1D7F9C14>I<
38FF07F8A2EA1F00AD1301A2EA0F063807FCFF6C5A18147D931D>I<39FFE07F80A2391F
001C00380F8018A26C6C5AA26C6C5AA2EBF0E000015B13F900005B13FF6DC7FCA2133EA2
131CA219147F931C>I<3AFFC7FE1FE0A23A1F00F0030014F8D80F801306A29038C1BC0E
0007140CEBC3BE3903E31E18A29038F60F380001143001FE13B03900FC07E0A2EBF80301
785BA2903830018023147F9326>I<38FFC0FFA2380F80703807C0606D5A3803E180EA01
F36CB4C7FC137E133E133F497E136FEBC7C0380183E0380381F048C67E000E7F39FF81FF
80A219147F931C>I<39FFE07F80A2391F001C00380F8018A26C6C5AA26C6C5AA2EBF0E0
00015B13F900005B13FF6DC7FCA2133EA2131CA21318A2EA783012FC5BEAC0E0EAE1C0EA
7F80001EC8FC191D7F931C>I E /Ft 36 122 df<127012F012F8A212781208A31210A3
1220A21240050E7C840D>44 D<13801203120F12F31203B3A6EA07C0EAFFFE0F1E7C9D17
>49 D<EA03F0EA0C1CEA100E487E00401380128000F013C0EAF803A3EA200712001480A2
EB0F00130E5B5B5B13605B485A48C7FC000613405A5A00101380EA3FFF5AB5FC121E7E9D
17>I<1240387FFFE014C0A23840008038800100A21302485AA25B5BA25BA21360A213E0
5B1201A41203A76C5A131F7E9D17>55 D<EA03F0EA0E18487E487E13071270EB038012F0
A214C0A5EA7007A21238EA180BEA0E13EA03E338000380A3EB07001230EA7806130EEA70
0CEA2018EA1070EA0FC0121F7E9D17>57 D<B61280380F000F14031401140015C01540A3
14401500A214C0130113FF130113001440A3EC0020A31540A315C01401EC0380140FB6FC
1B1F7E9E1F>69 D<90380FE0109038381C309038E002703803C00139078000F048C71270
121E15305A1510127C127800F81400A7EC3FFEEC01F000781300127C123CA27EA27E6C7E
3903C001703900E002309038380C1090380FF0001F217E9F24>71
D<EAFFF0EA0F00B3ABEAFFF00C1F7E9E10>73 D<3807FFC038003E00131EB3A3122012F8
A3EAF01CEA403CEA6038EA1070EA0FC012207F9E17>I<B46CEB07FE000715C0A2D805C0
130BA2D804E01313A301701323A26D1343A36D1383A290380E0103A3EB0702A3EB0384A2
EB01C8A3EB00F0A21460121FD8FFE0EB7FFE271F7F9E2A>77 D<B4EB0FF8390F8003E0EC
0080EA0BC0EA09E0A2EA08F01378A27F7FA27FEB0780A2EB03C0EB01E0A2EB00F01478A2
143C141EA2140F1407A214031401123E38FF80001D1F7E9E22>I<EB1FE0EB70383801C0
0E48487E39070003804814C0001EEB01E048EB00F0A2007C14F8A20078147800F8147CA9
00781478007C14F8A2003C14F0003E1301001E14E06CEB03C06C148039038007003801E0
1E38007038EB1FE01E217E9F23>I<B512E0380F007C141E80EC0780A215C0A41580A2EC
0F00141E147CEBFFE090C8FCAEEAFFF01A1F7E9E1F>I<3803F040380C0CC0EA1803EA30
01EA6000A212E01440A36C13007E127CEA7F80EA3FF86CB4FC00071380C613C0EB1FE013
031301EB00F014707EA46C136014E06C13C038F8018038C60300EA81FC14217E9F19>83
D<39FFF00FF8390F0003E0EC0080B3A46CEB01001380120314026C6C5A6C6C5AEB3830EB
0FC01D207E9E22>85 D<EA1FE0EA3030EA7818131CEA300E1200A313FEEA078EEA1E0E12
38127800F01310A3131E127838386720380F83C014147E9317>97
D<EA01FCEA0706EA1C0F123813060078C7FC127012F0A61270127800381380A2381C0100
EA0706EA01F811147F9314>99 D<EB01C0130F1301AAEA01F1EA070DEA0C03EA18011238
1278127012F0A61270A21238EA1803120CEA070D3801F1F815207F9F19>I<EA03F0EA0E
1C487E487EA21270EB038012F0A2B5FC00F0C7FCA31270A26C1380A2381C0100EA0706EA
01F811147F9314>I<137CEA01C6EA030F1207EA0E061300A7EAFFF0EA0E00B2EA7FE010
20809F0E>I<14E03803E330EA0E3CEA1C1C38380E00EA780FA5EA380E6C5AEA1E38EA33
E00020C7FCA21230A2EA3FFE381FFF8014C0383001E038600070481330A4006013606C13
C0381C03803803FC00141F7F9417>I<121C12FC121CAA137C1386EA1D03001E1380A212
1CAE38FF8FF014207E9F19>I<1238127CA31238C7FCA6121C12FC121CB1EAFF80091F7F
9E0C>I<13E0EA01F0A3EA00E01300A61370EA07F012001370B3A31260EAF06013C0EA61
80EA3F000C28829E0E>I<121C12FC121CAAEB1FE0EB0780EB060013045B5B5B136013E0
EA1DF0EA1E70EA1C38133C131C7F130F7F148014C038FF9FF014207E9F18>I<121C12FC
121CB3ABEAFF8009207F9F0C>I<391C3E03E039FCC30C30391D039038391E01E01CA200
1C13C0AE3AFF8FF8FF8021147E9326>I<EA1C7CEAFC86EA1D03001E1380A2121CAE38FF
8FF014147E9319>I<EA01F8EA070E381C0380383801C0A2387000E0A200F013F0A60070
13E0A2383801C0A2381C038038070E00EA01F814147F9317>I<EA1CF0EAFD18EA1E3CA2
1318EA1C00AEEAFFC00E147E9312>114 D<EA0FC8EA3038EA6018EAC008A3EAE000127C
EA3FE0EA1FF0EA07F8EA003CEA800E130612C0A21304EAE00CEAD818EA87E00F147F9312
>I<1202A31206A2120EA2123EEAFFF8EA0E00AB1304A5EA07081203EA01F00E1C7F9B12>
I<381C0380EAFC1FEA1C03AE1307120CEA061B3803E3F014147E9319>I<38FF83F8383E
00E0001C13C06C1380A338070100A21383EA0382A2EA01C4A213E4EA00E8A21370A31320
15147F9318>I<39FF9FE1FC393C078070391C030060EC8020000E1440A214C0D8070413
8014E0A239038861001471A23801D032143A143E3800E01CA2EB6018EB40081E147F9321
>I<38FF83F8383E00E0001C13C06C1380A338070100A21383EA0382A2EA01C4A213E4EA
00E8A21370A31320A25BA3EAF080A200F1C7FC1262123C151D7F9318>121
D E /Fu 19 122 df<127812FCA412781200AE127812FCA41278061A7B9910>58
D<007FB612F0A2397C00F8010070EC00700060153000401510A200C01518A2481508A5C7
1400B3A6497E90B512F8A225297EA82A>84 D<EA03FCEA0C0738100380383C01C0003E7F
6D7E121C1208C7FCA3137FEA03E0EA0F80EA1E005A127C0078144012F8A31301127C393C
027880381E0C7F3907F01E001A1A7E991D>97 D<137F3801C0E038070010000E1378001E
13F85A1470007C13200078130012F8A81278127C003C1308A26C1310000E13206C136038
01C18038007E00151A7E991A>99 D<140F14FFA2141F80AC133F3801C0CF3803802F380F
001F121E001C7F123C127C1278A212F8A71278A27EA26C5B000E132F6CEB4F803901C18F
F038007E0F1C2A7EA921>I<13FC38038780380701C0000E13E0EA1C00003C13F0A24813
78A212F8A2B512F800F8C7FCA51278A26C1308A26C1310000E13206C13403801C1803800
7E00151A7E991A>I<131FEB70C0EBE1E0EA01C31203EB81C0380780801400A9EAFFFEA2
EA0780B3A37FEA7FFCA2132A7FA912>I<140F3901FC308038070743380E03C3001EEBC1
00486C7EA2007C7FA5003C5BA26C485A000E5BD81707C7FCEA11FC0030C8FCA47E381FFF
806C13F06C7F3818007C48131E0070130E00607F12E0A40070130EA26C5B6C5B380781E0
C6B4C7FC19287E9A1D>I<120FB4FCA2121F7EACEB07F0EB1838EB201C497E140F1380A2
1300B139FFF0FFF0A21C2A7EA921>I<121E123FA4121EC7FCA9120FB4FCA2121F7EB3A2
EAFFF0A20C297EA811>I<120FB4FCA2121F7EB3B2EAFFF0A20C2A7EA911>108
D<380F07F038FF1838EB201C381F400E000F130F1380A21300B139FFF0FFF0A21C1A7E99
21>110 D<137E3803C3C0380700E0000E1370481338003C133CA248131EA200F8131FA8
0078131EA26C133CA2001C13386C13706C13E03803C3C038007E00181A7E991D>I<380F
07E038FF1838EB601E380F800FEC0780010013C0140315E0A2EC01F0A715E01403A215C0
EC07801380EC0F00EB401CEB3078EB0FC090C8FCAAEAFFF0A21C267E9921>I<380F0F80
38FF11C0EB23E0EA1F43EA0F83EB81C0EB800090C7FCB07FEAFFFCA2131A7E9917>114
D<3807F080EA1C0DEA3003EA600112E01300A27E6C1300127EEA7FE0EA3FFC6C7EEA07FF
38003F801307388003C0A2130112C0A200E01380130300F01300EACC0EEA83F8121A7E99
17>I<7FA41201A31203A21207120F381FFF80B5FC38078000AD1440A73803C080120138
00E100133E12257FA417>I<39FFF03FF0A2390FC01F003807801C3803C0183801E0106D
5A00005BEB78C06D5A013DC7FC7F7F80A2EB13C0EB21E0EB61F01340EB80783801007C48
133C487F001F133F39FF807FF8A21D1A7F991F>120 D<39FFF01FF0A2390F8007800007
EB03001402A26C6C5AA2EBE00C00011308A26C6C5AA2EBF830EB7820A26D5AA2EB3EC0EB
1E80A26DC7FCA31306A21304A2130C1308A2EA701012F85BA2485AEA6180001FC8FC1C26
7F991F>I E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 354 42 a Fu(T)n(yp)r(e)19 b(classes:)26 b(an)20
b(exploration)d(of)j(the)e(design)h(space)454 157 y Ft(Simon)d(P)o
(eyton)f(Jones)120 213 y(Univ)o(ersit)o(y)g(of)g(Glasgo)o(w)f(and)i
(Oregon)f(Graduate)f(Institute)1451 157 y(Mark)g(Jones)1312
213 y(Univ)o(ersit)o(y)i(of)e(Nottingham)857 292 y(Erik)h(Meijer)442
349 y(Univ)o(ersit)o(y)h(of)e(Utrec)o(h)o(t)h(and)g(Oregon)h(Graduate)e
(Institute)848 458 y(Ma)o(y)h(2,)f(1997)-76 638 y Fs(Abstract)-76
746 y Fr(When)22 b(t)o(yp)q(e)f(classes)i(w)o(ere)d(\014rst)h(in)o(tro)
q(duced)j(in)d(Hask)o(ell)i(they)-76 788 y(w)o(ere)10
b(regarded)h(as)g(a)f(fairly)i(exp)q(erimen)o(tal)h(language)f
(feature,)f(and)-76 829 y(therefore)j(w)o(arran)o(ted)f(a)g(fairly)i
(conserv)n(ativ)o(e)g(design.)k(Since)14 b(that)-76 871
y(time,)d(practical)h(exp)q(erience)f(has)g(con)o(vinced)h(man)o(y)e
(programmers)-76 912 y(of)h(the)h(b)q(ene\014ts)g(and)g(con)o(v)o
(enience)h(of)e(t)o(yp)q(e)h(classes.)18 b(Ho)o(w)o(ev)o(er,)11
b(on)-76 954 y(o)q(ccasion,)h(these)d(same)h(programmers)g(ha)o(v)o(e)g
(disco)o(v)o(ered)i(examples)-76 995 y(where)d(seemingly)j(natural)e
(applicatio)q(ns)i(for)d(t)o(yp)q(e)h(class)g(o)o(v)o(erload-)-76
1037 y(ing)i(are)f(prev)o(en)o(ted)i(b)o(y)e(the)g(restrictions)i(imp)q
(osed)g(b)o(y)e(the)h(Hask)o(ell)-76 1078 y(design.)-76
1149 y(It)g(is)h(p)q(ossible)i(to)e(extend)g(the)g(t)o(yp)q(e)g(class)g
(mec)o(hanism)h(of)f(Hask)o(ell)-76 1191 y(in)f(v)n(arious)h(w)o(a)o
(ys)f(to)f(o)o(v)o(ercome)h(these)g(limitations,)i(but)e(suc)o(h)g
(pro-)-76 1232 y(p)q(osals)j(m)o(ust)e(b)q(e)g(designed)j(with)d(great)
g(care.)18 b(F)m(or)13 b(example,)h(sev-)-76 1274 y(eral)k(di\013eren)o
(t)h(extensions)g(ha)o(v)o(e)f(b)q(een)g(implemen)o(ted)i(in)e(Gofer.)
-76 1315 y(Some)13 b(of)e(these,)i(particularly)i(the)d(supp)q(ort)h
(for)f(m)o(ulti-parameter)-76 1357 y(classes,)k(ha)o(v)o(e)f(pro)o(v)o
(ed)h(to)e(b)q(e)h(v)o(ery)g(useful,)g(but)g(in)o(teractions)i(b)q(e-)
-76 1398 y(t)o(w)o(een)g(other)h(asp)q(ects)g(of)e(the)i(design)g(ha)o
(v)o(e)g(resulted)h(in)f(a)f(t)o(yp)q(e)-76 1440 y(system)9
b(that)h(is)f(b)q(oth)h(unsound)g(and)g(undecidable.)19
b(Another)9 b(illus-)-76 1481 y(tration)15 b(is)g(the)f(in)o(tro)q
(duction)j(of)d(constructor)h(classes)h(in)f(Hask)o(ell)-76
1523 y(1.3,)10 b(whic)o(h)h(came)g(without)g(the)f(prop)q(er)h
(generalizatio)q(n)i(of)d(the)g(no-)-76 1564 y(tion)h(of)e(a)h(con)o
(text.)16 b(As)10 b(a)g(consequence,)i(certain)e(quite)h(reasonable)-76
1606 y(programs)j(are)f(not)g(t)o(ypable.)-76 1677 y(In)i(this)h(pap)q
(er)g(w)o(e)f(review)g(the)h(rationale)h(b)q(ehind)g(the)e(design)h(of)
-76 1718 y(Hask)o(ell's)h(class)g(system,)f(w)o(e)g(iden)o(tify)h(some)
f(of)f(the)h(w)o(eaknesses)-76 1760 y(in)d(the)g(curren)o(t)g
(situation,)h(and)f(w)o(e)f(explain)j(the)d(c)o(hoices)i(that)f(w)o(e)
-76 1802 y(face)g(in)h(attempting)g(to)f(remo)o(v)o(e)g(them.)-76
1944 y Fs(1)53 b(In)o(tro)q(duction)-76 2052 y Fr(T)o(yp)q(e)22
b(classes)g(are)g(one)g(of)f(the)g(most)h(distinctiv)o(e)i(features)d
(of)-76 2093 y(Hask)o(ell)16 b(\(Hudak)g(et)e(al.)h([1992]\).)22
b(They)15 b(ha)o(v)o(e)g(b)q(een)g(used)g(for)g(an)-76
2135 y(impressiv)o(e)k(v)n(ariet)o(y)f(of)e(application)q(s,)k(and)d
(Hask)o(ell)h(1.3)785 2119 y Fq(1)819 2135 y Fr(signif-)-76
2176 y(ican)o(tly)j(extended)g(their)f(expressiv)o(eness)h(b)o(y)f(in)o
(tro)q(ducing)i Fp(c)n(on-)-76 2218 y(structor)12 b(classes)f
Fr(\(Jones)i([1995a]\).)-76 2289 y(All)g(programmers)g(w)o(an)o(t)g
(more)f(than)h(they)f(are)h(giv)o(en,)g(and)g(man)o(y)-76
2330 y(p)q(eople)i(ha)o(v)o(e)f(bump)q(ed)g(up)g(against)h(the)e
(limitation)q(s)j(of)d(Hask)o(ell's)-76 2372 y(class)i(system.)21
b(Another)14 b(language,)i(Gofer)e(\(Jones)g([1994]\),)g(that)-76
2413 y(has)g(dev)o(elop)q(ed)h(in)f(parallel)i(with)e(Hask)o(ell,)g
(enjo)o(ys)g(a)f(m)o(uc)o(h)h(more)-76 2455 y(lib)q(eral)19
b(and)d(expressiv)o(e)i(class)f(system.)26 b(This)17
b(expressiv)o(eness)i(is)-76 2496 y(de\014nitely)14 b(b)q(oth)e(useful)
h(and)f(used,)g(and)g(transferring)h(from)e(Gofer)p -76
2527 399 2 v -32 2551 a Fo(1)-16 2563 y Fn(The)g(curren)o(t)i
(iteration)e(of)h(the)g(Hask)o(ell)g(language)f(is)i(Hask)o(ell)f(1.4,)
g(but)-76 2596 y(it)g(is)f(iden)o(tical)i(to)d(Hask)o(ell)i(1.3)f(in)g
(all)h(resp)q(ects)f(relev)n(an)o(t)h(to)e(this)i(pap)q(er.)1020
638 y Fr(to)i(Hask)o(ell)h(can)f(b)q(e)h(a)e(painful)j(exp)q(erience.)
22 b(One)13 b(feature)h(that)h(is)1020 680 y(particularly)h(often)e
(missed)g(is)g Fp(multi-p)n(ar)n(ameter)d Fr(t)o(yp)q(e)i(classes)i(|)
1020 721 y(Section)f(2)f(explains)j(wh)o(y)m(.)1020 792
y(The)27 b(ob)o(vious)i(question)g(is)f(whether)f(there)h(is)f(an)h(up)
o(w)o(ard-)1020 834 y(compatible)20 b(w)o(a)o(y)e(to)f(extend)i(Hask)o
(ell's)g(class)g(system)f(to)g(enjo)o(y)1020 875 y(some)e(or)g(all)h
(of)f(the)g(expressiv)o(eness)i(that)f(Gofer)e(pro)o(vides,)j(and)1020
917 y(p)q(erhaps)f(some)f(more)f(b)q(esides.)26 b(The)16
b(main)g(b)q(o)q(dy)h(of)e(this)h(pap)q(er)1020 958 y(explores)g(this)e
(question)i(in)f(detail.)21 b(It)13 b(turns)i(out)f(that)g(there)g(are)
1020 1000 y(a)d(n)o(um)o(b)q(er)h(of)f(in)o(terlo)q(c)o(king)j(design)f
(decisions)g(to)e(b)q(e)g(made.)17 b(Gofer)1020 1041
y(and)i(Hask)o(ell)i(eac)o(h)e(em)o(b)q(o)q(dy)g(a)g(particular)i(set,)
e(but)g(it)h(is)f(v)o(ery)1020 1083 y(useful)e(to)g(tease)f(them)h(out)
f(indep)q(enden)o(tl)q(y)m(,)j(and)e(see)f(ho)o(w)h(they)1020
1124 y(in)o(teract.)22 b(Our)15 b(goal)g(is)g(to)f(explore)i(the)f
(design)h(space)f(as)f(clearly)1020 1166 y(as)g(p)q(ossible,)j(la)o
(ying)f(out)e(the)h(c)o(hoices)g(that)f(m)o(ust)h(b)q(e)f(made,)g(and)
1020 1207 y(the)g(factors)g(that)g(a\013ect)g(them,)g(rather)g(than)h
(prescribing)h(a)e(par-)1020 1249 y(ticular)i(solution)h(\(Section)f
(4\).)22 b(W)m(e)15 b(\014nd)h(that)e(the)h(design)h(space)1020
1290 y(is)h(rather)g(large;)i(w)o(e)d(iden)o(tify)j(nine)e(separate)h
(design)g(decisions,)1020 1332 y(eac)o(h)c(of)f(whic)o(h)h(has)f(t)o(w)
o(o)g(or)g(more)h(p)q(ossible)h(c)o(hoices,)g(though)f(not)1020
1373 y(all)e(com)o(binations)h(of)d(c)o(hoices)i(mak)o(e)f(sense.)17
b(In)10 b(the)h(end,)g(ho)o(w)o(ev)o(er,)1020 1415 y(w)o(e)j(do)g
(o\013er)h(our)f(o)o(wn)g(opinion)j(ab)q(out)e(a)f(sensible)i(set)e(of)
g(c)o(hoices)1020 1456 y(\(Section)g(6\).)1020 1527 y(A)h(new)h
(language)h(feature)f(is)g(only)h(justi\014able)h(if)d(it)h(results)h
(in)f(a)1020 1569 y(simpli\014cati)q(on)g(or)d(uni\014cation)i(of)e
(the)g(original)i(language)g(design,)1020 1610 y(or)c(if)g(the)h(extra)
f(expressiv)o(eness)j(is)d(truly)i(useful)f(in)g(practice.)17
b(One)1020 1652 y(con)o(tribution)d(of)d(this)h(pap)q(er)g(is)f(to)g
(collect)i(together)f(a)f(fairly)h(large)1020 1693 y(set)e(of)f
(examples)j(that)e(motiv)n(ate)h(v)n(arious)g(extensions)h(to)e(Hask)o
(ell's)1020 1735 y(t)o(yp)q(e)j(classes.)1020 1877 y
Fs(2)52 b(Wh)o(y)17 b(m)o(ulti-parameter)h(t)o(yp)q(e)g(classes?)1020
1985 y Fr(The)d(most)g(visible)j(extension)f(to)e(Hask)o(ell)h(t)o(yp)q
(e)g(classes)g(that)g(w)o(e)1020 2027 y(discuss)11 b(is)e(supp)q(ort)i
(for)d(m)o(ulti-parameter)j(t)o(yp)q(e)f(classes.)17
b(The)9 b(p)q(os-)1020 2068 y(sibilit)o(y)16 b(of)d(m)o(ulti-parameter)
i(t)o(yp)q(e)f(classes)g(has)f(b)q(een)h(recognised)1020
2110 y(since)d(the)f(original)i(pap)q(ers)f(on)f(the)f(sub)r(ject)i
(\(Kaes)e([1988];)i(W)m(adler)1020 2151 y(&)i(Blott)g([1989]\),)g(and)h
(Gofer)f(has)g(alw)o(a)o(ys)h(supp)q(orted)g(them.)1020
2222 y(This)i(section)g(collects)h(together)f(examples)g(of)f(m)o
(ulti-parameter)1020 2264 y(t)o(yp)q(e)i(classes)h(that)e(w)o(e)g(ha)o
(v)o(e)h(encoun)o(tered.)29 b(None)16 b(of)g(them)h(are)1020
2305 y(new,)e(none)h(will)h(b)q(e)e(surprising)j(to)d(the)h(cognescen)o
(ti,)h(and)f(man)o(y)1020 2347 y(ha)o(v)o(e)h(app)q(eared)h
Fp(inter)d(alia)g Fr(in)j(other)e(pap)q(ers.)28 b(Our)17
b(purp)q(ose)g(in)1020 2388 y(collecting)12 b(them)e(is)g(to)f(pro)o
(vide)i(a)e(shared)h(database)h(of)e(motiv)n(ating)1020
2430 y(examples.)19 b(W)m(e)13 b(w)o(ould)h(w)o(elcome)f(new)g(con)o
(tributions.)p eop
%%Page: 2 2
2 1 bop -76 -34 a Fs(2.1)52 b(Ov)o(erloading)18 b(with)g(coupled)h
(parameters)-76 61 y Fr(Concurren)o(t)13 b(Hask)o(ell)h(\(P)o(eyton)f
(Jones,)g(Gordon)g(&)g(Finne)g([1996]\))-76 102 y(in)o(tro)q(duces)23
b(a)e(n)o(um)o(b)q(er)h(of)f(t)o(yp)q(es)h(suc)o(h)f(as)h(m)o(utable)g
(v)n(ariables)-76 144 y Fm(MutVar)n Fr(,)j(\\sync)o(hronised")g(m)o
(utable)f(v)n(ariables)h Fm(MVar)o Fr(,)f(c)o(hannel)-76
185 y(v)n(ariables)17 b Fm(CVar)n Fr(,)e(comm)o(unication)i(c)o
(hannels)f Fm(Channel)n Fr(,)e(and)h(skip)-76 227 y(c)o(hannels)k
Fm(SkipChan)m Fr(,)f(all)h(of)e(whic)o(h)i(come)e(with)h(similar)i(op)q
(era-)-76 268 y(tions)14 b(that)f(tak)o(e)h(the)f(form:)3
339 y Fm(newX)18 b(::)h(a)g(->)g(IO)f(\(X)h(a\))3 381
y(getX)f(::)h(X)g(a)g(->)g(IO)g(a)3 422 y(putX)f(::)h(X)g(a)g(->)g(a)g
(->)g(IO)g(\(\))-76 493 y Fr(where)d Fm(X)f Fr(ranges)h(o)o(v)o(er)g
Fm(MVar)d Fr(etc.)25 b(Here)15 b(are)h(similar)h(op)q(erations)-76
535 y(in)d(the)f(standard)h(state)f(monad:)3 606 y Fm(newST)k(::)i(a)g
(->)g(ST)g(s)g(\(MutableVa)o(r)e(s)i(a\))3 648 y(getST)e(::)i
(MutableVar)d(s)j(a)g(->)g(ST)g(s)g(a)3 689 y(putST)e(::)i(MutableVar)d
(s)j(a)g(->)g(a)g(->)g(ST)g(s)g(\(\))-76 760 y Fr(These)11
b(are)g(manifestly)h(candidates)h(for)d(o)o(v)o(erloading;)k(y)o(et)d
(a)f(single)-76 802 y(parameter)j(t)o(yp)q(e)g(class)h(can't)e(do)h
(the)g(tric)o(k.)k(The)c(trouble)h(is)f(that)-76 843
y(in)g(eac)o(h)f(case)f(the)h(monad)h(t)o(yp)q(e)f(and)g(the)g
(reference)f(t)o(yp)q(e)h(come)g(as)-76 885 y(a)j(pair:)23
b(\()p Fm(IO)o Fr(,)15 b Fm(MutVar)n Fr(\))g(and)h(\()p
Fm(ST)j(s)o Fr(,)d Fm(MutableVa)o(r)h(s)o Fr(\).)24 b(What)16
b(w)o(e)-76 926 y(w)o(an)o(t)c(is)g(a)g(m)o(ultiple)i(parameter)f
(class)f(that)g(abstracts)h(o)o(v)o(er)f(b)q(oth:)3 997
y Fm(class)17 b(Monad)h(m)h(=>)g(VarMonad)e(m)i(v)g(where)42
1039 y(new)f(::)h(a)g(->)g(m)g(\(v)g(a\))42 1080 y(get)f(::)h(v)g(a)h
(->)e(m)i(a)42 1122 y(put)e(::)h(v)g(a)h(->)e(a)i(->)f(m)g(\(\))3
1205 y(instance)d(VarMonad)h(IO)i(MutVar)e(where)g(....)3
1246 y(instance)f(VarMonad)h(\(ST)h(s\))h(\(MutableV)o(ar)d(s\))j
(where)f(...)-76 1317 y Fr(This)d(is)g(quite)g(a)f(common)h(pattern,)f
(in)h(whic)o(h)g(a)f(t)o(w)o(o-parameter)-76 1359 y(t)o(yp)q(e)d(class)
g(is)h(needed)f(b)q(ecause)h(the)e(class)i(signature)g(is)f(really)h(o)
o(v)o(er)-76 1400 y(a)g Fp(tuple)f Fr(of)h(t)o(yp)q(es)h(and)g(where)f
(instance)i(declarations)h(capture)e(di-)-76 1442 y(rect)i(relationshi)
q(ps)j(b)q(et)o(w)o(een)e(sp)q(eci\014c)g(tuples)h(of)e(t)o(yp)q(e)h
(construc-)-76 1483 y(tors.)h(W)m(e)c(call)i(this)f Fp(overlo)n(ading)c
(with)j(c)n(ouple)n(d)f(p)n(ar)n(ameters)p Fr(.)-76 1554
y(Here)h(are)g(a)g(n)o(um)o(b)q(er)h(of)f(other)g(examples)i(w)o(e)d
(ha)o(v)o(e)i(collected:)-20 1655 y Fl(\017)19 b Fr(The)14
b(class)h Fm(StateMonad)c Fr(\(Jones)j([1995]\))g(carries)i(the)e
(state)18 1696 y(around)i(nak)o(ed,)g(instead)h(of)e(inside)j(a)d(con)o
(tainer)i(as)e(in)h(the)18 1738 y Fm(VarMonad)9 b Fr(example:)76
1823 y Fm(class)18 b(Monad)g(m)h(=>)g(StateMona)o(d)e(m)i(s)g(where)135
1865 y(getS)f(::)h(m)g(s)135 1906 y(putS)f(::)h(s)g(->)g(m)g(\(\))18
1992 y Fr(Here)11 b(the)h(monad)g Fm(m)f Fr(carries)i(along)g(a)f
(state)f(of)h(t)o(yp)q(e)g Fm(s)o Fr(;)g Fm(getS)18 2033
y Fr(extracts)d(the)g(state)f(from)h(the)g(monad,)h(and)f
Fm(putS)e Fr(o)o(v)o(erwrites)18 2075 y(the)16 b(state)g(with)g(a)g
(new)g(v)n(alue.)27 b(One)16 b(can)g(then)h(de\014ne)g(in-)18
2116 y(stances)c(of)g Fm(StateMonad)l Fr(:)76 2202 y
Fm(newtype)k(State)h(s)h(a)g(=)h(State)d(\(s)i(->)g(\(a,s\)\))76
2244 y(instance)e(StateMona)o(d)g(\(State)g(s\))i(s)g(where)f(...)18
2329 y Fr(Notice)h(the)h(coupling)i(b)q(et)o(w)o(een)e(the)f
(parameters)h(arising)18 2371 y(from)15 b(the)i(rep)q(eated)g(t)o(yp)q
(e)f(v)n(ariable)i Fm(s)p Fr(.)26 b(Jones)16 b([1995])g(also)18
2412 y(de\014nes)k(a)g(related)g(class,)i Fm(ReaderMona)o(d)m
Fr(,)f(that)e(describ)q(es)18 2454 y(computations)c(that)e(read)g(some)
h(\014xed)f(en)o(vironmen)o(t)76 2539 y Fm(class)18 b(Monad)g(m)h(=>)g
(ReaderMon)o(ad)d(m)j(e)h(where)135 2581 y(env)f(::)g(e)g(->)g(m)g(a)g
(->)g(m)g(a)135 2622 y(getenv)f(::)g(m)i(e)1172 7 y(newtype)d(Env)i(e)g
(a)g(=)g(Env)g(\(e)g(->)f(a\))1172 49 y(instance)f(ReaderMon)o(ad)f
(\(Env)i(e\))h(e)g(where)f(...)1076 135 y Fl(\017)g Fr(W)m(ork)e(in)f
(Glasgo)o(w)h(and)f(the)f(Oregon)i(Graduate)f(Institute)1113
177 y(on)c(hardw)o(are)f(description)i(languages)g(has)f(led)f(to)g
(class)h(dec-)1113 218 y(larations)16 b(similar)f(to)e(this:)1153
304 y Fm(class)k(Monad)h(ct)h(=>)g(Hard)f(ct)h(sg)f(where)1192
346 y(const)g(::)g(a)i(->)e(ct)h(\(sg)g(a\))1192 387
y(op1)f(::)h(\(a)g(->)g(b\))g(->)g(sg)f(a)i(->)e(ct)h(\(sg)g(b\))1192
429 y(op2)f(::)h(\(a)g(->)g(b)g(->)g(c\))g(->)g(sg)f(a)i(->)f(sg)f(b)i
(->)e(ct)h(\(s)g(c\))1153 512 y(instance)d(Hard)i(NetCircuit)e
(NetSignal)g(where)i(...)1153 553 y(instance)e(Hard)i(SimCircuit)e
(SimSignal)g(where)i(...)1113 640 y Fr(Here,)j(the)e(circuit)i
(constructor,)h Fm(ct)c Fr(is)i(a)f(monad,)j(while)1113
681 y(the)13 b(signal)i(constructor,)e Fm(sg)o Fr(,)f(serv)o(es)h(to)g
(distinguish)j(v)n(alues)1113 723 y(a)o(v)n(ailable)d(at)c
(circuit-construction)k(time)d(\(of)f(t)o(yp)q(e)g Fm(Int)o
Fr(,)h(sa)o(y\))1113 764 y(from)h(those)h(\015o)o(wing)h(along)f(the)g
(wires)g(at)f(circuit-execution)1113 806 y(time)16 b(\(of)f(t)o(yp)q(e)
g Fm(SimSignal)i(Int)n Fr(,)f(sa)o(y\).)23 b(Eac)o(h)16
b(instance)g(of)1113 847 y Fm(Hard)c Fr(giv)o(es)j(a)e(di\013eren)o(t)i
(in)o(terpretation)h(of)d(the)h(circuit;)g(for)1113 889
y(example,)j(one)e(migh)o(t)g(pro)q(duce)h(a)f(net)f(list,)i(while)g
(another)1113 930 y(migh)o(t)e(sim)o(ulate)h(the)e(circuit.)1113
987 y(Lik)o(e)g(the)e Fm(VarMonad)d Fr(example,)13 b(the)f(instance)h
(t)o(yp)q(e)e(come)h(as)1113 1028 y(a)i(pair;)g(it)g(w)o(ould)g(mak)o
(e)g(no)f(sense)h(to)g(giv)o(e)g(an)f(instance)i(for)1113
1070 y Fm(Hard)d(NetCircui)o(t)e(SimSignal)l Fr(.)1076
1141 y Fl(\017)1113 1125 y Fq(2)1141 1141 y Fr(The)h(Hask)o(ell)i
(prelude)f(de\014nes)g(de\014nes)g(the)g(follo)o(wing)h(t)o(w)o(o)1113
1183 y(functions)i(for)e(reading)h(and)g(writing)g(\014les)1172
1269 y Fm(readFile)j(::)i(FilePath)d(->)j(IO)g(String)1172
1311 y(writeFile)d(::)j(FilePath)e(->)i(String)e(->)i(IO)g(\(\))1113
1397 y Fr(Similar)e(functions)f(can)e(b)q(e)h(de\014ned)g(for)f(man)o
(y)h(more)f(pairs)1113 1438 y(of)h(device)h(handles)g(and)f(comm)o
(unicatable)j(t)o(yp)q(es,)d(suc)o(h)g(as)1113 1480 y(mice,)f(buttons,)
f(timers,)h(windo)o(ws,)f(rob)q(ots,)h(etc.)1153 1566
y Fm(readMouse)35 b(::)19 b(Mouse)f(->)h(IO)g(MouseEven)o(t)1153
1608 y(readButto)o(n)d(::)j(Button)f(->)g(IO)h(\(\))1153
1649 y(readTimer)35 b(::)19 b(Timer)f(->)h(IO)g(Float)1153
1732 y(sendWindo)o(w)d(::)j(Window)f(->)g(Picture)f(->)i(IO)g(\(\))1153
1774 y(sendRobot)35 b(::)19 b(Robot)f(->)h(Command)e(->)i(IO)f(\(\))
1153 1815 y(sendTimer)35 b(::)19 b(Timer)f(->)h(Float)e(->)i(IO)g(\(\))
1113 1902 y Fr(These)26 b(functions)g(are)f(quite)h(similar)h(to)e(the)
g(metho)q(ds)1113 1943 y Fm(get)19 b(::)38 b(VarMonad)17
b(r)i(m)g(=>)g(r)g(a)h(->)e(m)i(a)28 b Fr(and)h Fm(put)18
b(::)1113 1985 y(VarMonad)f(r)i(m)g(=>)g(r)g(a)h(->)f(a)g(->)g(m)g
(\(\))10 b Fr(of)i(the)f Fm(VarMonad)1113 2026 y Fr(family)m(,)h
(except)g(that)e(here)h(the)g(monad)h Fm(m)e Fr(is)h(\014xed)g(to)g
Fm(IO)e Fr(and)1113 2068 y(the)14 b(c)o(hoice)g(of)f(the)g(v)n(alue)h
(t)o(yp)q(e)g Fm(a)e Fr(is)i(coupled)h(with)e(the)h(b)q(o)o(x)1113
2109 y(t)o(yp)q(e)h Fm(v)k(a)o Fr(.)g(So)c(what)e(w)o(e)h(need)g(here)g
(is)g(a)g(m)o(ulti-parameter)1113 2151 y(class)g(that)g(o)o(v)o
(erloads)g(on)g Fm(v)19 b(a)12 b Fr(and)i Fm(a)e Fr(instead:)1153
2237 y Fm(class)17 b(IODevice)g(handle)g(a)i(where)1212
2279 y(receive)d(::)j(handle)f(->)g(IO)h(a)1212 2320
y(send)f(::)g(handle)g(->)h(a)g(->)g(IO)f(a)1113 2407
y Fr(\(P)o(erhaps)10 b(one)g(could)g(go)g(one)f(step)g(further)h(and)g
(unify)g Fm(class)1113 2448 y(IODevice)17 b(r)i(a)f Fr(and)i
Fm(class)d(Monad)h(m)h(=>)g(StateMona)o(d)e(m)1113 2490
y(r)25 b Fr(in)o(to)i(a)e(three)h(parameter)g(class)g
Fm(class)18 b(Monad)g(m)h(=>)1113 2531 y(Device)f(m)h(r)g(a)p
Fr(.\))p 1020 2563 399 2 v 1063 2587 a Fo(2)1080 2600
y Fn(This)11 b(example)h(w)o(as)f(suggested)g(b)o(y)h(Enno)f(Sc)o
(holz.)961 2747 y Fr(2)p eop
%%Page: 3 3
3 2 bop -20 -34 a Fl(\017)18 -50 y Fq(3)53 -34 y Fr(An)18
b(app)q(ealing)k(application)f(of)d(t)o(yp)q(e)h(classes)h(is)f(to)f
(de-)18 7 y(scrib)q(e)13 b(mathematical)i(structures,)e(suc)o(h)f(as)h
(groups,)g(\014elds,)18 49 y(monoids,)g(and)f(so)g(on.)17
b(But)12 b(it)g(is)h(not)f(long)h(b)q(efore)f(the)g(need)18
90 y(for)g(coupled)j(o)o(v)o(erloading)h(arises.)i(F)m(or)13
b(example:)57 177 y Fm(class)k(\(Field)h(k,)h(AdditiveG)o(ro)o(up)d
(a\))116 218 y(=>)i(VectorSpace)e(k)j(a)g(where)174 260
y(@*)g(::)g(k)g(->)g(a)g(->)g(a)174 301 y(...)18 387
y Fr(Here)12 b(the)h(op)q(erator)h(@)p Fm(*)f Fr(m)o(ultiplies)j(a)d(v)
o(ector)g(b)o(y)g(a)g(scalar.)-76 526 y Fs(2.2)52 b(Ov)o(erloading)18
b(with)f(constrained)h(parame-)43 582 y(ters)-76 677
y Fr(Libraries)12 b(that)d(implemen)o(t)i(sets,)f(bags,)h(lists,)g
(\014nite)g(maps,)f(and)g(so)-76 719 y(on,)i(all)i(use)e(similar)j
(functions)e(\()p Fm(empty)n Fr(,)f Fm(insert)n Fr(,)f
Fm(union)n Fr(,)h Fm(lookup)n Fr(,)-76 760 y(etc\).)32
b(There)18 b(is)g(no)g(commonly-agreed)i(signature)g(for)e(suc)o(h)g
(li-)-76 802 y(braries)e(that)f(usefully)i(exploits)g(the)d(class)i
(system.)23 b(One)14 b(reason)-76 843 y(for)h(this)g(is)g(that)g(m)o
(ulti-parameter)i(t)o(yp)q(e)e(classes)h(are)f(absolutely)-76
885 y(required)c(to)e(do)g(a)g(go)q(o)q(d)h(job.)15 b(Wh)o(y?)i
(Consider)10 b(this)g(\014rst)f(attempt:)-37 956 y Fm(class)18
b(Collection)e(c)j(where)3 997 y(empty)37 b(::)19 b(c)g(a)3
1039 y(insert)e(::)i(a)g(->)g(c)g(a)g(->)g(c)g(a)3 1080
y(union)37 b(::)19 b(c)g(a)g(->)g(c)g(a)h(->)e(c)i(a)3
1122 y(...etc...)-76 1193 y Fr(The)15 b(trouble)g(is)g(that)g
Fp(the)f(typ)n(e)g(variable)e Fm(a)j Fp(is)f(universal)r(ly)e(quan-)-76
1234 y(ti\014e)n(d)i Fr(in)j(the)f(signature)i(for)e
Fm(insert)n Fr(,)g Fm(union)n Fr(,)g(and)h(so)f(on.)27
b(This)-76 1276 y(means)18 b(w)o(e)f(cannot)h(use)g(equalit)o(y)i(or)d
(greater-than)h(on)g(the)g(ele-)-76 1318 y(men)o(ts,)d(so)g(w)o(e)f
(cannot)i(mak)o(e)e(sets)h(an)g(instance)h(of)f Fm(Collectio)o(n)m
Fr(,)-76 1359 y(whic)o(h)h(rather)f(defeats)g(the)f(ob)r(ject)h(of)g
(the)g(exercise.)23 b(By)15 b(far)f(the)-76 1401 y(b)q(est)g(solution)h
(is)e(to)g(use)h(a)f(t)o(w)o(o-parameter)g(t)o(yp)q(e)g(class,)h(th)o
(us:)-37 1472 y Fm(class)k(Collection)e(c)j(a)g(where)3
1513 y(empty)37 b(::)19 b(c)g(a)3 1555 y(insert)e(::)i(a)g(->)g(c)g(a)g
(->)g(c)g(a)3 1596 y(union)37 b(::)19 b(c)g(a)g(->)g(c)g(a)h(->)e(c)i
(a)3 1638 y(...etc...)-76 1705 y Fr(The)e(use)f(of)h(a)f(m)o
(ulti-parameter)i(class)g(allo)o(ws)g(us)e(to)h(mak)o(e)g(in-)-76
1742 y(stance)i(declarations)h(that)e(constrain)i(the)e(elemen)o(t)g(t)
o(yp)q(e)h Fp(on)e(a)-76 1779 y(p)n(er-instanc)n(e)10
b(b)n(asis)p Fr(:)-41 1846 y Fk(instance)15 b(Eq)i(a)g(=>)g(Collection)
d(ListSet)i(a)h(where)12 1883 y(empty)f(=)i(...)12 1921
y(insert)e(a)h(xs)g(=)g(...)12 1958 y(...etc..)-41 2033
y(instance)e(Ord)i(a)g(=>)g(Collection)d(TreeSet)h(a)i(where)12
2070 y(empty)f(=)i(...)12 2108 y(insert)e(x)h(t)g(=)h(...)12
2145 y(...etc...)-76 2216 y Fr(The)g(p)q(oin)o(t)h(is)g(that)f
(di\013eren)o(t)i(instance)f(declarations)i(can)d(con-)-76
2258 y(strain)d(the)f(elemen)o(t)h(t)o(yp)q(e,)g Fm(a)o
Fr(,)f(in)h(di\013eren)o(t)g(w)o(a)o(ys.)21 b(One)14
b(can)g(lo)q(ok)-76 2299 y(at)h(this)i(as)e(a)g(v)n(arian)o(t)i(of)e
(coupled-parameter)i(o)o(v)o(erloading)i(\(dis-)-76 2341
y(cussed)i(in)f(the)g(preceding)i(section\).)38 b(Here,)21
b(the)f(second)h(t)o(yp)q(e)-76 2382 y(in)c(the)f(pair)h(is)g
Fp(c)n(onstr)n(aine)n(d)12 b Fr(b)o(y)17 b(the)f(instance)h
(declaration)i(\(e.g.)-76 2424 y(\\)p Fm(Ord)g(a)g(=>...)n
Fr("\),)d(rather)g(than)g Fp(c)n(ompletely)e(sp)n(e)n(ci\014e)n(d)f
Fr(as)j(in)g(the)-76 2465 y(previous)d(section.)k(In)11
b(general,)h(in)g(this)g(form)e(of)h(o)o(v)o(erloading,)j(one)-76
2507 y(or)e(more)h(of)f(the)g(parameters)i(in)f(an)o(y)g(instance)g(is)
g(a)g(v)n(ariable)h(that)p -76 2537 399 2 v -32 2561
a Fo(3)-16 2573 y Fn(This)d(example)h(w)o(as)f(suggested)g(b)o(y)h
(Sergey)f(Mec)o(h)o(v)o(eliani.)1020 -34 y Fr(serv)o(es)k(as)g(a)g(ho)q
(ok,)h(either)g(for)e(one)h(of)g(the)g(other)g(argumen)o(ts,)h(or)1020
7 y(for)d(the)g(instance)h(con)o(text)g(and)g(mem)o(b)q(er)f(functions)
i(to)d(use.)1020 78 y(The)20 b Fp(p)n(ar)n(ametric)f(typ)n(e)h(classes)
e Fr(of)i(Chen,)i(Hudak)f(&)f(Odersky)1020 120 y([1992])d(also)h(deal)f
(quite)h(nicely)h(with)e(the)g(bulk-t)o(yp)q(es)i(example,)1020
161 y(but)c(their)g(assymetry)h(do)q(es)f(not)f(suit)i(the)e(examples)i
(of)e(the)h(pre-)1020 203 y(vious)f(section)g(so)f(w)o(ell.)k(A)12
b(full)i(discussion)i(of)c(the)h(design)h(c)o(hoices)1020
244 y(for)e(a)g(bulk-t)o(yp)q(es)i(library)g(is)e(con)o(tained)i(in)f
(P)o(eyton)f(Jones)h([1996].)1020 383 y Fs(2.3)52 b(T)o(yp)q(e)17
b(relations)1020 478 y Fr(One)22 b(can)h(also)g(construct)g
(applications)i(for)d(m)o(ulti-parameter)1020 519 y(classes)e(where)f
(the)g(relationshi)q(ps)j(b)q(et)o(w)o(een)d(di\013eren)o(t)i(parame-)
1020 561 y(ters)e(are)h(m)o(uc)o(h)f(lo)q(oser)i(than)f(in)g(the)f
(examples)i(that)f(w)o(e)f(ha)o(v)o(e)1020 602 y(seen)c(ab)q(o)o(v)o
(e.)22 b(After)13 b(all,)j(in)f(the)g(most)f(general)i(setting,)g(a)e
(m)o(ulti-)1020 644 y(parameter)h(t)o(yp)q(e)g(class)h
Fm(C)e Fr(could)i(b)q(e)f(used)g(to)g(represen)o(t)g(an)g(arbi-)1020
685 y(trary)e(relation)i(b)q(et)o(w)o(een)e(t)o(yp)q(es)h(where,)f(for)
f(example,)i(\()p Fj(a;)7 b(b)p Fr(\))13 b(is)g(in)1020
727 y(the)g(relation)i(if,)e(and)h(only)g(if,)f(there)g(is)h(an)f
(instance)h(for)f(\()p Fm(C)g Fj(a)g(b)p Fr(\).)1076
828 y Fl(\017)18 b Fr(One)12 b(can)f(imagine)i(de\014ning)h(an)d
(isomorphism)j(relationship)1113 869 y(b)q(et)o(w)o(een)g(t)o(yp)q(es)f
(\(Liang,)h(Hudak)g(&)e(Jones)i([1995]\):)1153 956 y
Fm(class)j(Iso)i(a)g(b)g(where)1192 997 y(iso)f(::)h(a)g(->)g(b)1192
1039 y(osi)f(::)h(b)g(->)g(a)1153 1122 y(instance)d(Iso)j(a)g(a)g
(where)f(iso)g(=)h(id)1076 1208 y Fl(\017)f Fr(One)12
b(could)g(imagine)h(o)o(v)o(erloading)h(Hask)o(ell's)f(\014eld)f
(selectors)1113 1249 y(b)o(y)i(declaring)h(a)e(class)1153
1336 y Fm(class)k(Hasf)h(a)i(b)f(where)1192 1377 y(f)g(::)g(a)g(->)g(b)
1113 1464 y Fr(for)h(an)o(y)g(\014eld)h(lab)q(el)h Fm(f)o
Fr(.)37 b(So)20 b(if)g(w)o(e)f(ha)o(v)o(e)i(the)f(data)g(t)o(yp)q(e)
1113 1505 y Fm(Foo)f(=)g(Foo{foo)e(::)i(Int})n Fr(,)d(w)o(e)f(w)o(ould)
h(get)f(a)h(class)g(decla-)1113 1547 y(ration)j Fm(class)f(Hasfoo)f(a)i
(b)h(where)d(foo)i(::)f(a)i(->)f(b)d Fr(and)1113 1588
y(an)e(instance)g(declaration)1153 1675 y Fm(instance)i(Hasfoo)h(Foo)i
(Int)f(where)1192 1716 y(foo)g(\(Foo)g(foo\))g(=)i(foo)1113
1802 y Fr(This)11 b(is)f(just)f(a)h(cut-do)o(wn)g(v)o(ersion)h(of)e
(the)h(kind)g(of)g(extensible)1113 1844 y(records)k(that)f(w)o(ere)g
(prop)q(osed)h(b)o(y)g(Jones)f(\(Jones)g([1994]\).)1020
1945 y(These)h(examples)i(are)e(\\lo)q(oser")h(than)g(the)f(earlier)i
(ones,)e(b)q(ecause)1020 1986 y(the)9 b(result)i(t)o(yp)q(es)e(of)g
(the)h(class)g(op)q(erations)h(do)f(not)f(men)o(tion)h(all)h(the)1020
2028 y(class)i(t)o(yp)q(e)g(v)n(ariables.)19 b(In)12
b(practice,)i(w)o(e)e(t)o(ypically)j(\014nd)e(that)g(suc)o(h)1020
2069 y(relations)h(are)e(to)q(o)g(general)h(for)f(the)g(t)o(yp)q(e)g
(class)h(mec)o(hanisms,)g(and)1020 2111 y(that)j(it)g(b)q(ecomes)h
(remark)n(ably)g(easy)f(to)g(write)g(programs)h(whose)1020
2152 y(o)o(v)o(erloading)f(is)d(am)o(biguous.)1020 2223
y(F)m(or)d(example,)i(what)f(is)g(the)f(t)o(yp)q(e)h(of)f
Fm(iso)18 b('a')h(==)g(iso)f('b')o Fr(?)e(The)1020 2265
y Fm(iso)f Fr(function)i(is)g(used)g(at)f(t)o(yp)q(e)g
Fm(Char)i(->)h(b)p Fr(,)d(and)h(the)f(resulting)1020
2306 y(v)n(alues)11 b(of)f Fm(iso)18 b('a')8 b Fr(and)j
Fm(iso)18 b('b')9 b Fr(are)g(compared)i(with)f Fm(\(==\))e
Fr(used)1020 2348 y(at)17 b(t)o(yp)q(e)h Fm(b)h(->)g(b)g(->)g(Bool)o
Fr(.)29 b(Ho)o(w)o(ev)o(er)17 b(this)h(in)o(termediate)i(t)o(yp)q(e)
1020 2389 y(is)d(completely)i(unconstrained)h(and)e(hence)f(the)g
(resulting)i(t)o(yp)q(e,)1020 2431 y Fm(\(Eq)g(b,)f(Iso)h(Char)f(b\))h
(=>)g(Bool)n Fr(,)10 b(is)g(am)o(biguous.)18 b(One)10
b(runs)g(in)o(to)1020 2472 y(similar)17 b(problems)e(quic)o(kly)i(when)
e(trying)g(to)g(use)f(o)o(v)o(erloading)j(of)1020 2514
y(\014eld)d(selectors.)k(W)m(e)13 b(discuss)i(am)o(biguit)o(y)g
(further)f(in)f(Section)i(3.7.)961 2747 y(3)p eop
%%Page: 4 4
4 3 bop -76 -34 a Fs(2.4)52 b(Summary)-76 61 y Fr(In)15
b(our)g(view,)g(the)g(examples)h(of)e(this)i(section)g(mak)o(e)f(a)f(v)
o(ery)h(p)q(er-)-76 102 y(suasiv)o(e)g(case)e(for)g(m)o(ulti-parameter)
i(t)o(yp)q(e)e(classes,)h(just)f(as)g Fm(Monad)-76 144
y Fr(and)19 b Fm(Functor)14 b Fr(did)19 b(for)f(constructor)g(classes.)
33 b(These)18 b(examples)-76 185 y(cry)e(out)g(for)f(Hask)o(ell-st)o
(yle)j(o)o(v)o(erloading,)h(but)d(it)g(simply)h(cannot)-76
227 y(b)q(e)c(done)h(without)g(m)o(ulti-parameter)h(classes.)-76
369 y Fs(3)53 b(Bac)o(kground)-76 477 y Fr(In)10 b(order)g(to)g
(describ)q(e)h(the)f(design)i(c)o(hoices)f(related)g(to)f(t)o(yp)q(e)g
(classes)-76 519 y(w)o(e)j(m)o(ust)g(brie\015y)h(review)g(some)f(of)g
(the)g(concepts)h(in)o(v)o(olv)o(ed.)-76 657 y Fs(3.1)52
b(Inferred)16 b(con)o(texts)-76 752 y Fr(When)e(p)q(erforming)g(t)o(yp)
q(e)f(inference)h(on)f(an)g(expression,)i(the)e(t)o(yp)q(e)-76
794 y(c)o(hec)o(k)o(er)i(will)g(infer)g(\(a\))f(a)g(monot)o(yp)q(e,)h
(and)g(\(b\))f(a)g Fp(c)n(ontext)p Fr(,)d(or)j(set)-76
835 y(of)d Fp(c)n(onstr)n(aints)p Fr(,)d(that)k(m)o(ust)f(b)q(e)h
(satis\014ed.)18 b(F)m(or)11 b(example,)i(consider)-76
877 y(the)g(expression:)-37 948 y Fm(\\xs)19 b(->)g(case)f(xs)h(of)61
989 y([])98 b(->)19 b(False)61 1031 y(\(y:ys\))f(->)h(y)g(>)g(z)g(||)g
(\(y==z)f(&&)38 b(ys==[z]\))-76 1102 y Fr(Here,)12 b(the)g(t)o(yp)q(e)g
(c)o(hec)o(k)o(er)h(will)g(infer)g(that)f(the)h(expression)h(has)e(the)
-76 1143 y(follo)o(wing)j(con)o(text)f(and)f(t)o(yp)q(e:)-53
1184 y(Con)o(text:)44 b Fl(f)p Fm(Ord)19 b(a)p Fj(;)6
b Fm(Eq)19 b(a)o Fj(;)6 b Fm(Eq)19 b([a])o Fl(g)-5 1225
y Fr(T)o(yp)q(e:)44 b Fm([a])19 b(->)g(Bool)-76 1268
y Fr(The)12 b(constrain)o(t)h Fm(Ord)19 b(a)11 b Fr(arises)h(from)g
(the)g(use)g(of)f Fm(>)g Fr(on)h(an)g(elemen)o(t)-76
1309 y(of)e(the)h(list,)h Fm(y)p Fr(;)f(the)f(constrain)o(t)j(sa)o(ys)e
(that)g(the)f(elemen)o(ts)i(of)e(the)h(list)-76 1351
y(m)o(ust)j(lie)h(in)f(class)h Fm(Ord)n Fr(.)k(Similarly)m(,)d
Fm(Eq)j(a)13 b Fr(arises)i(from)e(the)h(use)f(of)-76
1392 y Fm(==)f Fr(on)h(a)g(list)h(elemen)o(t.)k(The)13
b(constrain)o(t)h Fm(Eq)19 b([a])12 b Fr(arises)h(from)g(the)-76
1434 y(use)g(of)f Fm(==)f Fr(on)i(the)g(tail)g(of)f(the)h(list;)g(it)g
(sa)o(ys)g(that)f(lists)i(of)e(elemen)o(ts)-76 1475 y(of)h(t)o(yp)q(e)g
Fm(a)g Fr(m)o(ust)g(also)h(lie)g(in)g Fm(Eq)o Fr(.)-76
1546 y(These)e(t)o(yping)i(constrain)o(ts)g(ha)o(v)o(e)f(an)f(op)q
(erational)j(in)o(terpretation)-76 1588 y(that)c(is)h(often)f(helpful,)
i(though)f(it)f(is)h(not)f(required)i(that)e(a)g(Hask)o(ell)-76
1629 y(implemen)o(tation)18 b(use)e(this)g(particular)h(op)q(erational)
h(mo)q(del.)24 b(F)m(or)-76 1671 y(eac)o(h)14 b(constrain)o(t)h(there)e
(is)h(a)f(corresp)q(onding)j Fp(dictionary)p Fr(|)10
b(a)k(col-)-76 1712 y(lection)e(of)f(functions)h(that)f(will)h(b)q(e)f
(passed)g(to)g(the)f(o)o(v)o(erloaded)j(op-)-76 1754
y(erator)i(in)o(v)o(olv)o(ed.)24 b(In)14 b(our)h(example,)h(the)f
(dictionary)i(for)d Fm(Eq)19 b([a])-76 1795 y Fr(will)14
b(b)q(e)f(a)g(tuple)h(of)e(metho)q(ds)i(corresp)q(onding)i(to)c(the)h
(class)h Fm(Eq)o Fr(.)j(It)-76 1837 y(will)e(b)q(e)f(passed)h(to)f(the)
g(second)g(o)o(v)o(erloaded)i Fm(==)d Fr(op)q(erator,)h(whic)o(h)-76
1878 y(will)19 b(simply)g(select)f(the)f Fm(==)f Fr(metho)q(d)i(from)f
(the)g(dictionary)j(and)-76 1920 y(apply)e(it)f(to)g
Fm(ys)e Fr(and)i Fm([z])o Fr(.)27 b(Y)m(ou)17 b(can)g(think)g(of)g(a)f
(dictionary)j(as)-76 1962 y(concrete,)f(run-time)g(\\evidence")g(that)f
(the)g(constrain)o(t)h(is)g(satis-)-76 2003 y(\014ed.)-76
2141 y Fs(3.2)52 b(Con)o(text)17 b(reduction)-76 2236
y Fr(Con)o(texts)d(can)f(b)q(e)g(simpli\014ed,)j(or)d
Fp(r)n(e)n(duc)n(e)n(d)p Fr(,)d(in)k(three)f(main)h(w)o(a)o(ys:)-31
2337 y(1.)19 b Fp(Eliminating)7 b(duplic)n(ate)g(c)n(onstr)n(aints.)12
b Fr(F)m(or)d(example,)h(w)o(e)f(can)18 2379 y(reduce)k(the)g(con)o
(text)h Fl(f)p Fm(Eq)e Fj(\034)r(;)19 b Fm(Eq)12 b Fj(\034)t
Fl(g)h Fr(to)g(just)g Fl(f)p Fm(Eq)f Fj(\034)t Fl(g)p
Fr(.)-31 2450 y(2.)19 b Fp(Using)j(an)i(instanc)n(e)e(de)n(clar)n
(ation.)49 b Fr(F)m(or)25 b(example,)k(the)18 2492 y(Hask)o(ell)18
b Fm(Prelude)c Fr(con)o(tains)19 b(the)e(standard)i(instance)f(dec-)18
2533 y(laration:)57 2620 y Fm(instance)e(Eq)j(a)g(=>)g(Eq)g([a])g
(where)e(...)p 1020 -62 998 2 v 1020 662 2 724 v 1247
20 a Fj(T)5 b(V)10 b Fr(\()p Fj(P)5 b Fr(\))10 b Fl(\022)g
Fj(dom)p Fr(\()p Fj(\022)q Fr(\))1247 62 y Fm(instance)g
Fj(C)15 b Fm(=>)e Fj(P)k Fm(where)g Fj(:)7 b(:)f(:)p
1228 81 507 2 v 1376 115 a(\022)q Fr(\()p Fj(C)s Fr(\))k
Fl(`)-14 b(`)12 b Fj(\022)q Fr(\()p Fj(P)5 b Fr(\))1900
89 y(\(inst)q(\))1276 232 y Fj(T)g(V)10 b Fr(\()p Fj(P)5
b Fr(\))10 b Fl(\022)h Fj(dom)p Fr(\()p Fj(\022)q Fr(\))1276
273 y Fm(class)g Fj(C)16 b Fm(=>)c Fj(P)18 b Fm(where)f
Fj(:)6 b(:)g(:)p 1258 292 448 2 v 1376 326 a(\022)q Fr(\()p
Fj(P)f Fr(\))10 b Fl(`)-14 b(`)11 b Fj(\022)q Fr(\()p
Fj(C)s Fr(\))1871 301 y(\(sup)q(er)q(\))1426 440 y Fj(Q)g
Fl(\022)f Fj(P)p 1425 456 114 2 v 1425 489 a(P)15 b Fl(`)-14
b(`)11 b Fj(Q)1871 464 y Fr(\(mono\))1342 602 y Fj(P)16
b Fl(`)-14 b(`)11 b Fj(Q)51 b(Q)11 b Fl(`)-14 b(`)12
b Fj(R)p 1342 617 279 2 v 1425 651 a(P)k Fl(`)-14 b(`)11
b Fj(R)1877 626 y Fr(\(trans\))p 2016 662 2 724 v 1020
664 998 2 v 1264 744 a(Figure)j(1:)j(Rules)d(for)f(en)o(tailmen)o(t)
1113 867 y(This)i(instance)g(declaration)h(sp)q(eci\014es)f(ho)o(w)f(w)
o(e)f(can)h(use)g(an)1113 909 y(equalit)o(y)k(on)f(v)n(alues)g(of)e(t)o
(yp)q(e)i Fm(a)e Fr(to)h(de\014ne)h(an)f(equalit)o(y)i(on)1113
950 y(lists)13 b(of)d(t)o(yp)q(e)i Fm([a])o Fr(.)k(In)11
b(terms)g(of)f(the)h(dictionary)j(mo)q(del,)e(the)1113
992 y(instance)17 b(declaration)h(sp)q(eci\014es)f(ho)o(w)f(to)f
(construct)h(a)f(dic-)1113 1033 y(tionary)h(for)d Fm(Eq)19
b([a])13 b Fr(from)g(a)h(dictionary)j(for)c Fm(Eq)19
b(a)p Fr(.)g(Hence)1113 1075 y(w)o(e)13 b(can)g(p)q(erform)h(the)f
(follo)o(wing)i(con)o(text)e(reduction:)1197 1153 y Fl(f)p
Fm(Ord)19 b(a)o Fj(;)7 b Fm(Eq)18 b(a)p Fj(;)6 b Fm(Eq)19
b([a])o Fl(g)37 b(\000)-6 b(!)38 b(f)p Fm(Ord)18 b(a)p
Fj(;)6 b Fm(Eq)19 b(a)o Fl(g)1113 1233 y Fr(W)m(e)13
b(sa)o(y)f(that)g(a)g(constrain)o(t)i Fp(matches)c Fr(an)i(instance)i
(declara-)1113 1274 y(tion)i(if)f(there)g(is)h(a)f(substitution)i(of)e
(the)g(t)o(yp)q(e)g(v)n(ariables)i(in)1113 1316 y(the)g(instance)g
(declaration)i(head)e(that)f(mak)o(es)g(it)h(equal)g(to)1113
1357 y(the)d(constrain)o(t.)1065 1429 y(3.)k Fp(Using)10
b(a)h Fm(class)f Fp(de)n(clar)n(ation.)j Fr(F)m(or)d(example,)j(the)d
(class)i(dec-)1113 1470 y(laration)17 b(for)e Fm(Ord)f
Fr(in)i(the)f(Hask)o(ell)h Fm(Prelude)c Fr(sp)q(eci\014es)17
b(that)1113 1512 y Fm(Eq)12 b Fr(is)i(a)f(sup)q(erclass)i(of)e
Fm(Ord)o Fr(:)1153 1598 y Fm(class)k(Eq)i(a)g(=>)g(Ord)g(a)g(where)f
(...)1113 1684 y Fr(What)d(this)g(means)g(is)g(that)f(ev)o(ery)h
(instance)h(of)e Fm(Ord)e Fr(is)j(also)1113 1726 y(an)i(instance)g(of)e
Fm(Eq)o Fr(.)25 b(In)16 b(terms)g(of)f(the)h(dictionary)i(mo)q(del,)
1113 1767 y(w)o(e)f(can)h(read)g(this)g(as)g(sa)o(ying)h(that)f(eac)o
(h)g Fm(Ord)e Fr(dictionary)1113 1809 y(con)o(tains)f(an)e
Fm(Eq)e Fr(dictionary)k(as)e(a)f(sub-comp)q(onen)o(t.)19
b(So)13 b(the)1113 1850 y(constrain)o(t)f Fm(Eq)19 b(a)9
b Fr(is)h(implied)i(b)o(y)f Fm(Ord)18 b(a)p Fr(,)9 b(and)i(it)f(follo)o
(ws)h(that)1113 1892 y(w)o(e)i(can)g(p)q(erform)h(the)f(follo)o(wing)i
(con)o(text)e(reduction:)1312 1970 y Fl(f)p Fm(Ord)19
b(a)p Fj(;)6 b Fm(Eq)19 b(a)o Fl(g)38 b(\000)-7 b(!)38
b(f)p Fm(Ord)19 b(a)o Fl(g)1020 2072 y Fr(More)14 b(precisely)m(,)i(w)o
(e)e(sa)o(y)g(that)g Fj(Q)g Fp(entails)e Fj(P)5 b Fr(,)13
b(written)i Fj(Q)e Fl(`)-14 b(`)12 b Fj(P)5 b Fr(,)14
b(if)1020 2113 y(the)h(constrain)o(ts)i(in)f Fj(P)j Fr(are)c(implied)j
(b)o(y)d(those)g(in)h Fj(Q)p Fr(.)23 b(W)m(e)15 b(de\014ne)1020
2155 y(the)10 b(meaning)h(of)e(class)i(constrain)o(ts)h(more)d
(formally)i(using)h(the)d(def-)1020 2196 y(inition)18
b(of)d(the)g(en)o(tailmen)o(t)i(relation)g(de\014ned)f(in)g(Figure)g
(1.)23 b(The)1020 2238 y(\014rst)15 b(t)o(w)o(o)f(rules)i(corresp)q
(ond)g(to)f(\(2\))g(and)g(\(3\))g(ab)q(o)o(v)o(e)1814
2222 y Fq(4)1832 2238 y Fr(.)22 b(The)15 b(sub-)1020
2279 y(stitution)g Fj(\022)f Fr(maps)f(t)o(yp)q(e)g(v)n(ariables)i(to)e
(t)o(yp)q(es;)g(it)g(allo)o(ws)i(class)e(and)1020 2321
y(instance)g(declarations)h(to)e(b)q(e)g(used)g(at)f(substitution-i)q
(nstan)q(ces)j(of)1020 2362 y(their)g(t)o(yp)q(es.)j(F)m(or)c(example,)
h(from)f(the)g(declaration)1059 2433 y Fm(instance)k(Eq)i(a)g(=>)g(Eq)g
([a])f(where)g(...)p 1020 2464 399 2 v 1063 2489 a Fo(4)1080
2501 y Fn(Notice)d(that)i(in)g(\()p Fi(inst)p Fn(\),)g
Fi(C)h Fn(and)f Fi(P)k Fn(app)q(ear)16 b(in)h(the)g(same)f(order)g(on)
1020 2534 y(the)d(top)g(and)h(b)q(ottom)f(lines)h(of)f(the)g(rules,)i
(whereas)e(they)h(are)e(rev)o(ersed)i(in)1020 2567 y(\()p
Fi(super)q Fn(\).)j(This)c(suggest)f(an)g(infelicit)o(y)i(in)f(Hask)o
(ell's)g(syn)o(tax,)h(but)f(one)e(that)1020 2601 y(it)h(is)f(p)q
(erhaps)h(to)q(o)e(late)h(to)g(correct!)961 2747 y Fr(4)p
eop
%%Page: 5 5
5 4 bop -76 -34 a Fr(w)o(e)17 b(can)h(deduce)g(that)g
Fl(f)p Fm(Eq)f Fj(\034)t Fl(g)h(`)-14 b(`)19 b(f)p Fm(Eq)d([)p
Fj(\034)t Fm(])p Fl(g)p Fr(,)i(for)f(an)h(arbitrary)-76
7 y(t)o(yp)q(e)i Fj(\034)38 -9 y Fq(5)55 7 y Fr(.)35
b(The)19 b(remaining)j(rules)e(explain)h(that)f(en)o(tailmen)o(t)h(is)
-76 49 y(monotonic)15 b(and)f(transitiv)o(e)h(as)e(one)g(w)o(ould)h
(exp)q(ect.)-76 120 y(The)i(connection)i(b)q(et)o(w)o(een)e(en)o
(tailmen)o(t)i(and)f(con)o(text)f(reduction)-76 161 y(is)g(this:)23
b(to)16 b(reduce)g(the)g(con)o(text)g Fj(P)k Fr(to)c
Fj(P)567 145 y Fh(0)593 161 y Fr(it)g(is)g(necessary)h(\(but)-76
203 y(p)q(erhaps)g(not)g(su\016cien)o(t\))g(that)f Fj(P)438
187 y Fh(0)464 203 y Fl(`)-14 b(`)16 b Fj(P)5 b Fr(.)26
b(The)15 b(reason)i(that)f(en-)-76 244 y(tailmen)o(t)e(is)f(not)g
(su\016cien)o(t)h(for)e(reduction)j(concerns)e(o)o(v)o(erlapping)-76
286 y(instances:)19 b(there)14 b(migh)o(t)g(b)q(e)g(more)f(than)h(one)f
Fj(P)652 270 y Fh(0)677 286 y Fr(with)g(the)h(prop-)-76
327 y(ert)o(y)g(that)f Fj(P)117 311 y Fh(0)139 327 y
Fl(`)-14 b(`)12 b Fj(P)5 b Fr(,)13 b(so)g(whic)o(h)h(should)i(b)q(e)d
(c)o(hosen?)20 b(Ov)o(erlapping)-76 369 y(instance)15
b(declarations)g(are)e(discussed)i(in)f(Section)h(3.6)e(and)g(4.4.)-76
507 y Fs(3.3)52 b(F)l(ailure)-76 602 y Fr(Con)o(text)11
b(reduction)h Fp(fails)p Fr(,)d(and)i(a)f(t)o(yp)q(e)h(error)f(is)h
(rep)q(orted,)g(if)g(there)-76 644 y(is)19 b(no)g(instance)h
(declaration)h(that)e(can)g(matc)o(h)g(the)f(giv)o(en)i(con-)-76
685 y(strain)o(t.)h(F)m(or)14 b(example,)h(supp)q(ose)g(that)f(w)o(e)g
(are)g(trying)h(to)f(reduce)-76 727 y(the)h(constrain)o(t)i
Fm(Eq)d Fr(\()p Fm(Tree)f Fj(\034)t Fr(\),)i(and)g(there)g(is)h(no)f
(instance)h(decla-)-76 768 y(ration)e(of)f(the)g(form)-37
839 y Fm(instance)k(...)h(=>)h(Eq)g(\(Tree)f(...\))g(where)f(...)-76
910 y Fr(Then)12 b(w)o(e)e(can)i(immediately)h(rep)q(ort)f(an)f(error,)
h(ev)o(en)f(if)h Fj(\034)j Fr(con)o(tains)-76 952 y(t)o(yp)q(e)10
b(v)n(ariables)h(that)f(will)h(later)f(b)q(e)f(further)h(instan)o
(tiated,)i(b)q(ecause)-76 993 y(no)g(further)f(re\014nemen)o(t)i(of)e
Fj(\034)k Fr(can)d(p)q(ossibly)i(mak)o(e)d(it)h(matc)o(h.)17
b(This)-76 1035 y(strategy)9 b(con\015icts)i(sligh)o(tly)g(with)e
(separate)h(compilation,)i(b)q(ecause)-76 1076 y(one)h(could)i(imagine)
f(that)f(a)g(separately-compil)q(ed)j(library)e(migh)o(t)-76
1118 y(not)f(b)q(e)h(able)g(to)f(\\see")g(all)i(the)e(instance)h
(declarations)i(for)d Fm(Tree)n Fr(.)-76 1189 y(Arguably)m(,)f
(therefore,)f(rather)g(than)g(rep)q(orting)h(an)e(error)h(message,)-76
1230 y(con)o(text)f(reduction)h(should)h(b)q(e)e(deferred)g(\(see)f
(Section)i(4.3\),)f(in)g(the)-76 1272 y(hop)q(e)15 b(that)g(an)f(imp)q
(orting)j(mo)q(dule)e(will)h(ha)o(v)o(e)f(the)f(necessary)i(in-)-76
1313 y(stance)e(declaration.)22 b(Ho)o(w)o(ev)o(er,)13
b(that)h(w)o(ould)g(p)q(ostp)q(one)h(the)f(pro-)-76 1355
y(duction)k(of)d(ev)o(en)h(legitimate)i(missing-insta)q(nce)h(error)c
(messages)-76 1396 y(un)o(til)j(the)e(\\main")h(mo)q(dule)h(is)e
(compiled)i(\(when)e(no)g(further)h(in-)-76 1438 y(stance)d
(declarations)i(can)d(o)q(ccur\),)h(whic)o(h)g(is)f(quite)i(a)e
(serious)h(dis-)-76 1480 y(adv)n(an)o(tage.)24 b(F)m(urthermore,)15
b(it)g(is)g(usually)j(easy)d(to)f(arrange)i(that)-76
1521 y(the)i(mo)q(dule)g(that)g(needs)g(the)f(instance)i(declaration)h
(is)e(able)g(to)-76 1563 y(\\see")d(it.)20 b(If)13 b(this)i(is)g(so,)f
(then)g(failure)h(can)g(b)q(e)f(rep)q(orted)h(immedi-)-76
1604 y(ately)m(,)f(regardless)g(of)f(the)g(con)o(text)h(reduction)g
(strategy)m(.)-76 1742 y Fs(3.4)52 b(T)l(autological)21
b(constrain)o(ts)-76 1837 y Fr(A)10 b Fp(tautolo)n(gic)n(al)d
Fr(constrain)o(t)12 b(is)f(one)g(that)g(is)g(en)o(tailed)h(b)o(y)f(the)
g(empt)o(y)-76 1879 y(con)o(text.)40 b(F)m(or)21 b(example,)i(giv)o(en)
f(the)f(standard)h(instance)g(dec-)-76 1920 y(larations,)g
Fm(Ord)d([Int])d Fr(is)k(a)f(tautological)j(constrain)o(t,)f(b)q
(ecause)-76 1962 y(the)13 b(instance)g(declaration)i(for)d
Fm(Ord)19 b([a])o Fr(,)11 b(together)i(with)g(that)f(for)-76
2004 y Fm(Ord)19 b(Int)11 b Fr(allo)o(w)j(us)g(to)f(conclude)i(that)e
Fl(fg)e(`)-14 b(`)11 b(f)p Fm(Ord)19 b([Int])n Fl(g)p
Fr(.)-76 2075 y(A)12 b Fp(gr)n(ound)f Fr(constrain)o(t)j(is)f(one)g
(that)g(men)o(tions)h(no)e(t)o(yp)q(e)h(v)n(ariables.)-76
2116 y(It)18 b(is)h(clear)g(that)f(a)g(ground)i(constrain)o(t)f(is)g
(erroneous)h(\(that)e(is,)-76 2158 y(cannot)e(matc)o(h)g(an)o(y)f
(instance)i(declaration\),)h(or)d(is)h(tautological.)-76
2199 y(It)10 b(is)h(less)f(ob)o(vious)i(that)f(a)f(tautological)j
(constrain)o(t)f(do)q(es)e(not)h(ha)o(v)o(e)-76 2241
y(to)i(b)q(e)g(ground.)19 b(Consider)p -76 2271 399 2
v -32 2295 a Fo(5)-16 2307 y Fn(In)k(Gofer,)i(an)e(instance)g
(declaration)f Fg(instanc)q(e)c(P)e(=>)h(C)e(where)j(...)-76
2341 y Fn(brings)13 b(ab)q(out)e(the)h(axiom)g Fi(C)h
Ff(`)-11 b(`)9 b Fi(P)t Fn(,)k(b)q(ecause)f(the)g(represen)o(tation)g
(in)g(Gofer)-76 2374 y(of)h(a)f(dictionary)h(for)g Fi(C)i
Fn(con)o(tains)e(sub-dictionaries)h(for)e Fi(P)t Fn(.)21
b(In)13 b(retrosp)q(ect,)-76 2407 y(this)d(w)o(as)f(probably)i(a)e(p)q
(o)q(or)f(design)i(decision)g(b)q(ecause)f(it)h(is)g(not)f(alw)o(a)o
(ys)h(v)o(ery)-76 2440 y(in)o(tuitiv)o(e.)19 b(Moreo)o(v)o(er,)11
b(it)h(w)o(as)f(later)g(disco)o(v)o(ered)h(that)g(this)g(is)g
(incompatible)-76 2473 y(with)f(o)o(v)o(erlapping)f(instances:)15
b(while)c(either)f(one)g(is)h(acceptable)e(on)h(its)g(o)o(wn,)-76
2507 y(the)i(com)o(bination)g(results)h(in)f(an)g(unsound)h(t)o(yp)q(e)
f(system.)17 b(The)12 b(Gofer)f(t)o(yp)q(e)-76 2540 y(system)h(still)g
(su\013ers)f(from)g(this)g(problem)h(to)q(da)o(y)e(b)q(ecause)h(of)f
(concerns)h(that)-76 2573 y(remo)o(ving)e(supp)q(ort)g(for)g(either)f
(feature)h(w)o(ould)g(break)f(a)g(lot)h(of)f(existing)i(co)q(de.)1059
-34 y Fm(instance)17 b(Eq)i(a)g(=>)g(Foo)f(\(a,b\))g(where)g(...)1020
37 y Fr(and)12 b(let)g(us)f(assume)i(for)e(the)g(momen)o(t)h(that)f(o)o
(v)o(erlapping)k(instance)1020 78 y(declarations)f(are)d(prohibited)j
(\(Section)f(4.4\).)j(No)o(w)11 b(supp)q(ose)i(that)1020
120 y(the)h(con)o(text)f Fl(f)p Fm(Foo)19 b(\(Int,t\))m
Fl(g)14 b Fr(is)g(sub)r(ject)g(to)f(con)o(text)h(reduction.)1020
161 y Fp(R)n(e)n(gar)n(d)r(less)h(of)i(the)f(typ)n(e)g
Fm(t)p Fr(,)h(it)h(can)f(b)q(e)g(simpli\014ed)j(to)d
Fl(f)p Fm(Eq)i(Int)o Fl(g)1020 203 y Fr(\(using)i(the)e(instance)i
(declaration)g(ab)q(o)o(v)o(e\),)g(and)f(thence)g(to)f
Fl(fg)1020 244 y Fr(\(using)h(the)e Fm(Int)f Fr(instance)j(for)e
Fm(Eq)p Fr(\).)32 b(Ev)o(en)19 b(if)g Fm(t)f Fr(con)o(tains)i(t)o(yp)q
(e)1020 286 y(v)n(ariables,)f(the)d(constrain)o(t)i Fm(Foo)h(\(Int,t\))
13 b Fr(can)j(still)j(b)q(e)d(reduced)1020 327 y(to)d
Fl(fg)p Fr(,)g(so)g(it)g(is)h(a)f(tautological)j(constrain)o(t.)1020
398 y(Another)k(example)h(of)f(one)g(of)g(these)g(tautological)i
(constrain)o(ts)1020 440 y(that)c(con)o(tain)i(t)o(yp)q(e)f(v)n
(ariables)h(is)f(giv)o(en)h(b)o(y)e(this)h(instance)h(dec-)1020
481 y(laration:)1059 552 y Fm(instance)d(Monad)g(\(ST)i(s\))g(where)e
(...)1020 623 y Fr(This)22 b(declares)g(the)g(state)f(transformer)g(t)o
(yp)q(e,)j Fm(ST)18 b(s)p Fr(,)23 b(to)e(b)q(e)g(a)1020
665 y(monad,)14 b(regardless)g(of)f(the)g(t)o(yp)q(e)h
Fm(s)o Fr(.)1020 736 y(If,)e(on)h(the)h(other)f(hand,)h(o)o(v)o
(erlapping)i(instance)e(declarations)i Fp(ar)n(e)1020
777 y Fr(p)q(ermitted,)k(then)e(reducing)i(a)e(tautological)j
(constrain)o(t)f(in)e(this)1020 819 y(w)o(a)o(y)13 b(is)h(not)f
(legitimate,)i(as)e(w)o(e)f(discuss)j(in)f(Section)g(4.4.)1020
956 y Fs(3.5)52 b(Generalisation)1020 1051 y Fr(Supp)q(ose)17
b(that)e(the)g(example)i(in)f(Section)g(3.1)f(is)h(em)o(b)q(edded)g(in)
g(a)1020 1092 y(larger)e(expression:)1059 1163 y Fm(let)1118
1205 y(f)19 b(=)h(\\xs)e(->)h(case)f(xs)h(of)1216 1247
y([])97 b(->)19 b(False)1216 1288 y(\(y:ys\))e(->)i(y)h(>)f(z)g(||)1412
1330 y(\(y==z)f(&&)38 b(ys==[z]\))1059 1371 y(in)1059
1413 y(....)1020 1484 y Fr(Ha)o(ving)13 b(inferred)g(a)f(t)o(yp)q(e)g
(for)g(the)g(righ)o(t-hand)h(side)g(of)f Fm(f)o Fr(,)g(the)g(t)o(yp)q
(e)1020 1525 y(c)o(hec)o(k)o(er)g(m)o(ust)g Fp(gener)n(alise)c
Fr(this)k(t)o(yp)q(e)g(to)g(obtain)h(the)e(p)q(olymorphic)1020
1567 y(t)o(yp)q(e)i(for)g Fm(f)p Fr(.)k(Here)12 b(are)h(sev)o(eral)i(p)
q(ossible)g(t)o(yp)q(es)f(for)e Fm(f)p Fr(:)1059 1638
y Fm(f)20 b(::)e(\(Ord)g(a\))h(=>)g([a])g(->)f(Bool)1059
1679 y(f)i(::)e(\(Ord)g(a,)h(Eq)g(a\))g(=>)g([a])f(->)h(Bool)1059
1721 y(f)h(::)e(\(Ord)g(a,)h(Eq)g(a,)g(Eq)g([a]\))f(=>)h([a])f(->)h
(Bool)1020 1792 y Fr(Whic)o(h)14 b(of)f(these)f(t)o(yp)q(es)i(is)f
(inferred)g(dep)q(ends)h(on)f(ho)o(w)g(m)o(uc)o(h)g(con-)1020
1833 y(text)g(reduction)i(is)f(done)g(b)q(efore)f(generalisation)q(,)i
(a)f(topic)g(w)o(e)e(dis-)1020 1875 y(cuss)i(later)g(\(Section)g
(4.3\).)j(F)m(or)c(the)g(presen)o(t,)h(w)o(e)f(only)h(need)g(note)1020
1916 y(\(a\))f(that)g(there)g(is)g(a)g(c)o(hoice)h(to)f(b)q(e)g(made)g
(here,)g(and)g(\(b\))g(that)g(the)1020 1958 y(time)g(that)g(c)o(hoice)h
(is)f(crystallised)j(is)d(at)g(the)g(momen)o(t)g(of)f(general-)1020
1999 y(isation.)1020 2070 y(What)g(w)o(e)e(mean)h(b)o(y)h(\(b\))f(is)g
(that)g(it)g(mak)o(es)h(no)f(di\013erence)i(whether)1020
2112 y(con)o(text)h(reduction)h(is)f(done)h(just)e(b)q(efore)h
(generalising)j Fm(f)p Fr(,)c(or)g(just)1020 2153 y(after)g(inferring)h
(the)f(t)o(yp)q(e)g(of)g(the)g(sub-expression)i Fm(\(ys==[z]\))m
Fr(,)d(or)1020 2195 y(an)o(ywhere)i(in)h(b)q(et)o(w)o(een;)e(all)i
(that)f(matters)g(is)g(ho)o(w)f(m)o(uc)o(h)h(is)g(done)1020
2236 y(b)q(efore)f(generalisati)q(on.)1020 2373 y Fs(3.6)52
b(Ov)o(erlapping)18 b(instance)h(declarations)1020 2468
y Fr(Consider)14 b(these)g(declarations:)1059 2539 y
Fm(class)k(MyShow)f(a)i(where)1099 2581 y(myShow)e(::)i(a)g(->)g
(String)961 2747 y Fr(5)p eop
%%Page: 6 6
6 5 bop -37 -34 a Fm(instance)17 b(MyShow)g(a)i(=>)g(MyShow)f([a])g
(where)3 7 y(myShow)f(=)i(myShow1)-37 49 y(instance)e(MyShow)g([Char])h
(where)3 90 y(myShow)f(=)i(myShow2)-76 161 y Fr(Here,)c(the)g
(programmer)h(w)o(an)o(ts)f(to)g(use)h(a)f(di\013eren)o(t)i(metho)q(d)e
(for)-76 203 y Fm(myShow)8 b Fr(when)j(used)g(at)g Fm([Char])d
Fr(than)j(when)g(used)g(at)g(other)g(t)o(yp)q(es.)-76
244 y(W)m(e)j(sa)o(y)g(that)g(the)g(t)o(w)o(o)f(instance)i
(declarations)i Fp(overlap)p Fr(,)11 b(b)q(ecause)-76
286 y(there)16 b(exists)g(a)g(constrain)o(t)h(that)f(matc)o(hes)g(b)q
(oth.)25 b(F)m(or)15 b(example,)-76 327 y(the)9 b(constrain)o(t)i
Fm(MyShow)17 b([Char])7 b Fr(matc)o(hes)i(b)q(oth)h(declarations.)18
b(In)-76 369 y(general,)c(t)o(w)o(o)f(instance)h(declarations)-37
440 y Fm(instance)j(P1)i(=>)g(Q1)f(where)g(...)-37 481
y(instance)f(P2)i(=>)g(Q2)f(where)g(...)-76 552 y Fr(are)e(said)g(to)g
Fp(overlap)d Fr(if)j Fm(Q1)e Fr(and)i Fm(Q2)f Fr(are)h(uni\014able.)27
b(This)16 b(de\014ni-)-76 594 y(tion)e(is)f(equiv)n(alen)o(t)i(to)e(sa)
o(ying)h(that)f(there)g(is)g(a)g(constrain)o(t)h Fm(Q)e
Fr(that)-76 635 y(matc)o(hes)h(b)q(oth)g Fm(Q1)e Fr(and)i
Fm(Q2)o Fr(.)k(Ov)o(erlapping)e(instance)f(declarations)-76
677 y(are)f(illegal)j(in)e(Hask)o(ell,)g(but)g(p)q(ermitted)g(in)g
(Gofer.)-76 748 y(When,)i(during)g(con)o(text)g(reduction,)g(a)f
(constrain)o(t)h(matc)o(hes)g(t)o(w)o(o)-76 789 y(o)o(v)o(erlapping)h
(instance)e(declarations,)h(whic)o(h)f(should)g(b)q(e)f(c)o(hosen?)-76
831 y(W)m(e)f(will)h(discuss)h(this)e(question)i(in)e(Section)h(4.4,)e
(but)i(for)e(no)o(w)h(w)o(e)-76 872 y(address)g(the)f(question)i(of)d
(whether)i(or)f(not)g(o)o(v)o(erlapping)j(instance)-76
914 y(declarations)h(are)d(useful.)18 b(W)m(e)13 b(giv)o(e)h(t)o(w)o(o)
f(further)g(examples.)-76 1052 y Fs(3.6.1)52 b(\\Default)19
b(metho)q(ds")-76 1147 y Fr(One)f(application)j(of)c(o)o(v)o(erlapping)
j(instance)f(declarations)h(is)e(to)-76 1189 y(de\014ne)g(\\default)g
(metho)q(ds".)29 b(Hask)o(ell)19 b(has)e(the)g(follo)o(wing)i(stan-)-76
1230 y(dard)14 b(classes:)-37 1301 y Fm(class)k(Monad)g(m)h(where)3
1343 y(\(>>=\))37 b(::)19 b(m)g(a)g(->)g(\(a)g(->)g(m)g(b\))g(->)g(m)g
(b)3 1385 y(return)e(::)i(a)g(->)g(m)g(a)-37 1468 y(class)f(Functor)f
(f)i(where)3 1509 y(map)f(::)h(\(a)g(->)g(b\))f(->)h(f)h(a)f(->)g(f)g
(b)-76 1580 y Fr(No)o(w,)12 b(in)i(an)o(y)f(instance)h(of)f
Fm(Monad)n Fr(,)f(there)h(is)h(a)f(sensible)i(de\014nition)-76
1622 y(of)e Fm(map)o Fr(,)f(an)i(idea)g(w)o(e)e(could)j(express)e(lik)o
(e)i(this:)-37 1693 y Fm(instance)i(Monad)h(m)h(=>)g(Functor)e(m)i
(where)3 1734 y(map)f(f)h(m)h(=)f([f)g(x)g(|)g(x)g(<-)g(m])-76
1805 y Fr(These)13 b(instance)h(declarations)h(o)o(v)o(erlap)e(with)g
(all)h(other)f(instances)-76 1847 y(of)i Fm(Functor)m
Fr(.)23 b(\(Whether)15 b(this)h(is)g(the)f(b)q(est)g(w)o(a)o(y)g(to)g
(explain)i(that)-76 1888 y(an)f(instance)h(of)e Fm(Monad)f
Fr(has)i(a)f(natural)i(de\014nition)i(of)c Fm(map)f Fr(is)i(de-)-76
1930 y(batable.\))-76 2068 y Fs(3.6.2)52 b(Monad)18 b(transformers)-76
2163 y Fr(A)g(second)h(applicati)q(on)i(of)d(o)o(v)o(erlapping)k
(instance)e(declarations)-76 2205 y(arises)14 b(when)g(w)o(e)e(try)h
(to)g(de\014ne)h Fp(monad)f(tr)n(ansformers)p Fr(.)i(The)e(idea)-76
2246 y(is)h(giv)o(en)g(b)o(y)f(Jones)h([1995]:)18 2347
y(\\In)k(fact,)g(w)o(e)f(will)j(tak)o(e)e(a)f(more)h(forw)o
(ard-thinking)18 2389 y(approac)o(h)g(and)g(use)g(the)f(constructor)h
(class)h(mec)o(ha-)18 2430 y(nisms)11 b(to)g(de\014ne)g(di\013eren)o(t)
i(families)f(of)f(monads,)g(eac)o(h)18 2472 y(of)i(whic)o(h)h(supp)q
(orts)h(a)f(particular)i(collection)g(of)d(sim-)18 2513
y(ple)h(primitiv)o(es.)22 b(The)14 b(b)q(ene\014t)h(of)e(this)i(is)g
(that,)e(later,)18 2555 y(w)o(e)8 b(will)i(w)o(an)o(t)f(to)f(consider)j
(monads)f(that)f(are)f(sim)o(ulta-)18 2596 y(neously)13
b(instances)g(of)e(sev)o(eral)i(di\013eren)o(t)g(classes,)f(and)1113
-34 y(hence)18 b(supp)q(ort)g(a)f(com)o(bination)i(of)e(di\013eren)o(t)
h(prim-)1113 7 y(itiv)o(e)h(features.)31 b(This)18 b(same)f(approac)o
(h)i(has)f(pro)o(v)o(ed)1113 49 y(to)g(b)q(e)f(v)o(ery)h(\015exible)h
(in)f(other)g(recen)o(t)f(w)o(ork)g(\(Jones)1113 90 y([1995a];)c
(Liang,)h(Hudak)g(&)e(Jones)i([1995]\).")1020 185 y(T)m(o)i(com)o(bine)
h(the)g(features)f(of)g(monads)h(w)o(e)f(in)o(tro)q(duce)i(a)e(notion)
1020 227 y(of)i(a)f(monad)i(transformer;)h(the)e(idea)h(is)f(that)g(a)g
(monad)h(trans-)1020 268 y(former)c Fm(t)g Fr(tak)o(es)g(a)h(monad)g
Fm(m)e Fr(as)i(an)f(argumen)o(t)i(and)e(pro)q(duces)i(a)1020
310 y(new)d(monad)i Fm(\(t)i(m\))c Fr(as)g(a)h(result)g(that)g(pro)o
(vides)h(all)g(of)e(the)g(com-)1020 351 y(putational)f(features)e(of)g
Fm(m)p Fr(,)f Fp(plus)f Fr(some)i(new)g(ones)g(added)h(in)g(b)o(y)f
(the)1020 393 y(transformer)j Fm(t)o Fr(.)1059 464 y
Fm(class)k(MonadT)f(t)i(where)1099 505 y(lift)f(::)g(Monad)g(m)h(=>)g
(m)g(a)h(->)e(t)i(m)f(a)1020 576 y Fr(F)m(or)h(example,)i(the)e(state)g
(monad)h(transformer)f(that)g(can)g(add)1020 618 y(state)13
b(to)g(an)o(y)h(monad:)1079 689 y Fm(newtype)j(StateT)g(s)i(m)h(a)f(=)g
(StateT)e(\(s)i(->)g(m)g(\(a,s\)\))1079 772 y(instance)d(MonadT)i
(\(StateT)f(s\))h(where)g(...)1079 814 y(instance)e(Monad)i(m)1197
855 y(=>)g(StateMonad)e(\(StateT)h(s)i(m\))g(s)g(where)f(...)1020
926 y Fr(Critically)m(,)c(w)o(e)d(also)h(need)h(to)e(kno)o(w)h(that)f
(an)o(y)h(prop)q(erties)h(enjo)o(y)o(ed)1020 968 y(b)o(y)20
b(the)g(original)i(monad,)g(are)e(also)h(supp)q(orted)g(b)o(y)f(the)g
(trans-)1020 1009 y(formed)13 b(monad.)18 b(W)m(e)13
b(can)h(capture)f(this)h(formally)h(using:)1059 1080
y Fm(instance)i(\(MonadT)g(t,)i(StateMon)o(ad)d(m)k(s\))1177
1122 y(=>)f(StateMona)o(d)e(\(t)h(m\))h(s)g(where)1099
1163 y(update)e(f)i(=)g(lift)f(\(update)f(f\))1020 1234
y Fr(Note)j(the)h(o)o(v)o(erlap)h(with)e(the)h(previous)h(instance)g
(declaration,)1020 1276 y(whic)o(h)14 b(pla)o(ys)h(an)e(essen)o(tial)j
(role.)i(De\014ning)d(monad)f(transformers)1020 1317
y(in)j(this)f(w)o(a)o(y)g(allo)o(ws)h(us)f(to)f(build)j(up)e(comp)q
(osite)i(monads,)f(with)1020 1359 y(automatically)e(generated)e
(liftings)h(of)d(the)h(imp)q(ortan)o(t)h(op)q(erators.)1020
1400 y(F)m(or)g(example:)1079 1471 y Fm(f)19 b(::)g(\(StateMon)o(ad)d
(m)k(Int,)e(StateMona)o(d)e(m)k(Char\))1118 1513 y(=>)f(Int)f(->)h
(Char)f(->)h(m)g(\(Int,Char\))1079 1554 y(f)g(x)g(y)39
b(=)g(do)f(x')19 b(<-)g(update)e(\(const)h(x\))1353 1596
y(y')h(<-)g(update)e(\(const)h(y\))1353 1637 y(return)g(\(x',y'\))1020
1708 y Fr(Later,)10 b(w)o(e)f(migh)o(t)h(call)h(this)f(function)h(with)
f(an)g(in)o(teger)g(and)h(a)e(c)o(har-)1020 1750 y(acter)h(argumen)o(t)
g(on)g(a)g(monad)g(that)g(w)o(e'v)o(e)f(constructed)i(using)g(the)1020
1791 y(follo)o(wing:)1079 1862 y Fm(type)18 b(M)h(=)g(StateT)f(Int)g
(\(ErrorT)f(\(State)g(Char\)\))1020 1933 y Fr(Notice)25
b(that)f(the)h(argumen)o(t)g(of)f(the)g Fm(StateT)e Fr(monad)j(trans-)
1020 1975 y(former)18 b(is)h(not)f Fm(State)f(Char)g
Fr(but)h(rather)g(the)h(enric)o(hed)g(monad)1020 2016
y Fm(\(ErrorT)e(\(State)g(Char\)\))n Fr(,)f(assuming)h(that)f
Fm(ErrorT)d Fr(is)j(another)1020 2058 y(monad)f(transformer.)k(No)o(w,)
14 b(the)f(o)o(v)o(erloading)k(mec)o(hansims)f(will)1020
2100 y(automatically)j(mak)o(e)e(sure)f(that)h(the)f(\014rst)g(call)i
(to)e Fm(update)e Fr(in)j Fm(f)1020 2141 y Fr(tak)o(es)11
b(place)h(in)f(the)g(outermost)g Fm(Int)e Fr(state)i(monad,)h(while)f
(the)g(sec-)1020 2183 y(ond)k(call)h(will)g(b)q(e)e(lifted)i(up)e(from)
g(the)h(depths)g(of)f(the)h(innermost)1020 2224 y Fm(Char)c
Fr(state)i(monad.)1020 2361 y Fs(3.7)52 b(The)18 b(am)o(biguit)o(y)g
(problem)1020 2456 y Fr(As)11 b(w)o(e)g(observ)o(ed)i(earlier,)g(some)e
(programs)h(ha)o(v)o(e)g Fp(ambiguous)d Fr(t)o(yp-)1020
2498 y(ings.)17 b(The)12 b(classic)g(example)h(is)f Fm(\(show)17
b(\(read)h(s\)\))o Fr(,)11 b(where)g(di\013er-)1020 2539
y(en)o(t)h(c)o(hoices)i(for)e(the)g(in)o(termediate)i(t)o(yp)q(e)e
(\(the)h(result)g(of)f(the)g Fm(read)1020 2581 y Fr(migh)o(t)k(lead)f
(to)g(di\013eren)o(t)h(results\).)23 b(Programs)16 b(with)f(am)o
(biguous)1020 2622 y(t)o(ypings)g(are)e(therefore)g(rejected)g(b)o(y)g
(Hask)o(ell.)961 2747 y(6)p eop
%%Page: 7 7
7 6 bop -76 -34 a Fr(Preliminary)22 b(exp)q(erience,)h(ho)o(w)o(ev)o
(er,)e(is)f(that)f(m)o(ulti-parameter)-76 7 y(t)o(yp)q(e)c(classes)h
(giv)o(e)f(new)g(opp)q(ortunities)j(for)c(am)o(biguit)o(y)m(.)24
b(Is)14 b(there)-76 49 y(an)o(y)g(w)o(a)o(y)f(to)f(ha)o(v)o(e)i(m)o
(ulti-parameter)h(t)o(yp)q(e)e(classes)i(without)f(risk-)-76
90 y(ing)19 b(am)o(biguit)o(y?)35 b(Our)18 b(answ)o(er)h(here)f(is)h
(\\no".)33 b(One)18 b(approac)o(h)-76 132 y(that)12 b(has)g(b)q(een)g
(suggested)h(to)e(the)h(am)o(biguit)o(y)h(problem)g(in)g(single-)-76
173 y(parameter)j(t)o(yp)q(e)f(classes)h(is)g(to)e(insist)j(that)e(all)
h(class)g(op)q(erations)-76 215 y(tak)o(e)11 b(as)f(their)h(\014rst)f
(argumen)o(t)h(a)f(v)n(alue)i(of)e(the)g(class's)h(t)o(yp)q(e)f
(\(Oder-)-76 256 y(sky)m(,)15 b(W)m(adler)g(&)f(W)m(ehr)h([1995]\).)21
b(Though)15 b(it)f(is)h(theoretically)i(at-)-76 298 y(tractiv)o(e,)c
(there)g(are)f(to)q(o)h(man)o(y)g(useful)g(classes)h(that)e(disob)q(ey)
i(this)-76 339 y(constrain)o(t)19 b(\()p Fm(Num)o Fr(,)e(for)g
(example,)i(and)f(o)o(v)o(erloaded)h(constan)o(ts)f(in)-76
381 y(general\),)f(so)e(it)h(has)f(not)h(b)q(een)g(adopted)g(in)g
(practice.)25 b(It)14 b(is)i(also)-76 422 y(not)j(clear)g(what)f(the)h
(rule)g(w)o(ould)h(b)q(e)e(when)h(w)o(e)f(mo)o(v)o(e)h(to)f(con-)-76
464 y(structor)f(classes,)i(so)d(that)h(the)g(class's)g(\\t)o(yp)q(e")h
(v)n(ariable)g(ranges)-76 505 y(o)o(v)o(er)13 b(t)o(yp)q(e)h
(constructors.)-76 576 y(If)g(no)g(w)o(ork)n(able)h(solution)i(to)d
(the)g(am)o(biguit)o(y)i(problem)g(has)f(b)q(een)-76
618 y(found)10 b(for)f(single)i(parameter)f(classes,)h(w)o(e)e(are)h
(not)f(optimistic)j(that)-76 659 y(one)i(will)g(b)q(e)f(found)h(for)f
(m)o(ulti-parameter)i(classes.)-76 802 y Fs(4)53 b(Design)17
b(c)o(hoices)-76 910 y Fr(W)m(e)11 b(are)g(no)o(w)f(ready)i(to)e
(discuss)i(the)f(design)h(c)o(hoices)g(that)f(m)o(ust)g(b)q(e)-76
951 y(em)o(b)q(o)q(died)k(in)g(a)e(t)o(yp)q(e-class)i(system)f(of)f
(the)g(kind)i(exempli\014ed)h(b)o(y)-76 993 y(Hask)o(ell.)i(Our)11
b(goal)i(is)e(to)h(describ)q(e)g(a)g(design)h(space)e(that)h(includes)
-76 1034 y(Hask)o(ell,)g(Gofer,)f(and)g(a)f(n)o(um)o(b)q(er)i(of)e
(other)h(options)h(b)q(eside.)17 b(While)-76 1076 y(w)o(e)f(express)g
(opinions)j(ab)q(out)e(whic)o(h)f(design)i(c)o(hoices)f(w)o(e)e
(prefer,)-76 1117 y(our)f(primary)g(goal)g(is)g(to)f(giv)o(e)h(a)f
(clear)h(description)i(of)c(the)i(design)-76 1159 y(space,)f(rather)h
(than)f(to)g(prescrib)q(e)i(a)e(particular)i(solution.)-76
1297 y Fs(4.1)52 b(The)18 b(ground)f(rules)-76 1392 y
Fr(T)o(yp)q(e)h(systems)g(are)f(a)h(h)o(uge)g(design)h(space,)g(and)f
(w)o(e)f(only)i(ha)o(v)o(e)-76 1434 y(space)c(to)e(explore)i(part)f(of)
g(it)g(in)h(this)f(pap)q(er.)20 b(In)14 b(this)h(section)g(w)o(e)-76
1475 y(brie\015y)i(record)f(some)f(design)i(decisions)h(curren)o(tly)e
(em)o(b)q(o)q(died)h(in)-76 1517 y(Hask)o(ell)g(that)f(w)o(e)f(do)h
(not)g(prop)q(ose)h(to)f(meddle)h(with.)25 b(Our)16 b(\014rst)-76
1558 y(set)d(of)g(ground)h(rules)g(concern)g(the)f(larger)h(setting:)
-20 1659 y Fl(\017)19 b Fr(W)m(e)13 b(w)o(an)o(t)g(to)f(retain)j(Hask)o
(ell's)f(t)o(yp)q(e-inference)g(prop)q(ert)o(y)m(.)-20
1731 y Fl(\017)19 b Fr(W)m(e)d(w)o(an)o(t)g(t)o(yp)q(e)h(inference)g
(to)f(b)q(e)g(decidable;)k(that)d(is,)g(the)18 1772 y(compiler)d(m)o
(ust)g(not)f(fail)h(to)f(terminate.)-20 1843 y Fl(\017)19
b Fr(W)m(e)12 b(w)o(an)o(t)h(to)g(retain)g(the)g(p)q(ossibili)q(t)o(y)j
(of)c(separate)h(compila-)18 1885 y(tion.)-20 1956 y
Fl(\017)19 b Fr(W)m(e)11 b(w)o(an)o(t)f(all)i(existing)h(Hask)o(ell)g
(programs)e(to)g(remain)h(legal,)18 1998 y(and)h(to)g(ha)o(v)o(e)h(the)
f(same)g(meaning.)-20 2069 y Fl(\017)19 b Fr(W)m(e)10
b(seek)g(a)g Fp(c)n(oher)n(ent)d Fr(t)o(yp)q(e)j(system;)h(that)g(is,)f
(ev)o(ery)h(di\013eren)o(t)18 2111 y(v)n(alid)i(t)o(yping)f(deriv)n
(ation)i(for)d(a)g(program)h(leads)g(to)f(a)g(result-)18
2152 y(ing)j(program)f(that)h(has)f(the)g(same)g(dynamic)i(seman)o
(tics.)-76 2253 y(The)g(last)g(p)q(oin)o(t)g(needs)g(a)g(little)h
(explanation.)24 b(W)m(e)15 b(ha)o(v)o(e)g(already)-76
2295 y(seen)g(that)g(the)g(w)o(a)o(y)f(in)h(whic)o(h)h(con)o(text)f
(reduction)h(is)g(p)q(erformed)-76 2336 y(a\013ects)g(the)f(dynamic)i
(seman)o(tics)g(of)e(the)g(program)i Fp(via)d Fr(the)h(con-)-76
2378 y(struction)h(and)f(use)g(of)f(dictionarie)q(s)j(\(other)e(op)q
(erational)i(mo)q(dels)-76 2419 y(will)12 b(exp)q(erience)f(similar)h
(e\013ects\).)17 b(It)9 b(is)i(essen)o(tial)h(that)e(the)g(w)o(a)o(y)f
(in)-76 2461 y(whic)o(h)15 b(the)e(t)o(yping)i(deriv)n(ation)h(is)e
(constructed)h(\(there)f(is)g(usually)-76 2502 y(more)j(than)g(one)f
(for)g(a)h(giv)o(en)g(program\))g(should)i(not)d(a\013ect)h(the)-76
2544 y(meaning)e(of)d(the)i(program.)1020 -34 y(Next,)19
b(w)o(e)e(giv)o(e)i(some)f(ground)h(rules)g(ab)q(out)g(the)f(form)f(of)
h(class)1020 7 y(declarations.)i(A)12 b(class)i(declaration)i(tak)o(es)
d(the)g(form:)1081 83 y Fm(class)e Fj(P)18 b Fm(=>)12
b Fj(C)k(\013)1355 87 y Fq(1)1378 83 y Fj(:)6 b(:)g(:)g(\013)1454
87 y Fe(n)1488 83 y Fm(where)18 b({)12 b Fj(op)e Fr(::)g
Fj(Q)k Fm(=>)e Fj(\034)g Fm(;)c Fj(:)f(:)f(:)18 b Fm(})1020
158 y Fr(\(If)f(m)o(ulti-parameter)i(t)o(yp)q(e)e(classes)i(are)e
(prohibited,)k(then)d Fj(n)f Fr(=)1020 200 y(1.\))h(If)13
b Fj(S)j(\014)1183 204 y Fq(1)1206 200 y Fj(:)7 b(:)f(:)g(\014)1280
204 y Fe(m)1322 200 y Fr(is)14 b(one)g(of)f(the)h(constrain)o(ts)h(app)
q(earing)h(in)e(the)1020 241 y(con)o(text)g Fj(P)5 b
Fr(,)13 b(w)o(e)g(sa)o(y)g(that)h Fj(S)i Fr(is)e(a)f
Fp(sup)n(er)n(class)d Fr(of)j Fj(C)s Fr(.)18 b(W)m(e)c(insist)h(on)1020
283 y(the)e(follo)o(wing:)1076 381 y Fl(\017)18 b Fr(There)d(can)g(b)q
(e)h(at)e(most)h(one)g Fm(class)e Fr(declaration)k(for)e(eac)o(h)1113
422 y(class)f Fj(C)s Fr(.)1076 492 y Fl(\017)k Fr(Throughout)d(the)f
(program,)g(all)h(uses)f(of)f Fj(C)k Fr(are)c(applied)j(to)1113
533 y Fj(n)d Fr(argumen)o(ts.)1076 603 y Fl(\017)18 b
Fj(\013)1138 607 y Fq(1)1162 603 y Fj(:)6 b(:)g(:)g(\013)1238
607 y Fe(n)1272 603 y Fr(m)o(ust)13 b(b)q(e)g(distinct)i(t)o(yp)q(e)e
(v)n(ariables.)1076 673 y Fl(\017)18 b Fj(T)5 b(V)10
b Fr(\()p Fj(P)5 b Fr(\))12 b Fl(\022)f(f)p Fj(\013)1329
677 y Fq(1)1346 673 y Fj(;)6 b(:)g(:)g(:)g(;)h(\013)1457
677 y Fe(n)1477 673 y Fl(g)p Fr(.)19 b(That)14 b(is,)g
Fj(P)k Fr(m)o(ust)c(not)g(men)o(tion)1113 715 y(an)o(y)g(t)o(yp)q(e)f
(v)n(ariables)j(other)d(than)h(the)f Fj(\013)1713 719
y Fe(i)1726 715 y Fr(.)1076 785 y Fl(\017)18 b Fr(The)e(sup)q(erclass)i
(hierarc)o(h)o(y)f(de\014ned)g(b)o(y)f(the)g(set)g(of)f
Fm(class)1113 826 y Fr(declarations)d(m)o(ust)d(b)q(e)g(acyclic.)18
b(This)9 b(restriction)i(is)f(not)f(ab-)1113 868 y(solutely)14
b(necessary)m(,)f(but)f(the)g(application)q(s)i(for)e(cyclic)h(class)
1113 909 y(structures)g(are)e(limited,)j(and)e(it)g(helps)h(to)e(k)o
(eep)h(things)h(sim-)1113 951 y(ple.)1020 1049 y(Next,)j(w)o(e)f(giv)o
(e)h(rules)h(go)o(v)o(erning)h(instance)f(declarations,)h(whic)o(h)1020
1090 y(ha)o(v)o(e)c(the)f(form:)1212 1165 y Fm(instance)d
Fj(P)18 b Fm(=>)12 b Fj(C)j(\034)1536 1169 y Fq(1)1560
1165 y Fj(:)6 b(:)g(:)g(\034)1628 1169 y Fe(n)1662 1165
y Fm(where)17 b Fj(:)6 b(:)h(:)1020 1241 y Fr(W)m(e)k(call)h
Fj(P)j Fr(the)c Fp(instanc)n(e)e(c)n(ontext)p Fr(,)f
Fj(\034)1560 1245 y Fq(1)1578 1241 y Fj(;)e(:)g(:)g(:)g(;)g(\034)1680
1245 y Fe(n)1712 1241 y Fr(the)k Fp(instanc)n(e)f(typ)n(es)p
Fr(,)1020 1282 y(and)17 b Fj(C)j(\034)1162 1286 y Fq(1)1185
1282 y Fj(:)6 b(:)g(:)g(\034)1253 1286 y Fe(n)1291 1282
y Fr(the)17 b Fp(he)n(ad)d Fr(of)j(the)f(instance)i(declaration.)30
b(Lik)o(e)1020 1324 y(Hask)o(ell,)14 b(w)o(e)f(insist)h(that:)1076
1422 y Fl(\017)k Fj(T)5 b(V)10 b Fr(\()p Fj(P)5 b Fr(\))10
b Fl(\022)1283 1392 y Fd(S)1324 1422 y Fj(T)5 b(V)10
b Fr(\()p Fj(\034)1415 1426 y Fe(i)1428 1422 y Fr(\);)g(that)g(is,)h
(the)f(instance)i(con)o(text)e(m)o(ust)1113 1463 y(not)h(men)o(tion)h
(an)o(y)f(t)o(yp)q(e)f(v)n(ariables)j(that)d(are)h(not)f(men)o(tioned)
1113 1505 y(in)k(the)f(instance)i(t)o(yp)q(es.)1020 1603
y(W)m(e)i(discuss)i(the)e(design)h(c)o(hoices)h(related)f(to)e
(instance)j(declara-)1020 1644 y(tions)14 b(in)g(Sections)g(4.5)f(and)h
(4.7.)1020 1715 y(Thirdly)m(,)g(w)o(e)f(require)h(the)f(follo)o(wing)i
(rule)f(for)f(t)o(yp)q(es:)1076 1813 y Fl(\017)18 b Fr(If)g
Fj(P)23 b Fm(=>)17 b Fj(\034)23 b Fr(is)18 b(a)h(t)o(yp)q(e,)g(then)g
Fj(T)5 b(V)10 b Fr(\()p Fj(P)5 b Fr(\))19 b Fl(\022)g
Fj(T)5 b(V)10 b Fr(\()p Fj(\034)t Fr(\).)32 b(If)18 b(the)1113
1855 y(con)o(text)e Fj(P)k Fr(men)o(tions)d(an)o(y)f(t)o(yp)q(e)f(v)n
(ariables)j(not)d(used)h(in)g Fj(\034)1113 1896 y Fr(then)e(an)o(y)f
(use)h(of)e(a)h(v)n(alue)i(with)e(this)h(t)o(yp)q(e)f(is)h(certain)g
(to)f(b)q(e)1113 1938 y(am)o(biguous.)1020 2036 y(F)m(ourthly)m(,)f(w)o
(e)f(will)h(assume)g(that,)f(despite)i(separate)e(compilation)q(,)1020
2077 y(instance)g(declarations)h(are)d(globally)j(visible.)18
b(The)9 b(reason)h(for)f(this)1020 2119 y(is)j(that)f(w)o(e)g(w)o(an)o
(t)g(to)h(b)q(e)f(able)i(to)e(rep)q(ort)h(an)f(error)h(if)f(w)o(e)g
(encoun)o(ter)1020 2160 y(a)19 b(constrain)o(t)h(that)f(cannot)g(matc)o
(h)g(an)o(y)h(instance)g(declaration.)1020 2202 y(F)m(or)13
b(example,)h(consider)1059 2273 y Fm(f)20 b(x)f(=)g('c')f(+)i(x)1020
2344 y Fr(T)o(yp)q(e)12 b(inference)g(on)g Fm(f)e Fr(giv)o(es)j(rise)f
(to)f(the)h(constrain)o(t)h Fm(\(Num)18 b(Char\))n Fr(.)1020
2385 y(If)h(instance)j(declarations)h(are)d(not)g(globally)j(visible,)h
(then)d(w)o(e)1020 2427 y(w)o(ould)g(b)q(e)g(forced)f(to)g(defer)g(con)
o(text)h(reduction,)i(in)e(case)g Fm(f)f Fr(is)1020 2468
y(called)e(in)f(another)g(mo)q(dule)h(that)e(has)h(an)g(instance)h
(declaration)1020 2510 y(for)c Fm(\(Num)k(Char\))n Fr(.)h(Th)o(us)14
b(w)o(e)f(w)o(ould)i(ha)o(v)o(e)f(to)g(infer)g(the)g(follo)o(wing)1020
2551 y(t)o(yp)q(e)f(for)g Fm(f)p Fr(:)1059 2622 y Fm(f)20
b(::)e(Num)h(Char)f(=>)h(Char)f(->)h(Char)961 2747 y
Fr(7)p eop
%%Page: 8 8
8 7 bop -76 -34 a Fr(Instead,)15 b(what)f(w)o(e)g(really)i(w)o(an)o(t)e
(to)h(rep)q(ort)f(an)h(immediate)h(error)-76 7 y(when)d(t)o(yp)q(e-c)o
(hec)o(king)j Fm(f)o Fr(.)-76 78 y(So,)j(if)e(instance)i(declarations)h
(are)d(not)h(globally)i(visible,)h(man)o(y)-76 120 y(missing-instan)q
(ce)h(errors)d(w)o(ould)i(only)f(b)q(e)g(rep)q(orted)g(when)f(the)-76
161 y(main)e(mo)q(dule)g(is)g(compiled,)h(an)f(unacceptable)h(outcome.)
26 b(\(Ex-)-76 203 y(plicit)17 b(t)o(yp)q(e)e(sigatures)i(migh)o(t)e
(force)g(earlier)h(error)f(rep)q(orts,)g(ho)o(w-)-76
244 y(ev)o(er.\))22 b(Hence)15 b(our)g(ground)h(rule.)22
b(In)15 b(practice,)h(though,)g(w)o(e)e(can)-76 286 y(get)f(a)o(w)o(a)o
(y)h(with)f(something)i(a)f(little)h(w)o(eak)o(er)e(than)h(insisting)i
(that)-76 327 y(ev)o(ery)f(instance)h(declaration)g(is)f(visible)i(in)e
(ev)o(ery)f(mo)q(dule)i(|)e(for)-76 369 y(example,)i(when)e(compiling)j
(a)d(standard)h(library)h(one)f(do)q(es)g(need)-76 410
y(instance)g(declarations)g(for)e(unrelated)i(user-de\014ned)g(t)o(yp)q
(es.)-76 481 y(Lastly)m(,)j(w)o(e)f(ha)o(v)o(e)g(found)h(it)f(useful)h
(to)e(articulate)j(the)e(follo)o(wing)-76 523 y(principle:)-20
623 y Fl(\017)i Fr(Adding)13 b(an)f(instance)h(declaration)h(to)e(w)o
(ell-t)o(yp)q(ed)h(program)18 664 y(should)k(not)g(alter)f(either)h
(the)f(static)h(or)f(dynamic)i(seman-)18 706 y(tics)g(of)f(the)h
(program,)i(except)e(that)g(it)g(ma)o(y)g(giv)o(e)h(rise)f(to)18
747 y(an)e(o)o(v)o(erlapping-i)q(nstanc)q(e-decl)q(arati)q(on)j(error)d
(\(in)h(systems)18 789 y(that)c(prohibit)i(o)o(v)o(erlap\).)-76
888 y(The)c(reason)h(for)f(this)h(principle)i(is)e(to)f(supp)q(ort)i
(separate)e(compila-)-76 930 y(tion.)18 b(A)12 b(separately)h(compiled)
i(library)f(mo)q(dule)g(cannot)f(p)q(ossibly)-76 971
y(\\see")h(all)g(the)f(instance)i(declarations)g(for)e(all)h(the)f(p)q
(ossible)j(clien)o(t)-76 1013 y(mo)q(dules.)25 b(So)16
b(it)f(m)o(ust)h(b)q(e)f(the)h(case)f(that)h(these)f(extra)h(instance)
-76 1055 y(declarations)i(should)e(not)f(in\015uence)i(the)e(static)h
(or)f(dynamic)h(se-)-76 1096 y(man)o(tics)i(of)e(the)h(library)m(,)i
(except)e(if)g(they)g(con\015ict)h(with)f(the)g(in-)-76
1138 y(stance)d(declarations)h(used)f(when)f(the)g(library)i(w)o(as)e
(compiled.)-76 1276 y Fs(4.2)52 b(Decision)19 b(1:)k(the)17
b(form)g(of)h(t)o(yp)q(es)-76 1371 y Fc(Decision)12 b(1:)18
b Fp(what)12 b(limitations,)e(if)i(any,)g(ar)n(e)g(ther)n(e)g(on)g(the)
g(form)-76 1412 y(of)19 b(the)f(c)n(ontext)e(of)j(a)g(typ)n(e?)33
b Fr(In)18 b(Hask)o(ell)j(1.4,)f(t)o(yp)q(es)f(\(whether)-76
1454 y(inferred,)h(or)e(sp)q(eci\014ed)i(in)f(a)f(t)o(yp)q(e)h
(signature\))h(m)o(ust)e(b)q(e)g(of)g(the)-76 1495 y(form)e
Fj(P)k Fm(=>)15 b Fj(\034)t Fr(,)h(where)g Fj(P)k Fr(is)d(a)e
Fp(simple)h(c)n(ontext)p Fr(.)22 b(W)m(e)16 b(sa)o(y)g(that)g(a)-76
1537 y(con)o(text)f(is)h(simple)g(if)f(all)h(its)f(constrain)o(ts)i
(are)e(of)f(the)h(form)g Fj(C)i(\013)p Fr(,)-76 1578
y(where)c Fj(C)j Fr(is)e(a)f(class)h(and)f Fj(\013)g
Fr(is)g(a)g(t)o(yp)q(e)h(v)n(ariable.)-76 1649 y(This)k(design)g
(decision)h(w)o(as)d(defensible)j(for)e(Hask)o(ell)h(1.2)e(\(whic)o(h)
-76 1691 y(lac)o(k)o(ed)h(constructor)g(classes\))g(but)g(seems)f
(demonstrably)i(wrong)-76 1732 y(for)13 b(Hask)o(ell)h(1.4.)j(F)m(or)c
(example,)h(consider)h(the)e(de\014nition:)-37 1803 y
Fm(g)20 b(=)f(\\xs)f(->)h(\(map)f(not)h(xs\))f(==)h(xs)-76
1874 y Fr(The)31 b(righ)o(t)h(hand)g(side)g(of)f(the)g(de\014nition)j
(has)e(the)f(t)o(yp)q(e)-76 1916 y Fm(f)19 b(Bool)f(->)h(Bool)o
Fr(,)e(and)g(con)o(text)g Fl(f)p Fm(Functor)g(f)o Fj(;)7
b Fm(Eq)18 b(\(f)h(Bool\))n Fl(g)892 1900 y Fq(6)910
1916 y Fr(.)-76 1957 y(Because)g(of)e(the)h(second)h(constrain)o(t)g
(here,)g(this)f(cannot)h(b)q(e)f(re-)-76 1999 y(duced)i(to)f(a)g
(simple)i(con)o(text)f(b)o(y)f(the)g(rules)h(in)g(Figure)g(1,)h(and)-76
2040 y(Hask)o(ell)15 b(1.4)f(rejects)f(this)h(de\014nition)j(as)c
(ill-t)o(yp)q(ed.)21 b(In)14 b(fact,)f(if)h(w)o(e)-76
2082 y(insist)e(that)e(the)f(con)o(text)i(in)f(a)g(t)o(yp)q(e)g(m)o
(ust)g(b)q(e)g(simple,)i(the)e(function)-76 2124 y Fm(g)16
b Fr(has)g(man)o(y)g(legal)i(t)o(yp)q(es)e(\(suc)o(h)h(as)f
Fm([Bool])h(->)i(Bool)o Fr(\),)d(but)g(no)-76 2165 y
Fp(princip)n(al)p Fr(,)c(or)j(most)f(general,)i(t)o(yp)q(e.)23
b(If,)14 b(instead,)i(w)o(e)e(allo)o(w)i(non-)-76 2207
y(simple)h(con)o(texts)f(in)g(t)o(yp)q(es,)g(then)f(it)h(has)f(the)h(p)
q(erfectly)g(sensible)-76 2248 y(principal)g(t)o(yp)q(e:)-37
2319 y Fm(g)k(::)e(\(Functor)f(f,)i(Eq)g(\(f)g(Bool\)\))e(=>)i(f)g
(Bool)f(->)h(Bool)-76 2390 y Fr(In)24 b(short,)i(Hask)o(ell)e(1.4)g
(lac)o(ks)g(the)g(principal)i(t)o(yp)q(e)e(prop)q(ert)o(y)m(,)-76
2432 y(namely)c(that)e(an)o(y)h(t)o(ypable)g(expression)h(has)f(a)f
(principal)j(t)o(yp)q(e;)-76 2473 y(but)14 b(it)g(can)f(b)q(e)h
(regained)h(b)o(y)f(allo)o(wing)i(ric)o(her)e(con)o(texts)g(in)g(t)o
(yp)q(es.)-76 2515 y(This)f(is)g(not)f(just)g(a)g(theoretical)i(nicet)o
(y)f(|)f(it)h(directly)g(a\013ects)g(the)-76 2556 y(expressiv)o(eness)j
(of)c(the)i(language.)p -76 2586 399 2 v -32 2610 a Fo(6)-16
2622 y Fn(The)d(de\014nition)h(of)f(the)g(class)g Fg(Functor)j
Fn(w)o(as)d(giv)o(en)h(in)g(Section)f(3.6.1.)1020 -34
y Fr(Similar)19 b(problems)e(o)q(ccur)g(with)g(m)o(ulti-parameter)h
(classes)f(if)g(w)o(e)1020 7 y(insist)j(that)f(the)f(argumen)o(ts)h(of)
f(eac)o(h)h(constrain)o(t)h(in)f(a)g(con)o(text)1020
49 y(m)o(ust)14 b(b)q(e)h(v)n(ariables)h(|)e(a)g(natural)i
(generalization)h(of)d(the)g(single-)1020 90 y(parameter)19
b(notion)i(of)d(a)h(simple)h(con)o(text.)35 b(F)m(or)18
b(example,)k(one)1020 132 y(can)12 b(imagine)i(inferring)g(a)e(con)o
(text)h(suc)o(h)f(as)h Fl(f)p Fm(StateMona)o(d)c(IO)i
Fj(\013)p Fl(g)p Fr(,)1020 173 y(where)17 b Fj(\013)f
Fr(is)h(a)f(t)o(yp)q(e)h(v)n(ariable.)30 b(If)16 b(w)o(e)g(then)h(w)o
(an)o(t)f(to)h(generalise)1020 215 y(o)o(v)o(er)e Fj(\013)p
Fr(,)g(w)o(e)g(w)o(ould)h(obtain)h(a)e(function)i(whose)e(t)o(yp)q(e)h
(w)o(as)f(of)g(the)1020 256 y(form)d Fm(StateMonad)c(IO)k
Fj(\013)g Fm(=>)f Fj(\034)t Fr(.)17 b(If)11 b(suc)o(h)i(a)g(t)o(yp)q(e)
g(w)o(as)f(illegal)j(then,)1020 298 y(as)f(with)g(the)g(previous)h
(example,)g(w)o(e)e(w)o(ould)i(b)q(e)f(forced)g(to)f(reject)1020
339 y(the)g(program)h(ev)o(en)f(though)i(it)e(has)h(a)f(sensible)i
(principal)h(t)o(yp)q(e)d(in)1020 381 y(a)g(sligh)o(tly)j(ric)o(her)e
(system.)1020 452 y(The)h(c)o(hoices)h(for)e(the)h(allo)o(w)o(able)j
(con)o(texts)d(in)h(t)o(yp)q(es)f(seem)g(to)g(b)q(e)1020
493 y(these:)1020 594 y Fc(Choice)f(1a)h(\(Hask)o(ell\):)k
Fr(the)13 b(con)o(text)h(of)g(a)f(t)o(yp)q(e)h(m)o(ust)g(b)q(e)g(sim-)
1113 636 y(ple)g(\(with)g(some)f(extended)h(de\014nition)i(of)d
(\\simple"\).)1020 707 y Fc(Choice)h(1b)g(\(Gofer\):)19
b Fr(there)c(are)g(no)g(restrictions)i(on)e(the)g(con-)1113
749 y(text)e(of)g(a)g(t)o(yp)q(e.)1020 820 y Fc(Choice)h(1c:)k
Fr(something)d(in)e(b)q(et)o(w)o(een)g(these)g(t)o(w)o(o.)j(F)m(or)d
(example,)1113 862 y(w)o(e)i(migh)o(t)g(insist)i(that)e(the)g(con)o
(text)g(in)h(a)e(t)o(yp)q(e)i(is)f(reduced)1113 903 y(\\as)d(m)o(uc)o
(h)f(as)g(p)q(ossible".)19 b(But)11 b(then)h(a)f(legal)h(t)o(yp)q(e)f
(signature)1113 945 y(migh)o(t)16 b(b)q(ecome)f(illegal)j(if)d(w)o(e)f
(in)o(tro)q(duced)i(a)f(new)g(instance)1113 986 y(declaration)g(\(b)q
(ecause)d(then)g(the)g(t)o(yp)q(e)g(signature)h(migh)o(t)g(no)1113
1028 y(longer)i(b)q(e)e(reduced)h(as)f(m)o(uc)o(h)h(as)f(p)q
(ossible\).)1020 1196 y Fs(4.3)52 b(Decision)21 b(2:)27
b(Ho)o(w)19 b(m)o(uc)o(h)f(con)o(text)i(reduc-)1139 1252
y(tion?)1020 1347 y Fc(Decision)11 b(2:)17 b Fp(how)11
b(much)g(c)n(ontext)e(r)n(e)n(duction)h(should)f(b)n(e)i(done)f(b)n(e-)
1020 1389 y(for)n(e)k(gener)n(alisation)o(?)19 b Fr(Hask)o(ell)d(and)f
(Gofer)g(mak)o(e)g(v)o(ery)g(di\013eren)o(t)1020 1430
y(c)o(hoices)k(here.)31 b(Hask)o(ell)20 b(tak)o(es)e(an)g(eager)g
(approac)o(h)h(to)f(con)o(text)1020 1472 y(reduction,)f(doing)f(as)f(m)
o(uc)o(h)g(as)g(p)q(ossible)i(b)q(efore)e(generalisation)q(,)1020
1513 y(while)d(Gofer)e(tak)o(es)h(a)g(lazy)g(approac)o(h,)h(only)g
(using)g(con)o(text)f(reduc-)1020 1555 y(tion)j(to)f(eliminate)i
(tautological)h(constrain)o(ts.)1020 1626 y(It)9 b(turns)g(out)h(that)f
(this)h(c)o(hoice)g(has)g(a)f(whole)h(raft)f(of)g(consequences,)1020
1668 y(as)16 b(Jones)g([1994,)h(Chapter)f(7])f(discusses)j(in)f
(detail.)27 b(These)16 b(con-)1020 1709 y(sequences)j(mainly)h(concern)
e(pragmatic)h(matters,)g(suc)o(h)f(as)g(the)1020 1751
y(complexit)o(y)h(of)d(t)o(yp)q(es,)h(or)f(the)h(e\016ciency)g(of)f
(the)h(resulting)h(pro-)1020 1792 y(gram.)34 b Fp(It)18
b(is)g(highly)f(desir)n(able)g(that)g(the)h(choic)n(e)e(of)j(how)f
(much)1020 1834 y(c)n(ontext)13 b(r)n(e)n(duction)f(is)j(done)e(when)h
(should)f(not)h(a\013e)n(ct)f(the)h(me)n(an-)1020 1875
y(ing)c(of)h(the)g(pr)n(o)n(gr)n(am.)k Fr(It)10 b(is)h(bad)g(enough)h
(that)f(the)g(meaning)h(of)e(the)1020 1917 y(program)17
b(inevitably)i(dep)q(ends)f(on)e(the)g(resolution)j(of)d(o)o(v)o
(erload-)1020 1958 y(ing)i(\(Odersky)m(,)g(W)m(adler)g(&)f(W)m(ehr)g
([1995]\).)29 b(It)17 b(w)o(ould)h(b)q(e)f(m)o(uc)o(h)1020
2000 y(w)o(orse)c(if)g(the)g(program's)h(meaning)g(dep)q(ended)h(on)e
(the)g(exact)h Fp(way)1020 2041 y Fr(in)f(whic)o(h)g(the)g(o)o(v)o
(erloading)i(w)o(as)d(resolv)o(ed)h(|)g(that)f(is,)h(if)f(the)h(t)o(yp)
q(e)1020 2083 y(system)g(w)o(ere)g(incoheren)o(t)i(\(Section)f(4.1\).)
1020 2154 y(Here,)e(then,)i(are)f(the)g(issues)h(a\013ecting)h(con)o
(text)e(reduction.)1065 2255 y(1.)18 b Fp(Context)13
b(r)n(e)n(duction)f(usual)r(ly)g(le)n(ads)g(to)i(\\simpler")e(c)n
(ontexts)p Fr(,)1113 2296 y(whic)o(h)h(are)f(p)q(erhaps)g(more)g
(readily)i(understo)q(o)q(d)f(\(and)f(writ-)1113 2338
y(ten\))e(b)o(y)g(the)g(programmer.)17 b(In)10 b(our)g(earlier)h
(example,)g Fm(Ord)19 b(a)1113 2379 y Fr(is)14 b(simpler)h(than)e
Fl(f)p Fm(Ord)19 b(a)p Fj(;)6 b Fm(Eq)19 b(a)o Fj(;)6
b Fm(Eq)19 b([a])o Fl(g)p Fr(.)1113 2436 y(Occasionall)q(y)m(,)h(ho)o
(w)o(ev)o(er,)d(a)g(\\simpler")h(con)o(text)f(migh)o(t)h(b)q(e)1113
2477 y(less)c(\\natural".)19 b(Supp)q(ose)14 b(w)o(e)e(ha)o(v)o(e)h(a)f
(data)h(t)o(yp)q(e)g Fm(Set)f Fr(with)1113 2519 y(an)g(op)q(eration)i
Fm(union)n Fr(,)d(and)h(an)g Fm(Ord)e Fr(instance)j(\(Jones)f([1994,)
1113 2560 y(Section)j(7.1]\):)961 2747 y(8)p eop
%%Page: 9 9
9 8 bop 57 -34 a Fm(data)18 b(Set)g(a)i(=)f(...)57 49
y(union)e(::)i(Eq)g(a)g(=>)g(Set)g(a)g(->)g(Set)f(a)h(->)g(Set)g(a)57
132 y(instance)d(Eq)j(a)g(=>)g(Ord)g(\(Set)f(a\))h(where)e(...)18
216 y Fr(No)o(w,)12 b(consider)i(the)f(follo)o(wing)j(function)e
(de\014nition:)57 301 y Fm(f)19 b(x)g(y)g(=)h(if)f(\(x<=y\))e(then)h(y)
h(else)f(x)h(`union`)e(y)18 385 y Fr(With)d(con)o(text)f(reduction,)i
Fm(f)o Fr('s)e(t)o(yp)q(e)g(is)h(inferred)g(to)f(b)q(e)57
470 y Fm(f)19 b(::)g(Eq)g(a)g(=>)g(Set)f(a)h(->)g(Set)g(a)g(->)g(Set)f
(a)18 554 y Fr(whereas)13 b(without)h(con)o(text)f(reduction)i(w)o(e)e
(w)o(ould)h(infer)57 639 y Fm(f)19 b(::)g(Ord)f(\(Set)g(a\))h(=>)g(Set)
g(a)g(->)g(Set)f(a)h(->)g(Set)g(a)18 723 y Fr(One)13
b(can)h(argue)g(that)g(the)f(latter)h(is)g(more)g(\\natural")h(since)18
765 y(it)e(is)h(clear)g(where)g(the)f Fm(Ord)f Fr(constrain)o(t)j
(comes)e(from,)g(while)18 806 y(the)g(former)f(con)o(tains)j(a)e(sligh)
o(tly)i(surprising)h Fm(Eq)c Fr(constrain)o(t)18 848
y(that)h(results)h(from)f(the)g(unrelated)i(instance)f(declaration.)-31
919 y(2.)19 b Fp(Context)d(r)n(e)n(duction)g(often,)i(but)f(not)g
(always,)h(r)n(e)n(duc)n(es)e(the)18 960 y(numb)n(er)10
b(of)h(dictionaries)d(p)n(asse)n(d)h(to)i(functions)p
Fr(.)i(In)d(the)h(run-)18 1002 y(ning)h(example)g(of)e(Section)i(3,)f
(doing)h(con)o(text)g(reduction)g(b)q(e-)18 1043 y(fore)e
(generalisation)k(allo)o(w)o(ed)e(us)f(to)f(pass)h(one)g(dictionary)i
(to)18 1085 y Fm(f)f Fr(instead)i(of)f(three.)18 1141
y(Sometimes,)20 b(though,)g(a)d(\\simpler")j(con)o(text)f(migh)o(t)g
(ha)o(v)o(e)18 1182 y(more)h(constrain)o(ts)i(\(i.e.)39
b(more)21 b(dictionaries)i(to)d(pass)h(in)18 1224 y(a)d
(dictionary-passi)q(ng)k(implemen)o(tation\).)36 b(F)m(or)18
b(example,)18 1265 y(giv)o(en)c(the)f(instance)i(declaration:)57
1350 y Fm(instance)h(\(Eq)j(a,)g(Eq)f(b\))h(=>)g(Eq)g(\(a,b\))f(where)f
(...)18 1434 y Fr(the)10 b(constrain)o(t)i Fm(Eq)18 b(\(a,b\))8
b Fr(w)o(ould)j(reduce)g(to)f Fl(f)p Fm(Eq)19 b(a)p Fj(;)6
b Fm(Eq)19 b(b)p Fl(g)p Fr(,)18 1476 y(whic)o(h)13 b(ma)o(y)h(b)q(e)f
(\\simpler",)i(but)e(certainly)i(is)f(not)f(shorter.)-31
1546 y(3.)19 b Fp(Context)d(r)n(e)n(duction)f(eliminates)g(tautolo)n
(gic)n(a)o(l)g(c)n(onstr)n(aints.)18 1588 y Fr(F)m(or)d(example,)j
(without)e(con)o(text)h(reduction)h(the)e(function)57
1672 y Fm(double)k(=)i(\\x)g(->)g(x)g(+)g(\(x::Int\))18
1757 y Fr(w)o(ould)14 b(get)f(the)g(t)o(yp)q(e)57 1842
y Fm(double)k(::)i(Num)f(Int)h(=>)g(Int)f(->)h(Int)18
1926 y Fr(This)12 b(t)o(yp)q(e)h(means)g(that)f(a)g(dictionary)j(for)d
Fm(Num)18 b(Int)11 b Fr(will)j(b)q(e)18 1968 y(passed)i(to)f
Fm(double)m Fr(,)g(whic)o(h)h(is)g(quite)g(redundan)o(t.)25
b(It)14 b(it)i(in-)18 2009 y(v)n(ariably)h(b)q(etter)f(to)g(reduce)g
Fl(f)p Fm(Num)j(Int)o Fl(g)c Fr(to)h Fl(fg)p Fr(,)g(using)h(the)18
2051 y Fm(Int)e Fr(instance)k(of)e Fm(Num)o Fr(.)29 b(The)17
b(\\evidence")i(that)e Fm(Int)f Fr(is)i(an)18 2092 y(instance)i(of)e
Fm(Num)g Fr(tak)o(es)h(the)g(form)f(of)h(a)g(global)h(constan)o(t)18
2134 y(dictionary)c(for)f Fm(Num)j(Int)o Fr(.)j(\(This)15
b(example)h(uses)f(a)f(ground)18 2175 y(constrain)o(t,)f(but)f(the)g
(same)h(reasoning)h(applies)g(to)e(an)o(y)g(tau-)18 2217
y(tological)j(constrain)o(t.\))-31 2287 y(4.)k Fp(Delaying)10
b(c)n(ontext)g(r)n(e)n(duction)g(incr)n(e)n(ases)h(sharing)f(of)j
(dictio-)18 2329 y(naries.)i Fr(Consider)f(this)g(example:)57
2413 y Fm(let)96 2455 y(f)19 b(xs)g(y)g(=)h(xs)e(>)i([y])57
2496 y(in)57 2538 y(f)f(xs)g(y)g(&&)g(f)g(xs)g(z)18 2622
y Fr(Hask)o(ell)14 b(will)h(infer)e(the)g(t)o(yp)q(e)h(of)f
Fm(f)f Fr(to)h(b)q(e:)1153 -34 y Fm(f)19 b(::)g(Ord)f(a)h(=>)g([a])g
(->)g(a)g(->)g(Bool)1113 48 y Fr(A)13 b(dictionary)j(for)d
Fm(Ord)19 b(a)12 b Fr(will)j(b)q(e)f(passed)g(to)f Fm(f)p
Fr(,)f(whic)o(h)j(will)1113 90 y(construct)i(a)f(dictionary)i(for)d
Fm(Ord)k([a])o Fr(.)25 b(In)15 b(this)i(example,)1113
131 y(though,)12 b Fm(f)d Fr(is)h(called)h(t)o(wice,)g(at)e(the)h(same)
g(t)o(yp)q(e,)g(and)h(the)f(t)o(w)o(o)1113 173 y(calls)20
b(will)f(indep)q(enden)o(tly)i(construct)d(the)g(same)g
Fm(Ord)g([a])1113 214 y Fr(dictionary)m(.)32 b(W)m(e)18
b(could)h(obtain)f(more)g(sharing)h(\(i.e.)29 b(e\016-)1113
256 y(ciency\))14 b(b)o(y)e(p)q(ostp)q(oning)i(the)e(con)o(text)h
(reduction,)g(inferring)1113 297 y(instead)i(the)e(follo)o(wing)i(t)o
(yp)q(e)f(for)e Fm(f)p Fr(:)1153 380 y Fm(f)19 b(::)g(Ord)f([a])h(=>)f
([a])h(->)g(a)g(->)g(Bool)1113 463 y Fr(No)o(w)f Fm(f)g
Fr(is)i(passed)f(a)g(dictionary)i(for)d Fm(Ord)h([a])o
Fr(,)g(and)g(this)1113 505 y(dictionary)d(can)d(b)q(e)h(shared)g(b)q
(et)o(w)o(een)f(the)g(t)o(w)o(o)f(calls)j(of)e Fm(f)o
Fr(.)1113 560 y(Because)j(con)o(text)f(reduction)i(is)e(p)q(ostp)q
(oned)i(un)o(til)f(the)f(top)1113 602 y(lev)o(el)j(in)e(Gofer,)g(this)g
(sharing)i(can)e(encompass)h(the)e(whole)1113 643 y(program,)h(and)g
Fp(only)e(one)g(dictionary)f(for)i(e)n(ach)f(class/typ)n(e)1113
685 y(c)n(ombination)d(is)i(ever)g(c)n(onstructe)n(d)p
Fr(.)1065 755 y(5.)18 b Fp(T)m(yp)n(e)35 b(signatur)n(es)e(inter)n(act)
g(with)i(c)n(ontext)e(r)n(e)n(duction.)1113 796 y Fr(Hask)o(ell)12
b(allo)o(ws)g(us)e(to)g(sp)q(ecify)h(a)g(t)o(yp)q(e)f(signature)i(for)e
(a)g(func-)1113 838 y(tion.)17 b(Dep)q(ending)12 b(on)d(ho)o(w)h(con)o
(text)f(reduction)i(is)f(done,)g(and)1113 879 y(what)h(con)o(texts)h
(are)e(allo)o(w)o(ed)j(in)e(t)o(yp)q(e)g(signatures,)i(this)f(t)o(yp)q
(e)1113 921 y(migh)o(t)i(b)q(e)g(more)f(or)g(less)h(reduced)h(than)e
(the)h(inferred)g(t)o(yp)q(e.)1113 962 y(F)m(or)d(example,)i(if)e(full)
h(con)o(text)g(reduction)h(is)e(normally)i(done)1113
1004 y(b)q(efore)k(generalisation,)i(then)d(is)h(this)f(a)g(v)n(alid)i
(t)o(yp)q(e)e(signa-)1113 1045 y(ture?)1153 1128 y Fm(f)j(::)g(Eq)g
([a])f(=>)h(...)1113 1211 y Fr(That)c(is,)g(can)g(a)f(t)o(yp)q(e)h
(signature)h(decrease)g(the)e(amoun)o(t)h(of)1113 1252
y(con)o(text)g(reduction)g(that)f(is)h(p)q(erformed?)20
b(In)14 b(the)g(other)h(di-)1113 1294 y(rection,)d(if)e(con)o(text)h
(reduction)h(is)f Fp(not)e Fr(usually)k(done)e(at)f(gen-)1113
1335 y(eralisation)q(,)15 b(then)e(is)h(this)g(a)f(v)n(alid)i(t)o(yp)q
(e)e(signature?)1153 1418 y Fm(f)19 b(::)g(Eq)g(a)g(=>)g(...)1113
1501 y Fr(where)30 b Fm(f)p Fr('s)f(righ)o(t-hand)i(side)g(generates)f
(a)g(constrain)o(t)1113 1542 y Fm(Eq)19 b([a])o Fr(?)32
b(That)18 b(is,)h(can)g(a)f(t)o(yp)q(e)g(signature)i(increase)f(the)
1113 1584 y(amoun)o(t)14 b(of)f(con)o(text)g(reduction)i(that)e(is)h(p)
q(erformed?)1065 1654 y(6.)k Fp(Context)c(r)n(e)n(duction)e(is)i(ne)n
(c)n(essary)f(for)h(p)n(olymorphic)e(r)n(e)n(cur-)1113
1695 y(sion.)31 b Fr(One)18 b(of)f(the)h(new)g(features)g(in)h(Hask)o
(ell)h(1.4)d(is)i(the)1113 1737 y(abilit)o(y)f(to)d(de\014ne)g(a)g
(recursiv)o(e)i(function)f(in)g(whic)o(h)f(the)g(re-)1113
1778 y(cursiv)o(e)e(call)g(is)g(at)e(a)h(di\013eren)o(t)h(t)o(yp)q(e)f
(than)g(the)g(original)i(call,)1113 1820 y(a)9 b(feature)g(that)g(has)g
(pro)o(v)o(ed)h(itself)g(useful)g(in)f(the)g(e\016cien)o(t)h(en-)1113
1861 y(co)q(ding)15 b(of)e(functional)i(data)f(structures)f(\(Ok)n
(asaki)i([1996]\).)1113 1917 y(F)m(or)e(example,)i(consider)f(the)f
(follo)o(wing)j(non-uniformly)f(re-)1113 1959 y(cursiv)o(e)g(function:)
1172 2041 y Fm(f)20 b(::)e(Eq)h(a)g(=>)g(a)g(->)g(a)h(->)e(Bool)1172
2083 y(f)i(x)f(y)g(=)g(if)g(x)g(==)g(y)g(then)f(True)1368
2125 y(else)g(f)i([x])e([y])1113 2207 y Fr(It)c(is)h(not)g(p)q(ossible)
h(to)f(a)o(v)o(oid)g(all)h(run)o(time)f(dictionary)i(con-)1113
2249 y(struction)g(in)e(this)h(example,)h(b)q(ecause)f(eac)o(h)f(call)h
(to)f(recur-)1113 2290 y(siv)o(e)f Fm(f)f Fr(m)o(ust)g(use)h(a)f
(dictionary)i(of)e(higher)i(t)o(yp)q(e,)e(and)h(there)1113
2332 y(is)k(no)f(static)h(b)q(ound)g(to)f(the)g(depth)h(of)e
(recursion.)30 b(It)17 b(fol-)1113 2373 y(lo)o(ws)h(that)g(the)g
(strategy)g(of)f(defering)i(all)g(con)o(text)f(reduc-)1113
2415 y(tion)c(to)e(the)h(top)f(lev)o(el,)i(thereb)o(y)f(ensuring)h(a)f
(\014nite)g(n)o(um)o(b)q(er)1113 2456 y(of)19 b(dictionaries,)j(cannot)
e(w)o(ork.)33 b(The)18 b(t)o(yp)q(e)h(signature)i(is)1113
2498 y(necessary)15 b(for)f(the)g(t)o(yp)q(e)g(c)o(hec)o(k)o(er)h(to)e
(p)q(ermit)i(p)q(olymorphic)1113 2539 y(recursion,)j(and)f(it)f(in)g
(turn)g(forces)g(reduction)i(of)d(the)h(con-)1113 2581
y(strain)o(t)j Fm(Eq)g([a])e Fr(that)h(arises)h(from)e(the)i(recursiv)o
(e)g(call)g(to)1113 2622 y Fm(f)p Fr(.)961 2747 y(9)p
eop
%%Page: 10 10
10 9 bop -31 -34 a Fr(7.)19 b Fp(Context)13 b(r)n(e)n(duction)g(a\013e)
n(cts)g(typ)n(ability.)19 b Fr(Consider)d(the)f(fol-)18
7 y(lo)o(wing)f(\(con)o(triv)o(ed\))h(program:)57 93
y Fm(data)j(Tree)g(a)h(=)g(Nil)g(|)g(Fork)f(\(Tree)g(a\))h(\(Tree)e
(a\))57 176 y(f)i(x)g(=)g(let)g(silly)f(y)h(=)g(\(y==Nil\))174
217 y(in)39 b(x)19 b(+)g(1)18 302 y Fr(If)11 b(there)i(is)g(no)g
Fm(Eq)e Fr(instance)j(of)e Fm(Tree)o Fr(,)g(then)h(the)f(program)i(is)
18 344 y(arguably)j(erroneous,)g(since)f Fm(silly)d Fr(p)q(erforms)j
(equalit)o(y)h(at)18 385 y(t)o(yp)q(e)12 b Fm(Tree)o
Fr(.)k(But)d(if)g(con)o(text)g(reduction)h(is)f(deferred,)f
Fm(silly)18 427 y Fr(will,)i(without)g(complain)o(t,)g(b)q(e)g
(assigned)h(the)e(t)o(yp)q(e)57 512 y Fm(silly)k(::)i(Eq)g(\(Tree)f
(a\))h(=>)g(a)g(->)g(Bool)18 598 y Fr(Then,)13 b(since)i
Fm(silly)c Fr(is)j(nev)o(er)g(called,)h(no)f(other)g(t)o(yp)q(e)g
(error)18 639 y(will)h(result.)k(In)13 b(short,)h(the)g(de\014nition)i
(of)d(whic)o(h)h(programs)18 681 y(are)d(t)o(ypable)h(and)g(whic)o(h)f
(are)h(not)f(dep)q(ends)h(on)f(the)g(rules)h(for)18 722
y(con)o(text)h(reduction.)-31 793 y(8.)19 b Fp(Context)10
b(r)n(e)n(duction)g(c)n(on\015icts)g(with)i(the)g(use)f(of)h
(overlapping)18 835 y(instanc)n(es)o(.)i Fr(This)g(is)f(a)g(bigger)i
(topic,)e(and)h(w)o(e)e(defer)h(it)h(un)o(til)18 876
y(Section)g(4.4.)-76 976 y(Bearing)j(in)f(mind)h(this)f(\(amazingly)i
(large\))e(set)g(of)f(issues,)i(there)-76 1018 y(seem)c(to)g(b)q(e)g
(the)h(follo)o(wing)h(p)q(ossible)g(c)o(hoices:)-76 1118
y Fc(Choice)f(2a)h(\(Hask)o(ell,)g(eager\):)20 b Fr(reduce)i(ev)o(ery)f
(con)o(text)g(to)g(a)18 1159 y(simple)16 b(con)o(text)g(b)q(efore)f
(generalisation)q(.)26 b(Ho)o(w)o(ev)o(er,)15 b(as)g(w)o(e)18
1201 y(ha)o(v)o(e)e(seen,)h(this)g(ma)o(y)f(mean)h(that)f(some)g(p)q
(erfectly)i(reason-)18 1242 y(able)f(programs)g(are)f(rejected)g(as)g
(b)q(eing)h(ill-t)o(yp)q(ed.)-76 1313 y Fc(Choice)g(2b)g(\(lazy\):)19
b Fr(do)12 b(no)g(con)o(text)g(reduction)h(at)e(all)i(un)o(til)g(the)18
1355 y(constrain)o(ts)22 b(for)d(the)i(whole)g(program)g(are)f
(gathered)h(to-)18 1396 y(gether;)11 b(then)g(reduce)g(them.)17
b(This)11 b(is)g(satisfyingly)j(decisiv)o(e,)18 1438
y(but)f(it)g(giv)o(es)h(rise)g(to)f(prett)o(y)g(stupid)i(t)o(yp)q(es,)e
(suc)o(h)h(as:)57 1523 y Fm(\(Eq)k(a,)h(Eq)g(a,)g(Eq)g(a\))f(=>)h(a)h
(->)e(Bool)57 1565 y(\(Num)g(Int,)g(Show)g(Int\))g(=>)h(Int)f(->)h
(String)-76 1650 y Fc(Choice)14 b(2c)g(\(Gofer,)h(fairly)f(lazy\):)19
b Fr(do)9 b(con)o(text)h(reduction)g(b)q(e-)18 1692 y(fore)k
(generalisatio)q(n,)k(but)d(refrain)h(from)e(using)j(rule)f(\()p
Fj(inst)p Fr(\))18 1733 y(except)f(for)g(tautological)i(constrain)o
(ts.)25 b(If)14 b(o)o(v)o(erlapping)k(in-)18 1775 y(stances)f(are)f(p)q
(ermitted,)i(then)f(c)o(hange)g(\\tautological)q(")i(to)18
1816 y(\\ground".)29 b(A)16 b(v)n(arian)o(t)h(w)o(ould)h(b)q(e)f(to)f
(refrain)h(from)g(using)18 1858 y(\()p Fj(super)q Fr(\))c(as)g(w)o
(ell.)-76 1929 y Fc(Choice)h(2d)g(\(Gofer)h(+)g(p)q(olymorphic)e
(recursion\):)18 b Fr(lik)o(e)c(2c,)18 1970 y(but)k(with)h(the)f(added)
i(rule)f(that)f(if)g(there)h(is)g(a)f(t)o(yp)q(e)h(sig-)18
2012 y(nature,)e(the)g(inferred)g(con)o(text)g(m)o(ust)f(b)q(e)h(en)o
(tailed)h(b)o(y)f(the)18 2053 y(con)o(text)e(in)h(the)f(t)o(yp)q(e)g
(signature,)i(and)f(the)f(v)n(ariable)i(b)q(eing)18 2095
y(de\014ned)d(is)h(assigned)g(the)f(t)o(yp)q(e)g(in)g(the)g(signature)h
(through-)18 2136 y(out)d(its)h(scop)q(e.)18 b(This)13
b(is)g(enough)h(to)e(mak)o(e)h(the)g(c)o(hoice)g(com-)18
2178 y(patible)i(with)e(p)q(olymorphic)j(recursion,)e(whic)o(h)g(2c)f
(is)h(not.)-76 2249 y Fc(Choice)g(2e)h(\(relaxed\):)20
b Fr(lea)o(v)o(e)12 b(it)g(un-sp)q(eci\014ed)h(ho)o(w)e(m)o(uc)o(h)h
(con-)18 2290 y(text)i(reduction)j(is)e(done)h(b)q(efore)f
(generalisation!)25 b(That)15 b(is,)18 2332 y(if)g(the)h(actual)h(con)o
(text)f(of)g(the)f(term)h(to)f(b)q(e)h(generalised)j(is)18
2373 y Fj(P)5 b Fr(,)14 b(then)i(the)f(inferred)h(con)o(text)g(for)f
(the)g(generalised)i(term)18 2415 y(is)c Fj(P)18 b Fr(or)13
b(an)o(y)h(con)o(text)g(that)f Fj(P)18 b Fr(reduces)c(to.)j(The)c(same)
g(rule)18 2456 y(for)g(t)o(yp)q(e)i(signatures)h(m)o(ust)e(apply)i(as)e
(in)h(2d,)f(for)g(the)g(same)18 2498 y(reason.)j(T)m(o)11
b(a)o(v)o(oid)i(the)f(problem)h(of)f(item)g(7)g(w)o(e)f(can)h(require)
18 2539 y(that)k(an)h(error)g(is)g(rep)q(orted)h(as)f(so)q(on)g(as)g(a)
g(generalisation)18 2581 y(step)f(encoun)o(ters)h(a)f(constrain)o(t)i
(that)e(cannot)h(p)q(ossibly)i(b)q(e)18 2622 y(satis\014ed)14
b(\(ev)o(en)g(if)f(that)g(constrain)o(t)i(is)e(not)g(reduced\).)1020
-34 y(W)m(e)f(should)i(note)f(that)f(2b-e)h(rule)g(out)f(Choice)h(1a)f
(for)g(t)o(yp)q(e)h(signa-)1020 7 y(tures.)k(F)m(urthermore)c(\(as)g(w)
o(e)f(shall)j(see)d(in)i(Section)g(4.4\),)e(Choices)1020
49 y(2a)h(and)h(2e)f(rule)h(out)f(o)o(v)o(erlapping)j(instance)f
(declarations.)1020 120 y(The)c(in)o(ten)o(t)g(in)g(Choice)h(2e)e(is)h
(to)g(lea)o(v)o(e)g(as)g(m)o(uc)o(h)g(\015exibili)q(t)o(y)i(as)e(p)q
(os-)1020 161 y(sible)j(to)f(the)g(compiler)h(\(so)f(that)g(it)g(can)g
(mak)o(e)g(the)g(most)f(e\016cien)o(t)1020 203 y(c)o(hoice\))k(while)g
(still)h(giving)g(a)d(w)o(ell-de\014ned)j(static)f(and)f(dynamic)1020
244 y(seman)o(tics)f(for)f(the)g(language:)1076 345 y
Fl(\017)18 b Fr(So)c(far)e(as)h(the)g(static)h(seman)o(tics)g(is)g
(concerned,)g(when)f(con-)1113 387 y(text)f(reduction)i(is)f(p)q
(erformed)f(do)q(es)h(not)f(c)o(hange)h(the)f(set)g(of)1113
428 y(t)o(ypable)j(programs.)1076 500 y Fl(\017)j Fr(Concerning)f(the)e
(dynamic)h(seman)o(tics,)g(in)f(the)g(absence)g(of)1113
541 y(o)o(v)o(erlapping)21 b(instance)e(declarations,)i(a)c(giv)o(en)i
(constrain)o(t)1113 583 y(can)14 b(only)g(matc)o(h)f(a)g(unique)i
(instance)g(declaration.)1020 751 y Fs(4.4)52 b(Decision)24
b(3:)33 b(o)o(v)o(erlapping)22 b(instance)i(dec-)1139
807 y(larations)1020 902 y Fc(Decision)11 b(3:)17 b Fp(ar)n(e)11
b(instanc)n(e)e(de)n(clar)n(ations)f(with)j(overlapping)e(\(but)1020
944 y(not)k(identic)n(al\))d(instanc)n(e)h(typ)n(es)h(p)n(ermitte)n(d?)
k(\(Se)n(e)c(Se)n(ction)f(3.6.\))1020 1015 y Fr(If)i(o)o(v)o(erlapping)
k(instances)f(are)e(p)q(ermitted,)h(w)o(e)f(need)g(a)g(rule)h(that)1020
1056 y(sp)q(eci\014es)h(whic)o(h)g(instance)g(declaration)h(to)e(c)o
(ho)q(ose)g(if)g(more)g(than)1020 1098 y(one)d(matc)o(hes)g(a)g
(particular)i(constrain)o(t.)k(Gofer's)11 b(rule)i(is)f(that)g(the)1020
1139 y(declaration)j(that)d(matc)o(hes)h(most)f(closely)i(is)f(c)o
(hosen.)18 b(In)12 b(general,)1020 1181 y(there)20 b(ma)o(y)f(not)h(b)q
(e)f(a)g(unique)i(suc)o(h)f(instance)h(declaration,)i(so)1020
1223 y(further)14 b(rules)g(are)f(required)i(to)e(disam)o(biguate)j
(the)e(c)o(hoice)g(|)f(for)1020 1264 y(example,)f(Gofer)f(requires)h
(that)f(instance)h(declarations)h(ma)o(y)e(only)1020
1306 y(o)o(v)o(erlap)j(if)g(one)f(is)h(a)f(substitution)i(instance)g
(of)e(the)g(other.)1020 1377 y(Unfortunately)m(,)i(this)f(is)g(not)g
(enough.)19 b(As)14 b(w)o(e)f(men)o(tioned)i(ab)q(o)o(v)o(e,)1020
1418 y(there)h(is)h(a)e(fundamen)o(tal)j(con\015ict)f(b)q(et)o(w)o(een)
f(eager)h(\(or)e(unsp)q(eci-)1020 1460 y(\014ed\))c(con)o(text)h
(reduction)g(and)g(the)e(use)i(of)e(o)o(v)o(erlapping)k(instances.)1020
1501 y(T)m(o)f(see)g(this,)g(consider)i(the)e(de\014nition:)1059
1580 y Fm(let)1099 1622 y(f)19 b(x)g(=)g(myShow)e(\(x++x\))1059
1663 y(in)1059 1705 y(\(f)i("c",)f(f)h([True,False)o(]\))1020
1784 y Fr(where)11 b Fm(myShow)d Fr(w)o(as)j(de\014ned)h(in)f(Section)h
(3.6.)17 b(If)10 b(w)o(e)g(do)h(\(full\))h(con-)1020
1826 y(text)g(reduction)i(b)q(efore)e(generalisin)q(g)j
Fm(f)o Fr(,)d(w)o(e)g(will)h(b)q(e)f(faced)h(with)f(a)1020
1867 y(constrain)o(t)i Fm(MyShow)j([a])o Fr(,)12 b(arising)j(from)d
(the)h(use)g(of)f Fm(myShow)n Fr(.)k(Un-)1020 1909 y(der)11
b(eager)g(con)o(text)h(reduction)g(w)o(e)f(m)o(ust)g(simplify)i(it,)e
(presumably)1020 1950 y(using)h(the)f(instance)i(declaration)g(for)e
Fm(MyShow)17 b([a])o Fr(,)11 b(to)g(obtain)h(the)1020
1992 y(t)o(yp)q(e)1059 2063 y Fm(f)20 b(::)e(MyShow)g(a)h(=>)g(a)g(->)g
(String)1020 2134 y Fr(If)c(w)o(e)g(do)h(so,)g(then)g(ev)o(ery)g(call)h
(to)f Fm(f)f Fr(will)i(b)q(e)f(committed)g(to)g(the)1020
2175 y Fm(myShow1)d Fr(metho)q(d.)28 b(Ho)o(w)o(ev)o(er,)16
b(supp)q(ose)i(that)f(w)o(e)e(\014rst)i(p)q(erform)1020
2217 y(a)c(simple)h(program)g(transformation,)g(inlini)q(ng)i
Fm(f)c Fr(at)h(b)q(oth)g(its)h(call)1020 2258 y(sites,)f(to)g(obtain)i
(the)e(expression:)1059 2330 y Fm(\(myShow)k("c",)h(myShow)g([True,Fa)o
(lse)o(])f([True,Fa)o(lse)o(]\))1020 2401 y Fr(No)o(w)e(the)h(t)o(w)o
(o)f(calls)i(distinct)h(calls)f(to)e Fm(myShow)f Fr(will)j(lead)f(to)g
(the)1020 2442 y(constrain)o(ts)11 b Fm(MyShow)17 b([Char])6
b Fr(and)k Fm(MyShow)17 b([Bool])6 b Fr(resp)q(ectiv)o(ely;)1020
2484 y(the)12 b(\014rst)h(will)g(lead)g(to)f(a)h(call)g(of)f
Fm(myShow2)d Fr(while)k(second)g(will)h(lead)1020 2525
y(to)g(a)f(call)i(of)e Fm(myShow1)m Fr(.)19 b(A)13 b(simple)i(program)f
(transformation)i(has)1020 2567 y(c)o(hanged)e(the)f(b)q(eha)o(viour)j
(of)c(the)i(program!)951 2747 y(10)p eop
%%Page: 11 11
11 10 bop -76 -34 a Fr(No)o(w)13 b(consider)i(the)f(original)i(program)
e(again.)20 b(If)13 b(instead)h(w)o(e)f Fp(de-)-76 7
y(ferr)n(e)n(d)f Fr(con)o(text)i(reduction)g(w)o(e)f(w)o(ould)h(infer)f
(the)h(t)o(yp)q(e:)-37 78 y Fm(f)20 b(::)e(MyShow)g([a])g(=>)h(a)g(->)g
(String)-76 149 y Fr(No)o(w)28 b(the)h(t)o(w)o(o)f(calls)i(to)f
Fm(f)f Fr(will)i(lead)f(to)g(the)g(constrain)o(ts)-76
191 y Fm(MyShow)17 b([Char])d Fr(and)j Fm(MyShow)g([Bool])d
Fr(as)j(in)g(the)f(inlined)j(case,)-76 232 y(leading)i(to)d(calls)i(to)
e Fm(myShow2)e Fr(and)j Fm(myShow1)c Fr(resp)q(ectiv)o(ely)m(.)35
b(In)-76 274 y(short,)11 b(eager)f(con)o(text)h(reduction)h(in)f(the)f
(presence)h(of)f(o)o(v)o(erlapping)-76 315 y(instance)h(declarations)i
(can)d(lead)h(to)e(premature)i(committmen)o(t)f(to)-76
357 y(a)15 b(particular)i(instance)f(declaration,)i(and)d(consequen)o
(tial)j(loss)d(of)-76 398 y(simple)g(source-language)g(program)f
(transformations.)-76 469 y(Ov)o(erlapping)g(instances)f(are)e(also)h
(incompatible)i(with)e(the)f(reduc-)-76 511 y(tion)18
b(of)f(non-ground)i(tautological)h(constrain)o(ts.)30
b(F)m(or)17 b(example,)-76 552 y(supp)q(ose)e(w)o(e)d(ha)o(v)o(e)i(the)
f(declaration)-37 623 y Fm(instance)k(Monad)h(\(ST)g(s\))h(where)f(...)
-76 694 y Fr(and)12 b(w)o(e)f(are)h(trying)g(to)f(simplify)j(the)e(con)
o(text)f Fl(f)p Fm(Monad)f Fr(\()p Fm(ST)g Fj(\034)t
Fr(\))p Fl(g)p Fr(.)17 b(It)-76 736 y(w)o(ould)f(b)q(e)f(wrong)h(to)f
(reduce)g(it)h(to)f Fl(fg)g Fr(b)q(ecause)h(there)f(migh)o(t)h(b)q(e)
-76 777 y(an)d(o)o(v)o(erlapping)j(instance)f(declaration)-37
849 y Fm(instance)i(Monad)h(\(ST)g(Int\))g(where)g(...)-76
920 y Fr(This)27 b(inabili)q(t)o(y)i(to)e(simplify)h(non-ground)h
(tautological)g(con-)-76 961 y(strain)o(ts)c(has,)i(in)d(practice,)k
(caused)d(Gofer)e(some)i(di\016culties)-76 1003 y(when)13
b(implemen)o(ting)j(lazy)e(state)f(threads)h(\(Launc)o(h)o(bury)h(&)d
(P)o(ey-)-76 1044 y(ton)k(Jones)g([1995]\).)25 b(Brie\015y)m(,)17
b Fm(runST)d Fr(insists)j(that)f(its)g(argumen)o(t)-76
1086 y(has)f(t)o(yp)q(e)g Fl(8)p Fj(\013:)p Fm(ST)e Fj(\013)h(\034)t
Fr(,)h(while)g(the)g(argumen)o(t)g(t)o(yp)q(e)g(w)o(ould)h(b)q(e)f(in-)
-76 1127 y(ferred)e(to)g(b)q(e)g Fm(Monad)e Fr(\()p Fm(ST)h
Fj(\013)p Fr(\))h Fm(=>)f(ST)g Fj(\013)g(\034)t Fr(.)-76
1198 y(T)m(o)h(summarise,)i(if)f(o)o(v)o(erlapping)j(instances)e(are)f
(p)q(ermitted,)h(then)-76 1240 y(the)d(meaning)i(of)d(the)h(program)h
(dep)q(ends)g(in)g(detail)h(on)e(when)g(con-)-76 1281
y(text)k(reduction)h(tak)o(es)f(place.)26 b(T)m(o)16
b(a)o(v)o(oid)h(loss)f(of)g(coherence,)h(w)o(e)-76 1323
y(m)o(ust)d(sp)q(ecify)h(when)g(con)o(text)f(reduction)i(tak)o(es)e
(place)h(as)f(part)g(of)-76 1364 y(the)f(t)o(yp)q(e)h(system)f(itself.)
-76 1435 y(One)i(p)q(ossibili)q(t)o(y)i(is)e(to)g(defer)f(reduction)j
(of)d(an)o(y)h(constrain)o(t)h(that)-76 1477 y(can)22
b(p)q(ossibly)i(matc)o(h)e(more)g(than)g(one)g(instance)h(declaration.)
-76 1518 y(That)18 b(restores)g(the)f(abilit)o(y)j(to)e(p)q(erform)g
(program)g(transforma-)-76 1560 y(tions,)d(but)g(it)g(in)o(teracts)g(p)
q(o)q(orly)h(with)f(separate)g(compilation.)24 b(A)-76
1601 y(separately-compil)q(ed)13 b(library)e(migh)o(t)g(not)f(\\see")g
(all)h(the)f(instances)-76 1643 y(of)j(a)f(giv)o(en)i(class)g(that)f(a)
g(clien)o(t)h(mo)q(dule)g(uses,)f(and)g(so)g(m)o(ust)g(con-)-76
1684 y(serv)n(ativ)o(ely)g(assume)f(that)f(no)g(con)o(text)h(reduction)
g(can)f(b)q(e)h(done)f(at)-76 1726 y(all)j(on)g(an)o(y)f(constrain)o(t)
i(in)o(v)o(olving)h(a)d(t)o(yp)q(e)h(v)n(ariable.)-76
1797 y(So)f(the)h(only)g(reasonable)h(c)o(hoices)f(are)f(these:)-76
1886 y Fc(Choice)h(3a:)19 b Fr(prohibit)d(o)o(v)o(erlapping)f(instance)
g(declarations.)-76 1951 y Fc(Choice)f(3b:)k Fr(p)q(ermit)13
b(instance)g(declarations)h(with)e(o)o(v)o(erlapping,)18
1993 y(but)19 b(not)g(iden)o(tical,)k(instance)e(t)o(yp)q(es,)f(pro)o
(vided)h(one)f(is)f(a)18 2034 y(substitution)14 b(instance)g(of)e(the)g
(other;)h(but)f(restrict)h(all)h(uses)18 2076 y(of)f(the)h(\()p
Fj(inst)p Fr(\))g(rule)h(\(Figure)g(1\))e(to)h(ground)h(con)o(texts)g
Fj(C)q(;)6 b(P)f Fr(.)18 2117 y(This)19 b(condition)i(iden)o(ti\014es)f
(constrain)o(ts)h(that)d(can)h(matc)o(h)18 2159 y(at)d(most)h(one)h
(instance)g(declaration,)i(regardless)f(of)d(what)18
2201 y(further)d(instance)h(declarations)i(are)d(added.)-76
2355 y Fs(4.5)52 b(Decision)19 b(4:)k(instance)18 b(t)o(yp)q(es)-76
2450 y Fc(Decision)13 b(4:)18 b Fp(in)13 b(the)g(instanc)n(e)e(de)n
(clar)n(ation)113 2515 y Fm(instance)g Fj(P)19 b Fm(=>)13
b Fj(C)j(\034)441 2519 y Fq(1)465 2515 y Fj(:)6 b(:)g(:)g(\034)533
2519 y Fe(n)568 2515 y Fm(where)18 b Fj(:)6 b(:)g(:)-76
2581 y Fp(what)k(limitations,)e(if)h(any,)h(ar)n(e)f(ther)n(e)g(on)g
(the)h(form)g(of)f(the)g(instanc)n(e)-76 2622 y(typ)n(es,)j
Fj(\034)49 2626 y Fq(1)73 2622 y Fj(:)6 b(:)g(:)g(\034)141
2626 y Fe(n)162 2622 y Fp(?)1020 -34 y Fr(Hask)o(ell)21
b(1.4)e(has)g(only)i(single-parameter)g(t)o(yp)q(e)f(classes,)h(hence)
1020 7 y Fj(n)e Fr(=)g(1.)32 b(F)m(urthermore,)19 b(Hask)o(ell)h
(insists)g(that)e(the)g(single)i(t)o(yp)q(e)1020 49 y
Fj(\034)f Fr(is)c(a)g Fp(simple)g(typ)n(e)p Fr(;)f(that)h(is,)g(a)g(t)o
(yp)q(e)h(of)e(the)h(form)g Fj(T)20 b(\013)1877 53 y
Fq(1)1901 49 y Fj(:)6 b(:)g(:)g(\013)1977 53 y Fe(m)2006
49 y Fr(,)1020 90 y(where)11 b Fj(T)16 b Fr(is)11 b(a)f(t)o(yp)q(e)h
(constructor)h(and)f Fj(\013)1614 94 y Fq(1)1637 90 y
Fj(:)6 b(:)g(:)h(\013)1714 94 y Fe(n)1745 90 y Fr(are)j(distinct)j(t)o
(yp)q(e)1020 132 y(v)n(ariables.)25 b(This)16 b(decision)h(is)f
(closely)h(b)q(ound)f(up)f(with)h(Hask)o(ell's)1020 173
y(restriction)g(to)e(simple)h(con)o(texts)g(in)f(t)o(yp)q(es)h
(\(Section)g(4.2\).)k(Wh)o(y?)1020 215 y(Because,)12
b(faced)f(with)g(a)g(constrain)o(t)h(of)f(the)g(form)f(\()p
Fj(C)k Fr(\()p Fj(T)i(\034)t Fr(\)\))11 b(there)1020
256 y(is)17 b(either)g(a)f(unique)h(instance)h(declaration)g(that)f
(matc)o(hes)f(it)g(\(in)1020 298 y(whic)o(h)11 b(case)f(the)g
(constrain)o(t)i(can)e(b)q(e)h(reduced\),)g(or)f(there)g(is)h(not)f
(\(in)1020 339 y(whic)o(h)16 b(case)f(an)h(error)f(can)g(b)q(e)g
(signaled\).)26 b(If)14 b Fj(\034)19 b Fr(w)o(ere)c(allo)o(w)o(ed)h(to)
1020 381 y(b)q(e)e(other)h(than)g(a)f(t)o(yp)q(e)g(v)n(ariable)j(then)d
(more)g(than)h(one)g(instance)1020 422 y(declaration)j(migh)o(t)f(b)q
(e)f(a)g(p)q(oten)o(tial)i(matc)o(h)e(for)f(the)h(constrain)o(t.)1020
464 y(F)m(or)d(example,)h(supp)q(ose)g(w)o(e)f(had:)1059
535 y Fm(instance)k(Foo)h(\(Tree)g(Int\))g(where)g(...)1059
576 y(instance)f(Foo)h(\(Tree)g(Bool\))g(where)f(...)1020
647 y Fr(\(Note)c(that)h(these)g(t)o(w)o(o)e(do)i(not)g(o)o(v)o
(erlap.\))19 b(Giv)o(en)c(the)f(constrain)o(t)1020 689
y(\()p Fm(Foo)e Fr(\()p Fm(Tree)g Fj(\013)p Fr(\)\),)g(for)i(some)f(t)o
(yp)q(e)h(v)n(ariable)i Fj(\013)p Fr(,)c(w)o(e)h(cannot)i(decide)1020
730 y(whic)o(h)d(instance)h(declaration)h(to)d(use)h(un)o(til)h(w)o(e)d
(kno)o(w)i(more)f(ab)q(out)1020 772 y Fj(\013)p Fr(.)25
b(If)16 b(w)o(e)f(are)h(generalisin)q(g)j(o)o(v)o(er)d
Fj(\013)p Fr(,)g(w)o(e)f(will)j(therefore)e(end)h(up)1020
813 y(with)d(a)f(function)h(whose)f(t)o(yp)q(e)h(is)f(of)g(the)g(form)
1366 886 y Fm(Foo)f Fr(\()p Fm(Tree)f Fj(\013)p Fr(\))i
Fm(=>)f Fj(\034)1020 958 y Fr(Since)17 b(Hask)o(ell)h(do)q(es)e(not)h
(allo)o(w)g(suc)o(h)f(t)o(yp)q(es)h(\(b)q(ecause)g(the)f(con-)1020
1000 y(text)11 b(is)g(not)g(simple\),)i(it)e(mak)o(es)g(sense)g(for)g
(Hask)o(ell)h(also)g(to)e(restrict)1020 1041 y(instance)17
b(t)o(yp)q(es)f(to)f(b)q(e)h(simple)h(t)o(yp)q(es.)24
b(If)15 b(t)o(yp)q(es)g(can)h(ha)o(v)o(e)g(more)1020
1083 y(general)d(con)o(texts,)f(ho)o(w)o(ev)o(er,)g(it)g(is)g(not)g
(clear)h(that)f(suc)o(h)g(a)g(restric-)1020 1124 y(tion)i(mak)o(es)f
(sense.)1020 1195 y(W)m(e)19 b(ha)o(v)o(e)h(come)f(across)h(examples)h
(where)e(it)g(mak)o(es)h(sense)f(for)1020 1237 y(the)g(instance)h(t)o
(yp)q(es)f(not)g(to)g(b)q(e)g(simple)h(t)o(yp)q(es.)34
b(Section)20 b(3.6.1)1020 1278 y(ga)o(v)o(e)d(examples)g(in)g(whic)o(h)
h(the)e(instance)i(t)o(yp)q(e)e(w)o(as)g(just)g(a)h(t)o(yp)q(e)1020
1320 y(v)n(ariable,)22 b(although)f(this)f(w)o(as)e(in)i(the)f(con)o
(text)h(of)e(o)o(v)o(erlapping)1020 1361 y(instance)d(declarations.)k
(Here)13 b(is)h(another)f(example)1804 1345 y Fq(7)1823
1361 y Fr(:)1059 1432 y Fm(class)18 b(Liftable)e(f)k(where)1099
1474 y(lift0)d(::)i(a)g(->)g(f)g(a)1099 1515 y(lift1)e(::)i(\(a->b\))e
(->)i(f)g(a)h(->)e(f)i(b)1099 1557 y(lift2)d(::)i(\(a->b->c\))d(->)j(f)
g(a)g(->)g(f)h(b)f(->)g(f)g(c)1059 1640 y(instance)e(\(Liftable)f(f,)j
(Num)f(a\))h(=>)g(Num)f(\(f)h(a\))g(where)1099 1681 y(fromInte)o(ger)d
(=)j(lift0)f(.)h(fromIntege)o(r)1099 1723 y(negate)115
b(=)19 b(lift1)f(negate)1099 1764 y(\(+\))175 b(=)19
b(lift2)f(\(+\))1020 1835 y Fr(The)23 b(instance)i(declaration)h(is)e
(en)o(tirely)h(reasonable:)39 b(it)24 b(sa)o(ys)1020
1877 y(that)16 b(an)o(y)f(\\liftable")j(t)o(yp)q(e)e(constructor)g
Fm(f)f Fr(can)h(b)q(e)g(used)g(to)f(con-)1020 1918 y(struct)f(a)h(new)f
(n)o(umeric)h(t)o(yp)q(e)g Fm(\(f)k(a\))13 b Fr(from)h(an)h(existing)h
(n)o(umeric)1020 1960 y(t)o(yp)q(e)f Fm(a)p Fr(.)21 b(Indeed,)15
b(these)g(declarations)i(precisely)g(generalises)g(the)1020
2001 y Fm(Behaviour)9 b Fr(class)k(of)f(Elliott)j(&)d(Hudak)h([1997],)f
(and)h(w)o(e)f(ha)o(v)o(e)h(en-)1020 2043 y(coun)o(tered)18
b(other)g(examples)h(of)e(the)g(same)h(pattern.)30 b(\(Y)m(ou)18
b(will)1020 2084 y(probably)f(ha)o(v)o(e)f(noticed)h(that)e
Fm(lift1)e Fr(is)j(just)f(the)g Fm(map)f Fr(from)h(the)1020
2126 y(class)j Fm(Functor)m Fr(;)h(p)q(erhaps)f Fm(Functor)c
Fr(should)k(b)q(e)g(a)e(sup)q(erclass)j(of)1020 2167
y Fm(Liftable)m Fr(.\))34 b(A)18 b(disadv)n(an)o(tage)k(of)c
Fm(Liftable)e Fr(is)j(that)g(no)o(w)g(the)1020 2209 y(Hask)o(ell)11
b(t)o(yp)q(es)e(for)g Fm(Complex)d Fr(and)k Fm(Ratio)d
Fr(m)o(ust)i(b)q(e)h(made)f(instances)1020 2250 y(of)17
b Fm(Num)g Fr(indirectly)m(,)k(b)o(y)d(making)h(them)f(instances)h(of)f
Fm(Liftable)m Fr(.)1020 2292 y(This)13 b(seems)g(to)f(w)o(ork)h(\014ne)
g(for)f Fm(Complex)n Fr(,)g(but)h(not)f(for)h Fm(Ratio)n
Fr(.)j(In-)1020 2333 y(ciden)o(tally)m(,)h(w)o(e)e(could)g(o)o(v)o
(ercome)h(this)f(problem)h(if)f(w)o(e)f(had)h(o)o(v)o(er-)1020
2375 y(lapping)h(instances,)e(th)o(us:)1059 2446 y Fm(instance)j
(\(Liftable)f(f,)j(Num)f(a\))h(=>)g(Num)f(\(f)h(a\))g(where)f(...)1059
2487 y(instance)f(Num)h(a)h(=>)g(Num)g(\(Ratio)e(a\))i(where)f(...)1020
2559 y Fr(Another)j(reason)g(for)f(w)o(an)o(ting)h(non-simple)i
(instance)f(t)o(yp)q(es)f(is)p 1020 2586 399 2 v 1063
2610 a Fo(7)1080 2622 y Fn(Suggested)11 b(b)o(y)h(John)f(Matthews.)951
2747 y Fr(11)p eop
%%Page: 12 12
12 11 bop -76 -34 a Fr(when)13 b(using)i(old)f(t)o(yp)q(es)f(for)g(new)
g(purp)q(oses.)19 b(F)m(or)12 b(example)807 -50 y Fq(8)826
-34 y Fr(,)h(sup-)-76 7 y(p)q(ose)h(w)o(e)e(w)o(an)o(t)h(to)g(de\014ne)
h(the)f(class)h(of)f(mo)o(v)o(eable)h(things:)-37 78
y Fm(class)k(Moveable)f(t)i(where)3 120 y(move)f(::)h(Vector)e(->)i(t)g
(->)g(t)-76 191 y Fr(No)o(w)9 b(let)h(us)g(mak)o(e)g(p)q(oin)o(ts)h(mo)
o(v)o(eable.)17 b(What)11 b(is)f(a)g(p)q(oin)o(t?)17
b(P)o(erhaps)-76 232 y(just)c(a)g(pair)h(of)f Fm(Float)n
Fr(s.)k(So)c(w)o(e)g(migh)o(t)h(w)o(an)o(t)e(to)h(write)-37
303 y Fm(instance)k(Moveable)f(\(Float,)h(Float\))h(where)f(...)-76
374 y Fr(or)c(ev)o(en)-37 445 y Fm(type)18 b(Point)g(=)h(\(Float,)e
(Float\))-37 487 y(instance)g(Moveable)f(Point)i(where)g(...)-76
558 y Fr(Unlik)o(e)c(the)f Fm(Liftable)c Fr(example,)k(it)g(is)g(p)q
(ossible)i(to)e(manage)g(with)-76 599 y(simple)i(instance)f(t)o(yp)q
(es,)g(b)o(y)f(making)h Fm(Point)d Fr(a)i(new)g(t)o(yp)q(e:)-37
670 y Fm(newtype)k(Point)h(=)h(MkPoint)e(Float)h(Float)-37
712 y(instance)f(Moveable)f(Point)i(where)g(...)-76 783
y Fr(but)d(that)f(migh)o(t)h(b)q(e)g(tiresome)g(\(for)f(example,)h
Fm(unzip)d Fr(split)k(a)e(list)-76 825 y(of)f(p)q(oin)o(ts)h(in)o(to)g
(their)g(x-co)q(ordinates)h(and)f(y-co)q(ordinates\).)-76
934 y Fc(Choice)g(4a)h(\(Hask)o(ell\):)k Fr(the)14 b(instance)i(t)o(yp)
q(e\(s\))f Fj(\034)702 938 y Fe(i)730 934 y Fr(m)o(ust)f(all)i(b)q(e)18
975 y(simple)e(t)o(yp)q(es.)-76 1047 y Fc(Choice)g(4b:)k
Fr(eac)o(h)e(of)f(the)g(instance)i(t)o(yp)q(es)e Fj(\034)622
1051 y Fe(i)650 1047 y Fr(is)h(a)f(simple)i(t)o(yp)q(e)18
1088 y(or)c(a)g(t)o(yp)q(e)g(v)n(ariable,)i(and)e(at)g(least)h(one)f
(is)h(not)f(a)g(t)o(yp)q(e)h(v)n(ari-)18 1130 y(able.)j(\(The)10
b(latter)g(restriction)i(is)f(necessary)g(to)f(ensure)h(that)18
1171 y(con)o(text)i(reduction)i(terminates.\))-76 1243
y Fc(Choice)f(4c:)k Fr(at)d(least)h(one)f(of)g(the)g(instance)h(t)o(yp)
q(es)f Fj(\034)740 1247 y Fe(i)768 1243 y Fr(m)o(ust)g(not)18
1284 y(b)q(e)e(a)g(t)o(yp)q(e)g(v)n(ariable.)-76 1393
y(Choice)19 b(4c)e(w)o(ould)i(p)q(ermit)f(the)g Fm(Liftable)c
Fr(example)19 b(ab)q(o)o(v)o(e.)32 b(It)-76 1435 y(w)o(ould)14
b(also)g(p)q(ermit)g(the)f(follo)o(wing)i(instance)g(declarations)-37
1506 y Fm(instance)i(D)i(\(T)g(Int)f(a\))h(where)f(...)-37
1547 y(instance)f(D)i(\(T)g(Bool)f(a\))h(where)f(...)-76
1618 y Fr(ev)o(en)h(if)g(o)o(v)o(erlapping)i(instances)f(are)e
(prohibited)j(\(pro)o(vided,)g(of)-76 1660 y(course,)13
b(there)g(w)o(as)g(no)g(instance)h(for)e Fm(D)19 b(\(T)g(a)h(b\))o
Fr(\).)c(It)d(w)o(ould)g(also)-76 1701 y(allo)o(w)h(strange-lo)q(oking)
i(instance)f(declarations)h(suc)o(h)d(as)-37 1773 y Fm(instance)k(C)i
([[a)g(->)f(Int]])g(where)g(...)-76 1844 y Fr(whic)o(h)g(in)g(turn)f
(mak)o(e)g(the)g(matc)o(hing)h(of)f(a)g(candidate)i(instance)-76
1885 y(declaration)h(against)f(a)f(constrain)o(t)h(a)f(little)h(more)f
(complicated)-76 1927 y(\(although)d(not)e(m)o(uc)o(h\).)-76
1998 y(If)i(o)o(v)o(erlapping)j(instances)f(are)f(p)q(ermitted,)h(then)
f(it)g(is)g(not)f(clear)-76 2039 y(whether)d(c)o(hoices)h(4b)f(and)g
(4c)f(lead)i(to)f(a)f(decideable)j(t)o(yp)q(e)e(system.)-76
2081 y(If)g(o)o(v)o(erlapping)k(instances)f(are)d(not)h(p)q(ermitted)h
(then,)f(seem)g(to)g(b)q(e)-76 2122 y(no)20 b(tec)o(hnical)h(ob)r
(jections)f(to)f(them,)i(and)e(the)g(examples)i(giv)o(en)-76
2164 y(ab)q(o)o(v)o(e)14 b(suggest)g(that)f(the)g(extra)g(expressiv)o
(eness)j(is)e(useful.)-76 2302 y Fs(4.6)52 b(Decision)20
b(5:)26 b(rep)q(eated)20 b(t)o(yp)q(e)e(v)m(ariables)i(in)43
2358 y(instance)f(heads)-76 2454 y Fc(Decision)13 b(5:)18
b Fp(in)13 b(the)g(instanc)n(e)e(de)n(clar)n(ation)113
2532 y Fm(instance)g Fj(P)19 b Fm(=>)13 b Fj(C)j(\034)441
2536 y Fq(1)465 2532 y Fj(:)6 b(:)g(:)g(\034)533 2536
y Fe(n)568 2532 y Fm(where)18 b Fj(:)6 b(:)g(:)p -76
2559 399 2 v -32 2584 a Fo(8)-16 2596 y Fn(Suggested)11
b(b)o(y)h(Simon)g(Thompson.)1020 -34 y Fp(c)n(an)19 b(the)g(instanc)n
(e)f(he)n(ad)g Fj(\034)1435 -30 y Fe(i)1469 -34 y Fp(c)n(ontain)f(r)n
(ep)n(e)n(ate)n(d)h(typ)n(e)h(variables?)1020 7 y Fr(This)h(decision)h
(is)f(really)h(part)e(of)g(Decision)i(4)e(but)h(it)f(deserv)o(es)1020
49 y(separate)14 b(treatmen)o(t.)1020 120 y(Consider)21
b(this)f(instance)i(declaration,)h(whic)o(h)d(has)h(a)e(rep)q(eated)
1020 161 y(t)o(yp)q(e)13 b(v)n(ariable)j(in)d(the)g(instance)i(t)o(yp)q
(e:)1079 232 y Fm(instance)h(...)j(=>)g(Foo)f(\(a,a\))g(where)g(...)
1020 303 y Fr(In)d(Hask)o(ell)i(this)f(is)g(illegal,)j(but)c(there)h
(seems)f(no)h(tec)o(hnical)h(rea-)1020 345 y(son)f(to)g(exclude)h(it.)
25 b(F)m(urthermore,)16 b(it)g(is)h(useful:)23 b(the)15
b Fm(VarMonad)1020 386 y Fr(instance)g(for)f Fm(ST)f
Fr(in)h(Section)h(2.1)f(used)g(rep)q(eated)h(t)o(yp)q(e)f(v)n
(ariables,)1020 428 y(as)f(did)h(the)f Fm(Iso)f Fr(example)j(in)e
(Section)i(2.3.)1020 499 y(P)o(ermitting)j(rep)q(eated)e(t)o(yp)q(e)g
(v)n(ariables)i(in)f(the)f(instance)h(t)o(yp)q(e)f(of)1020
540 y(an)h(instance)g(declaration)i(sligh)o(tly)g(complicates)f(the)e
(pro)q(cess)h(of)1020 582 y(matc)o(hing)j(a)f(candidate)h(instance)g
(declaration)h(against)f(a)f(con-)1020 623 y(strain)o(t,)i(requiring)g
(full)f(matc)o(hing)g(\(i.e.)35 b(one-w)o(a)o(y)19 b(uni\014cation,)
1020 665 y(a)12 b(w)o(ell-understo)q(o)q(d)j(algorithm\).)k(F)m(or)12
b(example,)h(when)g(matc)o(hing)1020 706 y(the)e(instance)g(head)h
Fm(Foo)d Fr(\()p Fj(\013;)c(\013)p Fr(\))10 b(against)i(a)e(constrain)o
(t)i Fm(Foo)d Fr(\()p Fj(\034)1933 710 y Fq(1)1950 706
y Fj(;)d(\034)1984 710 y Fq(2)2001 706 y Fr(\))1020 748
y(one)13 b(m)o(ust)g(\014rst)h(bind)g Fj(\013)e Fr(to)h
Fj(\034)1453 752 y Fq(1)1470 748 y Fr(,)g(and)g(then)h(c)o(hec)o(k)f
(for)g(equalit)o(y)i(b)q(e-)1020 789 y(t)o(w)o(een)e(the)g(no)o(w-b)q
(ound)h Fj(\013)f Fr(and)g Fj(\034)1522 793 y Fq(2)1540
789 y Fr(.)1020 895 y Fc(Choice)h(5a:)19 b Fr(p)q(ermit)d(rep)q(eated)h
(t)o(yp)q(e)e(v)n(ariables)j(in)e(an)g(instance)1113
937 y(head.)1020 1006 y Fc(Choice)e(5b:)k Fr(prohibit)c(rep)q(eated)e
(t)o(yp)q(e)f(v)n(ariables)i(in)f(an)g(instance)1113
1048 y(head.)1020 1220 y Fs(4.7)52 b(Decision)19 b(6:)k(instance)18
b(con)o(texts)1020 1315 y Fc(Decision)13 b(6:)18 b Fp(in)13
b(the)g(instanc)n(e)e(de)n(clar)n(ation)1209 1391 y Fm(instance)g
Fj(P)19 b Fm(=>)13 b Fj(C)j(\034)1537 1395 y Fq(1)1561
1391 y Fj(:)6 b(:)g(:)g(\034)1629 1395 y Fe(n)1664 1391
y Fm(where)18 b Fj(:)6 b(:)g(:)1020 1466 y Fp(what)k(limitations,)e(if)
h(any,)h(ar)n(e)f(ther)n(e)g(on)g(the)g(form)i(of)e(the)g(instanc)n(e)
1020 1508 y(c)n(ontext,)i Fj(P)5 b Fp(?)1020 1579 y Fr(As)20
b(men)o(tioned)i(in)f(Section)h(4.1,)g(w)o(e)e(require)i(that)e
Fj(T)5 b(V)10 b Fr(\()p Fj(P)5 b Fr(\))22 b Fl(\022)1020
1590 y Fd(S)1061 1621 y Fj(T)5 b(V)10 b Fr(\()p Fj(\034)1152
1625 y Fe(i)1165 1621 y Fr(\).)18 b(Ho)o(w)o(ev)o(er,)13
b(Hask)o(ell)i(has)g(a)e(more)h(drastic)h(restriction:)1020
1662 y(it)j(requires)h(that)f(eac)o(h)g(constrain)o(t)h(in)g
Fj(P)j Fr(b)q(e)c(of)f(the)h(form)f Fj(C)k(\013)1020
1704 y Fr(where)c Fj(\013)g Fr(is)h(a)g(t)o(yp)q(e)g(v)n(ariable.)32
b(An)17 b(imp)q(ortan)o(t)i(motiv)n(ation)g(for)1020
1745 y(a)d(restriction)h(of)f(this)g(sort)g(is)h(the)e(need)i(to)e
(ensure)i(termination)1020 1787 y(of)g(con)o(text)h(reduction.)32
b(F)m(or)17 b(example,)j(supp)q(ose)e(the)g(follo)o(wing)1020
1828 y(declaration)e(w)o(as)c(allo)o(w)o(ed:)1059 1899
y Fm(instance)17 b(C)i([[a]])f(=>)h(C)g([a])f(where)g(...)1020
1970 y Fr(The)c(trouble)g(here)g(is)g(that)g(for)f(con)o(text)h
(reduction)i(to)d(terminate)1020 2012 y(it)f(m)o(ust)f(reduce)h(a)f
(con)o(text)h(to)f(a)g Fp(simpler)f Fr(con)o(text.)17
b(This)12 b(instance)1020 2053 y(declaration)f(will)g(\\reduce")f(the)f
(constrain)o(t)i(\()p Fm(C)d([)o Fj(\034)t Fm(])p Fr(\))h(to)g(\()p
Fm(C)f([[)o Fj(\034)t Fm(]])p Fr(\),)1020 2095 y(whic)o(h)17
b(is)g(more)g(complicated,)i(and)e(con)o(text)g(reduction)i(will)f(di-)
1020 2136 y(v)o(erge.)36 b(Although)21 b(they)f(do)f(not)h(seem)f(to)g
(o)q(ccur)h(in)g(practical)1020 2178 y(application)q(s,)14
b(instance)f(declarations)h(lik)o(e)f(this)f(are)g(p)q(ermitted)g(in)
1020 2219 y(Gofer|with)i(the)f(consequence)h(that)f(its)g(t)o(yp)q(e)g
(system)h(is)f(in)g(fact)1020 2261 y(undecidable.)1020
2332 y(In)j(short,)h(it)f(is)g(essen)o(tial)i(to)e(place)h(enough)g
(constrain)o(ts)h(on)e(the)1020 2373 y(instance)c(con)o(text)f(to)g
(ensure)g(that)g(con)o(text)g(reduction)h(con)o(v)o(erges.)1020
2415 y(T)m(o)f(do)h(this,)g(w)o(e)f(need)h(to)f(ensure)h(that)g
(something)h(\\gets)e(smaller")1020 2456 y(in)i(the)e(passage)i(from)f
Fj(C)i(\034)1414 2460 y Fq(1)1438 2456 y Fj(:)6 b(:)g(:)g(\034)1506
2460 y Fe(n)1539 2456 y Fr(to)11 b Fj(P)5 b Fr(.)17 b(Hask)o(ell's)c
(restriction)g(to)1020 2498 y(simple)k(con)o(texts)f(certainly)i
(ensures)e(termination,)i(b)q(ecause)f(the)1020 2539
y(argumen)o(t)h(t)o(yp)q(es)h(are)e(guaran)o(teed)i(to)f(get)g
(smaller.)32 b(In)17 b(princi-)1020 2581 y(ple,)j(instance)f
(declarations)i(with)d(irreducibl)q(e)i(but)f(non-simple)1020
2622 y(con)o(texts)14 b(migh)o(t)g(mak)o(e)f(sense:)951
2747 y(12)p eop
%%Page: 13 13
13 12 bop -37 -34 a Fm(instance)17 b(Monad)h(\(t)g(m\))h(=>)g(Foo)g(t)g
(m)g(where)f(...)-76 37 y Fr(W)m(e)c(ha)o(v)o(e)g(y)o(et)f(to)g(\014nd)
i(an)o(y)f(con)o(vincing)i(examples)f(of)e(this.)19 b(Ho)o(w-)-76
78 y(ev)o(er,)12 b(if)g(con)o(text)h(reduction)h(is)f(deferred)f
(\(Choices)h(2b,c\))f(then)h(w)o(e)-76 120 y Fp(must)f
Fr(p)q(ermit)i(non-simple)i(instance)e(con)o(texts.)k(F)m(or)13
b(example:)-37 191 y Fm(data)18 b(Tree)h(a)g(=)g(Node)f(a)h([Tree)f(a])
-37 232 y(instance)f(\(Eq)h(a,)h(Eq)g([Tree)f(a]\))g(=>)h(Eq)g(\(Tree)f
(a\))g(where)3 274 y(\(==\))g(\(Node)f(v1)i(ts1\))f(\(Node)g(v2)h
(ts2\))120 315 y(=)h(\(v1)e(==)h(v2\))f(&&)h(\(ts1)f(==)h(ts2\))-76
386 y Fr(Here,)25 b(if)e(w)o(e)f(are)h(not)g(p)q(ermitted)h(to)e
(reduce)i(the)f(constrain)o(t)-76 428 y Fm(Eq)c([Tree)f(a])o
Fr(,)12 b(it)i(m)o(ust)f(app)q(ear)h(in)g(the)f(instance)h(con)o(text.)
-76 499 y(Lastly)m(,)k(if)e(the)h(constrain)o(ts)h(in)f
Fj(P)k Fr(in)o(v)o(olv)o(e)d(only)g(t)o(yp)q(e)e(v)n(ariables,)-76
540 y(when)10 b(m)o(ulti-parameter)h(t)o(yp)q(e)f(classes)h(are)f(in)o
(v)o(olv)o(ed)i(w)o(e)d(m)o(ust)g(also)-76 582 y(ask)i(whether)h(a)f
(single)h(constrain)o(t)h(ma)o(y)e(con)o(tain)h(a)f(rep)q(eated)h(t)o
(yp)q(e)-76 623 y(v)n(ariable,)j(th)o(us:)-37 694 y Fm(instance)i(Foo)h
(a)i(a)f(=>)g(Baz)f(a)h(where)f(...)-76 766 y Fr(There)13
b(seems)g(to)g(b)q(e)h(no)f(tec)o(hnical)i(reason)f(to)f(prohibit)i
(this.)-76 869 y Fc(Choice)f(6a:)19 b Fr(constrain)o(ts)f(in)e(the)g
(con)o(text)g(of)f(an)h(instance)h(dec-)18 910 y(laration)e(m)o(ust)f
(b)q(e)h(of)e(the)h(form)g Fj(C)i(\013)582 914 y Fq(1)606
910 y Fj(:)6 b(:)g(:)g(\013)682 914 y Fe(n)703 910 y
Fr(,)13 b(with)i(the)f Fj(\013)908 914 y Fe(i)18 952
y Fr(distinct.)-76 1021 y Fc(Choice)g(6b:)k Fr(as)e(for)g(Choice)h(6a,)
f(except)g(without)h(the)f(require-)18 1063 y(men)o(t)d(for)f(the)i
Fj(\013)265 1067 y Fe(i)290 1063 y Fr(to)f(b)q(e)g(distinct.)-76
1132 y Fc(Choice)h(6c:)k Fr(something)f(less)f(restrictiv)o(e,)i(but)d
(with)h(some)f(w)o(a)o(y)18 1173 y(of)d(ensuring)j(decidabil)q(it)o(y)h
(of)d(con)o(text)g(reduction.)-76 1343 y Fs(4.8)52 b(Decision)19
b(7:)k(what)18 b(sup)q(erclasses)f(are)g(p)q(er-)43 1399
y(mitted)-76 1495 y Fc(Decision)c(7:)18 b Fp(in)13 b(a)h(class)e(de)n
(clar)n(ation,)-19 1568 y Fm(class)g Fj(P)19 b Fm(=>)13
b Fj(C)j(\013)258 1572 y Fq(1)282 1568 y Fj(:)6 b(:)g(:)g(\013)358
1572 y Fe(n)392 1568 y Fm(where)18 b({)13 b Fj(op)e Fr(::)f
Fj(Q)k Fm(=>)f Fj(\034)g Fb(;)8 b Fj(:)e(:)g(:)20 b Fm(})-76
1642 y Fp(what)15 b(limitations,)e(b)n(eyond)g(those)h(in)h(Se)n(ction)
e(4.1,)h(ar)n(e)h(ther)n(e)f(on)-76 1683 y(the)i(form)g(of)g(the)f(sup)
n(er)n(class)f(c)n(ontext,)h Fj(P)5 b Fp(?)25 b Fr(Hask)o(ell)18
b(restricts)f Fj(P)-76 1725 y Fr(to)e(consist)h(of)f(constrain)o(ts)i
(of)e(the)g(form)g Fj(D)g(\014)621 1729 y Fq(1)644 1725
y Fj(:)6 b(:)h(:)f(\014)718 1729 y Fe(m)747 1725 y Fr(,)15
b(where)g Fj(\014)908 1729 y Fe(i)-76 1767 y Fr(m)o(ust)g(b)q(e)f(a)g
(mem)o(b)q(er)h(of)f Fl(f)p Fj(\013)345 1771 y Fq(1)362
1767 y Fj(;)6 b(:)g(:)g(:)g(;)g(\013)472 1771 y Fe(n)493
1767 y Fl(g)p Fr(,)15 b(and)g(all)g(the)g Fj(\014)758
1771 y Fe(i)785 1767 y Fr(m)o(ust)f(b)q(e)-76 1808 y(distinct.)19
b(But)13 b(what)g(is)h(wrong)f(with)h(this?)-37 1879
y Fm(class)k(Foo)h(\(t)f(m\))h(=>)g(Baz)g(t)g(m)g(where)f(...)-76
1950 y Fr(Also)e(in)g(this)g(case,)f(there)g(seems)h(to)f(b)q(e)g(no)g
(tec)o(hnical)i(reason)f(to)-76 1992 y(prohibit)f(this.)-76
2088 y Fc(Choice)f(7a:)19 b Fr(constrain)o(ts)f(in)f(the)f(sup)q
(erclass)h(con)o(text)g(m)o(ust)f(b)q(e)18 2129 y(as)k(in)i(Hask)o
(ell,)i(i.e.)40 b(the)21 b(constrain)o(ts)h(are)f(of)g(the)f(form)18
2171 y Fj(D)14 b(\013)89 2175 y Fq(1)113 2171 y Fj(:)6
b(:)g(:)g(\013)189 2175 y Fe(n)210 2171 y Fr(,)14 b(with)g(the)h
Fj(\013)416 2175 y Fe(i)443 2171 y Fr(distinct,)h(and)f(a)f(subset)h
(of)f(the)18 2212 y(t)o(yp)q(e)f(v)n(ariables)i(that)e(o)q(ccur)h(in)g
(the)f(class)h(head.)-76 2282 y Fc(Choice)g(7b:)k Fr(no)g(limitations)j
(on)c(sup)q(erclass)j(con)o(texts,)f(except)18 2323 y(those)13
b(p)q(ostulated)i(in)f(Section)g(4.1.)-76 2486 y Fs(4.9)52
b(Decision)19 b(8:)k(impro)o(v)o(emen)o(t)-76 2581 y
Fr(Supp)q(ose)15 b(that)e(w)o(e)f(ha)o(v)o(e)i(a)f(constrain)o(t)h
(with)g(the)f(follo)o(wing)i(prop-)-76 2622 y(erties:)1076
-34 y Fl(\017)j Fr(it)c(con)o(tains)g(free)f(t)o(yp)q(e)h(v)n
(ariables;)1076 37 y Fl(\017)k Fr(it)c(do)q(es)f(not)h(matc)o(h)f(an)o
(y)h(instance)g(declaration)1828 21 y Fq(9)1076 108 y
Fl(\017)k Fr(it)12 b(can)f(b)q(e)g(made)g(to)f(matc)o(h)h(an)g
(instance)h(declaration)i(b)o(y)d(in-)1113 150 y(stan)o(tiating)i(some)
d(of)g(the)g(constrain)o(t's)i(free)e(t)o(yp)q(e)g(v)n(ariables;)1076
221 y Fl(\017)18 b Fr(no)13 b(matter)f(what)g(other)g(\(legal\))i
(instance)f(declarations)i(are)1113 263 y(added,)g(there)e(is)h(only)h
(one)f(instance)h(declaration)g(that)f(the)1113 304 y(constrain)o(t)h
(can)e(b)q(e)h(made)f(to)g(matc)o(h)g(in)h(this)g(w)o(a)o(y)m(.)1020
405 y(If)f(all)i(these)f(things)h(are)f(true,)g(an)g(attractiv)o(e)h
(idea)g(is)f(to)f Fp(impr)n(ove)1020 447 y Fr(the)e(constrain)o(t)h(b)o
(y)f(instan)o(tiating)i(the)e(t)o(yp)q(e)g(v)n(ariables)i(in)e(the)g
(con-)1020 488 y(strain)o(t)j(so)f(that)g(it)g(do)q(es)g(matc)o(h)g
(the)g(instance)h(declaration.)19 b(This)1020 530 y(mak)o(es)14
b(some)g(programs)h(t)o(ypable)g(that)f(w)o(ould)g(not)g(otherwise)h(b)
q(e)1020 571 y(so.)25 b(It)15 b(do)q(es)h(not)g(compromise)h(an)o(y)f
(of)f(our)h(principles,)j(b)q(ecause)1020 613 y(the)f(last)h(condition)
i(ensures)e(that)g(ev)o(en)f(adding)i(new)f(instance)1020
654 y(declarations)d(will)e(not)f(c)o(hange)h(the)f(w)o(a)o(y)f(in)i
(whic)o(h)g(impro)o(v)o(emen)o(t)1020 696 y(is)g(carried)g(out.)1020
767 y(Impro)o(v)o(emen)o(t)i(w)o(as)f(in)o(tro)q(duced)i(b)o(y)f(Jones)
f([1995b].)24 b(A)15 b(full)h(dis-)1020 808 y(cussion)i(is)e(b)q(ey)o
(ond)h(the)f(scop)q(e)g(of)g(this)h(pap)q(er.)26 b(The)15
b(conditions)1020 850 y(are)f(quite)h(restrictiv)o(e,)h(so)e(it)g(is)h
(not)f(y)o(et)g(clear)h(whether)g(it)f(w)o(ould)1020
891 y(impro)o(v)o(e)c(enough)h(useful)f(programs)g(to)f(b)q(e)g(w)o
(orth)g(the)h(extra)f(e\013ort.)1020 992 y Fc(Choice)14
b(8a:)19 b Fr(no)13 b(impro)o(v)o(emen)o(t.)1020 1064
y Fc(Choice)h(8b:)k Fr(allo)o(w)c(impro)o(v)o(emen)o(t)h(in)f(some)f
(form.)1020 1165 y(Choice)j(8b)f(w)o(ould)g(ob)o(viously)j(need)d
(further)g(elab)q(oration)j(b)q(efore)1020 1206 y(this)c(design)g
(decision)i(is)d(crisply)i(form)o(ulated.)1020 1344 y
Fs(4.10)52 b(Decision)19 b(9:)k(Class)17 b(declarations)1020
1440 y Fc(Decision)c(9:)18 b Fp(what)13 b(limitations,)e(if)i(any,)g
(ar)n(e)g(ther)n(e)f(on)h(the)g(c)n(on-)1020 1481 y(texts)k(in)g
(class-memb)n(er)g(typ)n(e)g(signatur)n(es?)28 b Fr(Presumably)20
b(class-)1020 1523 y(mem)o(b)q(er)14 b(t)o(yp)q(e)g(signatures)i
(should)f(ob)q(ey)f(the)g(same)g(rules)h(as)f(an)o(y)1020
1564 y(other)e(t)o(yp)q(e)f(signature,)i(but)f(Hask)o(ell)h(adds)f(an)f
(additional)k(restric-)1020 1606 y(tion.)j(Consider:)1059
1677 y Fm(class)g(C)h(a)g(where)1099 1718 y(op1)f(::)h(a)g(->)g(a)1099
1760 y(op2)f(::)h(Eq)g(a)g(=>)g(a)g(->)g(a)1020 1831
y Fr(In)c(Hask)o(ell,)h(the)e(t)o(yp)q(e)h(signature)i(for)d
Fm(op2)f Fr(w)o(ould)j(b)q(e)e(illegal)q(,)j(b)q(e-)1020
1872 y(cause)e(it)f(further)h(constrains)g(the)g(class)g(t)o(yp)q(e)f
(v)n(ariable)i Fm(a)p Fr(.)k(There)1020 1914 y(seems)10
b(to)h(b)q(e)f(no)g(tec)o(hnical)j(reason)d(for)g(this)h(restriction.)
18 b(It)10 b(is)h(sim-)1020 1955 y(ply)j(a)e(n)o(uisance)i(to)f(the)f
(Hask)o(ell)i(sp)q(eci\014cation,)h(implemen)o(tation)q(,)1020
1997 y(and)f(\(o)q(ccasionally\))i(programmer.)1020 2106
y Fc(Choice)e(9a)h(\(Hask)o(ell\):)k Fr(the)12 b(con)o(text)h(in)g(a)f
(class-mem)o(b)q(er)i(t)o(yp)q(e)1113 2148 y(signature)20
b(cannot)e(men)o(tion)g(the)g(class)g(t)o(yp)q(e)g(v)n(ariable;)j(in)
1113 2189 y(addition,)d(it)e(is)f(sub)r(ject)h(to)f(the)g(same)h(rules)
g(as)f(an)o(y)h(other)1113 2231 y(t)o(yp)q(e)e(signature.)1020
2302 y Fc(Choice)g(9b:)k Fr(the)e(t)o(yp)q(e)f(signature)j(for)d(a)g
(class-mem)o(b)q(er)i(is)f(sub-)1113 2344 y(ject)d(to)g(the)g(same)g
(rules)h(as)g(an)o(y)f(other)g(t)o(yp)q(e)h(signature.)p
1020 2374 399 2 v 1063 2398 a Fo(9)1080 2410 y Fn(Recall)9
b(that)g(matc)o(hing)h(a)f(constrain)o(t)g(against)g(an)g(instance)h
(declaration)1020 2444 y(is)i(a)g(one-w)o(a)o(y)f(uni\014cation:)17
b(w)o(e)11 b(ma)o(y)h(instan)o(tiate)h(t)o(yp)q(e)f(v)n(ariables)g
(from)g(the)1020 2477 y(instance)f(head,)h(but)g(not)f(those)g(from)g
(the)g(constrain)o(t.)951 2747 y Fr(13)p eop
%%Page: 14 14
14 13 bop -76 -34 a Fs(5)53 b(Other)17 b(a)o(v)o(en)o(ues)-76
74 y Fr(While)h(writing)f(this)f(pap)q(er,)h(a)e(n)o(um)o(b)q(er)i(of)e
(other)h(extensions)h(to)-76 115 y(Hask)o(ell's)f(t)o(yp)q(e-class)g
(system)e(w)o(ere)g(suggested)i(to)e(us)h(that)f(seem)-76
157 y(to)k(raise)h(considerable)j(tec)o(hnical)e(di\016culties.)35
b(W)m(e)18 b(en)o(umerate)-76 198 y(them)13 b(in)h(this)g(section,)g
(iden)o(tifying)i(their)e(di\016culties.)-76 336 y Fs(5.1)52
b(Anon)o(ymous)16 b(t)o(yp)q(e)h(synon)o(yms)-76 432
y Fr(When)e(exp)q(osed)h(to)e(m)o(ulti-parameter)j(t)o(yp)q(e)d
(classes)i(and)f(in)g(par-)-76 473 y(ticular)g(higher)f(order)g(t)o(yp)
q(e)g(v)n(ariables,)h(programmers)f(often)f(seek)-76
515 y(a)h(more)g(expressiv)o(e)h(t)o(yp)q(e)g(language.)21
b(F)m(or)13 b(example,)i(supp)q(ose)h(w)o(e)-76 556 y(ha)o(v)o(e)e(the)
f(follo)o(wing)i(t)o(w)o(o)d(classes)j Fm(Foo)c Fr(and)j
Fm(Bar)o Fr(:)-17 627 y Fm(class)k(Foo)g(k1)h(where)f(f)h(::)g(k1)g(a)g
(->)g(a)-17 669 y(class)f(Bar)g(k2)h(where)f(g)h(::)g(k2)g(b)g(->)g(b)
-76 740 y Fr(and)14 b(a)f(concrete)g(binary)i(t)o(yp)q(e)e(constructor)
-17 811 y Fm(data)18 b(Baz)h(a)g(b)g(=)g(...)-76 882
y Fr(Then)e(w)o(e)e(can)i(easily)h(write)f(an)f(instance)i(declaration)
h(that)d(de-)-76 923 y(clares)e Fm(\(Bar)k(a\))12 b Fr(to)h(b)q(e)g(a)g
(functor,)h(th)o(us:)-37 994 y Fm(instance)j(Functor)g(\(Baz)h(a\))h
(where)81 1036 y(map)g(=)g(...)-76 1107 y Fr(But)f(supp)q(ose)h
Fm(Baz)e Fr(is)h(really)h(a)f(functor)g(in)h(its)f Fp(\014rst)f
Fr(argumen)o(t.)-76 1148 y(Then)c(w)o(e)g(really)i(w)o(an)o(t)e(to)f
(sa)o(y)i(is:)-37 1220 y Fm(type)k(Zab)h(b)g(a)g(=)h(Baz)e(a)h(b)-37
1261 y(instance)e(Functor)g(\(Zab)h(b\))h(where)81 1303
y(map)g(=)g(...)-76 1374 y Fr(Ho)o(w)o(ev)o(er,)24 b(Hask)o(ell)g
(prohibits)h(partially-app)q(li)q(ed)h(t)o(yp)q(e)c(synon-)-76
1415 y(m)o(yms,)13 b(and)h(for)f(a)g(v)o(ery)g(go)q(o)q(d)h(reason:)k
(a)c(partially-appl)q(ie)q(d)i(t)o(yp)q(e)-76 1457 y(synon)o(ym)c(is,)f
(in)g(e\013ect,)g(a)f(lam)o(b)q(da)i(abstraction)g(at)f(the)f(t)o(yp)q
(e)h(lev)o(el,)-76 1498 y(and)g(that)f(tak)o(es)g(us)g(immediately)j
(in)o(to)e(the)f(realm)h(of)e(higher-order)-76 1540 y(uni\014cation,)14
b(and)e(minimises)h(the)e(lik)o(elih)q(o)q(o)q(d)j(of)d(a)g(decidable)j
(t)o(yp)q(e)-76 1581 y(system)f(\(Jones)h([1995a,)f(Section)h(4.2]\).)i
(It)d(migh)o(t)h(b)q(e)f(p)q(ossible)i(to)-76 1623 y(incorp)q(orate)c
(some)e(form)g(of)g(higher-order)i(uni\014cation)h(\(e.g.)j(along)-76
1664 y(the)e(lines)h(of)e(Miller)j([1991]\))d(but)h(it)g(w)o(ould)g(b)q
(e)g(a)f(substan)o(tial)j(new)-76 1706 y(complication)h(to)d(an)h
(already)g(sophisticated)i(t)o(yp)q(e)d(system.)-76 1844
y Fs(5.2)52 b(Relaxed)18 b(sup)q(erclass)g(con)o(texts)-76
1939 y Fr(One)c(of)e(our)i(ground)h(rules)f(in)g(this)g(pap)q(er)g(is)g
(that)g(the)f(t)o(yp)q(e)h(v)n(ari-)-76 1981 y(ables)h(in)f(the)f(con)o
(text)h(of)f(a)h(class)g(declaration)i(m)o(ust)d(b)q(e)h(a)f(subset)-76
2022 y(of)h(the)h(t)o(yp)q(e)f(v)n(ariables)j(in)e(the)f(class)i(head.)
21 b(This)15 b(rules)h(out)e(dec-)-76 2064 y(larations)h(lik)o(e:)-37
2135 y Fm(class)j(Monad)g(\(m)h(s\))f(=>)h(StateMonad)d(m)j(where)42
2176 y(get)f(::)h(m)g(s)h(s)42 2218 y(set)e(::)h(s)g(->)g(m)g(s)h(\(\))
-76 2289 y Fr(The)14 b(idea)g(here)g(is)g(that)f(the)h(con)o(text)g
(indicates)i(that)d Fm(m)20 b(s)12 b Fr(should)-76 2330
y(b)q(e)18 b(a)g(monad)h(for)e(an)o(y)h(t)o(yp)q(e)h
Fm(s)o Fr(.)31 b(Rewriting)20 b(this)e(de\014nition)j(b)o(y)-76
2372 y(o)o(v)o(erloading)16 b(on)d(the)g(state)h(as)f(w)o(ell)-37
2443 y Fm(class)18 b(Monad)g(\(m)h(s\))f(=>)h(StateMonad)d(m)j(s)g
(where)42 2484 y(get)f(::)h(m)g(s)h(s)42 2526 y(set)e(::)h(s)g(->)g(m)g
(s)h(\(\))1020 -34 y Fr(is)12 b(not)f(satisfactory)i(as)e(it)h(forces)f
(us)g(to)g(pass)h(sev)o(eral)g(dictionarie)q(s,)1020
7 y(sa)o(y)61 b Fm(\(StateMon)o(ad)16 b(State)i(Int,)g(StateMona)o(d)f
(State)g(Bool\))1020 49 y Fr(where)h(they)h(are)f(really)i(the)e(same.)
33 b(What)19 b(w)o(e)f(really)h(w)o(an)o(t)g(is)1020
90 y(to)13 b(use)g(univ)o(ersal)j(quan)o(ti\014cation:)1059
161 y Fm(class)i(\(forall)f(s.)i(Monad)e(\(m)i(s\)\))1118
203 y(=>)g(StateMona)o(d)e(m)i(where)1138 244 y(get)f(::)h(m)g(s)g(s)
1138 286 y(set)f(::)h(s)g(->)g(m)g(s)h(\(\))1020 357
y Fr(but)d(that)h(means)f(that)g(the)g(t)o(yp)q(e)h(system)f(w)o(ould)h
(ha)o(v)o(e)g(to)f(han-)1020 398 y(dle)11 b(constrain)o(ts)h(with)e
(univ)o(ersal)j(quan)o(ti\014cation)g(|)d(a)g(substan)o(tial)1020
440 y(complication.)1020 511 y(Another)g(ground)g(rule)h(in)f(this)g
(pap)q(er)g(is)g(the)g(restriction)h(to)e(acyclic)1020
552 y(sup)q(erclass)k(hierarc)o(hies.)18 b(Gofer)11 b(puts)g(no)g
(restriction)i(on)e(the)f(form)1020 594 y(of)g(predicates)i(that)f(ma)o
(y)f(app)q(ear)h(in)g(sup)q(erclass)i(con)o(texts,)e(in)g(par-)1020
635 y(ticular)i(it)e(allo)o(ws)h(m)o(utually)h(recursiv)o(e)f(class)g
(hierarc)o(hies.)18 b(F)m(or)11 b(ex-)1020 677 y(ample,)k(the)f
Fm(Iso)f Fr(class)i(example)g(of)f(Section)h(2.3)f(can)g(b)q(e)h
(written)1020 718 y(in)f(a)f(more)g(elegan)o(t)h(w)o(a)o(y)f(if)g(w)o
(e)g(allo)o(w)h(recursiv)o(e)g(classes:)1079 789 y Fm(class)k(Iso)g(b)h
(a)g(=>)g(Iso)g(a)g(b)g(where)f(iso)g(::)h(a)g(->)g(b)1020
861 y Fr(The)12 b(sup)q(erclass)i(constrain)o(t)g(ensures)f(that)f
(when)g(a)g(t)o(yp)q(e)g Fm(a)g Fr(is)h(iso-)1020 902
y(morphic)k(to)f Fm(b)o Fr(,)g(then)g(t)o(yp)q(e)g Fm(b)f
Fr(is)h(isomorphic)i(to)d Fm(a)p Fr(.)24 b(Needless)17
b(to)1020 944 y(sa)o(y)c(that)g(suc)o(h)g(class)h(declarations)h
(easily)g(giv)o(e)e(lead)h(to)e(an)h(unde-)1020 985 y(cidable)i(t)o(yp)
q(e)f(system.)1020 1123 y Fs(5.3)52 b(Con)o(troling)18
b(the)g(scop)q(e)g(of)f(instances)1020 1218 y Fr(One)i(sometimes)g
(wishes)h(that)f(it)g(w)o(as)f(p)q(ossible)j(to)e(ha)o(v)o(e)g(more)
1020 1260 y(than)f(one)f(instance)i(declaration)g(for)e(the)g
Fp(same)f Fr(instance)j(t)o(yp)q(e,)1020 1301 y(an)13
b(extreme)g(case)g(of)g(o)o(v)o(erlap.)18 b(F)m(or)13
b(example,)h(in)f(one)g(part)g(of)g(the)1020 1343 y(program)h(one)f
(migh)o(t)h(lik)o(e)g(to)f(ha)o(v)o(e)h(an)f(instance)i(declaration)
1059 1414 y Fm(instance)i(Ord)h(T)h(where)f({)h(\(<\))g(=)g(lessThanT)d
(})1020 1485 y Fr(and)e(elsewhere)g(one)f(migh)o(t)h(lik)o(e)1059
1556 y Fm(instance)j(Ord)h(T)h(where)f({)h(\(<\))g(=)g(greaterTha)o(nT)
d(})1020 1627 y Fr(As)h(evidence)i(for)f(this,)h(notice)f(that)g(sev)o
(eral)h(Hask)o(ell)g(standard)1020 1669 y(library)c(functions)g(\(suc)o
(h)f(as)g Fm(sortBy)m Fr(\))g(tak)o(e)f(an)h(explicit)i(compar-)1020
1710 y(ison)i(op)q(erator)f(as)g(an)g(argumen)o(t,)i(re\015ecting)f
(the)f(fact)f(that)h(the)1020 1752 y Fm(Ord)f Fr(instance)j(for)e(the)g
(data)h(t)o(yp)q(e)f(in)o(v)o(olv)o(ed)j(migh)o(t)e(not)f(b)q(e)h(the)
1020 1793 y(ordering)h(y)o(ou)f(w)o(an)o(t)f(for)g(the)g(sort.)30
b(Ha)o(ving)19 b(m)o(ultiple)h(instance)1020 1835 y(declarations)15
b(for)d(the)g(same)g(t)o(yp)q(e)h(is,)f(ho)o(w)o(ev)o(er,)h(fraugh)o(t)
f(with)h(the)1020 1876 y(risk)j(of)g(losing)h(coherence;)h(at)d(the)h
(v)o(ery)g(least)g(it)g(in)o(v)o(olv)o(es)i(strict)1020
1918 y(con)o(trol)f(o)o(v)o(er)f(whic)o(h)h(instance)g(declarations)i
(are)d(visible)i(where.)1020 1959 y(It)11 b(is)i(far)e(from)h(ob)o
(vious)i(that)e(con)o(trolling)i(the)e(scop)q(e)h(of)e(instances)1020
2001 y(is)g(the)f(righ)o(t)h(w)o(a)o(y)f(to)g(tac)o(kle)h(this)g
(problem)h(|)e(functors,)h(as)g(in)f(ML,)1020 2042 y(lo)q(ok)k(more)f
(appropriate.)1020 2181 y Fs(5.4)52 b(Relaxed)18 b(t)o(yp)q(e)g
(signature)g(con)o(texts)1020 2276 y Fr(In)25 b(programming)i(with)e(t)
o(yp)q(e)g(classes)h(it)g(is)f(often)g(the)g(case)1020
2317 y(that)32 b(w)o(e)f(end)h(up)g(with)g(an)f(am)o(biguous)j(t)o(yp)q
(e)e(while)h(w)o(e)1020 2359 y(kno)o(w)23 b(that)g(in)h(fact)f(it)g(is)
h(harmless.)48 b(F)m(or)23 b(example,)j(kno)o(w-)1020
2400 y(ing)f(all)f(instance)h(declarations)i(in)d(the)g(program,)i(w)o
(e)d(migh)o(t)1020 2442 y(b)q(e)31 b(sure)h(that)f(the)g(am)o(biguous)j
(example)e(of)f(Section)h(2.3)1020 2483 y Fm(iso)19 b(2)g(==)g(iso)f(3)
h(::)g(\(Eq)g(b,)f(Iso)h(Int)f(b\))h(=>)g(Bool)h Fr(has)j(the)1020
2525 y(same)17 b(v)n(alue,)h(irresp)q(ectiv)o(e)h(of)d(the)h(c)o(hoice)
h(for)e Fm(b)p Fr(.)27 b(Is)17 b(it)g(p)q(ossible)1020
2566 y(to)c(mo)q(dify)h(the)f(t)o(yp)q(e)h(system)f(to)g(deal)h(with)f
(suc)o(h)h(cases?)951 2747 y(14)p eop
%%Page: 15 15
15 14 bop -76 -34 a Fs(6)53 b(Conclusion)-76 74 y Fr(Sometimes)12
b(a)g(t)o(yp)q(e)f(system)h(is)f(so)g(\014nely)i(balanced)g(that)e
(virtually)-76 115 y(an)o(y)18 b(extension)g(destro)o(ys)g(some)f(of)g
(its)g(more)g(desirable)j(prop)q(er-)-76 157 y(ties.)j(Hask)o(ell's)16
b(t)o(yp)q(e)g(class)f(system)h(turns)f(out)g(not)g(to)g(ha)o(v)o(e)g
(the)-76 198 y(prop)q(ert)o(y)h({)g(there)f(seems)h(to)f(b)q(e)h
(sensible)h(extensions)h(that)d(gain)-76 240 y(expressiv)o(eness)h
(without)e(in)o(v)o(olving)i(ma)r(jor)d(new)g(complications.)-76
311 y(W)m(e)k(ha)o(v)o(e)g(tried)g(to)g(summarise)h(the)e(design)i(c)o
(hoices)g(in)f(a)g(fairly)-76 352 y(un-biased)g(manner,)e(but)g(it)g
(is)h(time)f(to)f(nail)i(our)f(colours)i(to)d(the)-76
394 y(mast.)28 b(The)17 b(follo)o(wing)i(set)e(of)f(design)j(c)o
(hoices)f(seems)f(to)f(de\014ne)-76 435 y(an)h(up)o(w)o(ard-compatible)
j(extension)f(of)e(Hask)o(ell)h(without)g(losing)-76
477 y(an)o(ything)d(imp)q(ortan)o(t:)-20 578 y Fl(\017)k
Fr(P)o(ermit)13 b(m)o(ulti-parameter)i(t)o(yp)q(e)f(classes.)-20
649 y Fl(\017)19 b Fr(P)o(ermit)c(arbitrary)h(constrain)o(ts)g(in)f(t)o
(yp)q(es)g(and)g(t)o(yp)q(e)g(signa-)18 691 y(tures)e(\(Choice)h(1b\).)
-20 762 y Fl(\017)19 b Fr(Use)10 b(the)g(\()p Fj(inst)p
Fr(\))h(con)o(text-reduction)h(rule)g(only)f(when)g(forced)18
804 y(b)o(y)k(a)g(t)o(yp)q(e)g(signature,)i(or)e(when)h(the)f
(constrain)o(t)h(is)g(tauto-)18 845 y(logical)f(\(Choice)f(2d\).)j
(Choice)d(2e)f(is)h(also)g(viable.)-20 916 y Fl(\017)19
b Fr(Prohibit)79 b(o)o(v)o(erlapping)i(instance)f(declarations)18
958 y(\(Choice)13 b(3a\).)-20 1029 y Fl(\017)19 b Fr(P)o(ermit)c
(arbitrary)h(instance)h(t)o(yp)q(es)e(in)g(the)g(head)h(of)e(an)i(in-)
18 1071 y(stance)f(declaration,)i(except)f(that)f(at)f(least)i(one)f(m)
o(ust)g(not)18 1112 y(b)q(e)e(a)g(t)o(yp)q(e)g(v)n(ariable)i(\(Choice)f
(4c\).)-20 1184 y Fl(\017)19 b Fr(P)o(ermit)d(rep)q(eated)h(t)o(yp)q(e)
g(v)n(ariables)h(in)f(the)f(head)h(of)f(an)h(in-)18 1225
y(stance)c(declaration)j(\(Choice)d(5a\).)-20 1297 y
Fl(\017)19 b Fr(Restrict)11 b(the)f(con)o(text)h(of)f(an)h(instance)h
(declaration)h(to)d(men-)18 1338 y(tion)j(t)o(yp)q(e)h(v)n(ariables)h
(only)f(\(Choice)g(6b\).)-20 1410 y Fl(\017)19 b Fr(No)12
b(limitation)q(s)k(on)d(sup)q(erclass)i(con)o(texts)f(\(Choice)f(7b\).)
-20 1481 y Fl(\017)19 b Fr(Prohibit)c(impro)o(v)o(emen)o(t)f(\(Choice)g
(8a\).)-20 1552 y Fl(\017)19 b Fr(P)o(ermit)12 b(the)g(class)h(v)n
(ariable\(s\))h(to)e(b)q(e)g(constrained)i(in)e(class-)18
1594 y(mem)o(b)q(er)h(t)o(yp)q(e)g(signatures)i(\(Choice)f(9b\).)-76
1695 y(Our)d(hop)q(e)h(is)g(that)f(this)h(pap)q(er)g(will)h(pro)o(v)o
(ok)o(e)f(some)f(w)o(ell-informed)-76 1736 y(debate)17
b(ab)q(out)g(p)q(ossible)h(extensions)g(to)e(Hask)o(ell's)h(t)o(yp)q(e)
f(classes.)-76 1778 y(W)m(e)c(particularl)q(y)j(seek)d(a)g(wider)h
(range)g(of)f(examples)i(to)e(illustrate)-76 1819 y(and)i(motiv)n(ate)g
(the)f(v)n(arious)h(extensions)h(discussed)g(here.)-76
1962 y Fs(Ac)o(kno)o(wledegemen)o(ts)-76 2070 y Fr(W)m(e)j(w)o(ould)h
(lik)o(e)h(to)e(thank)g(Ko)q(en)h(Claessen,)h(Benedict)f(Gaster,)-76
2111 y(Thomas)26 b(Hallgren,)k(John)c(Matthews,)j(Sergey)d(Mec)o(h)o(v)
o(eliani)q(,)-76 2153 y(Alastair)14 b(Reid,)f(Enno)g(Sc)o(holz,)h(W)m
(alid)g(T)m(aha,)e(Simon)h(Thompson,)-76 2194 y(and)g(Carl)g(Witt)o(y)h
(for)e(helpful)i(feedbac)o(k)g(on)e(earlier)i(drafts)f(of)f(this)-76
2236 y(pap)q(er.)34 b(Meijer)19 b(and)f(P)o(eyton)h(Jones)g(also)g
(gratefully)h(ac)o(kno)o(wl-)-76 2277 y(edge)c(the)g(supp)q(ort)g(of)f
(the)h(Oregon)g(Graduate)g(Institute)h(during)-76 2319
y(our)i(sabbaticals,)j(funded)d(b)o(y)g(a)f(con)o(tract)h(with)g(US)g
(Air)f(F)m(orce)-76 2360 y(Material)d(Command)e(\(F19628-93-C-0069\).)
-76 2503 y Fs(References)1020 -34 y Fr(K)20 b(Chen,)g(P)f(Hudak)i(&)f
(M)g(Odersky)7 b([June)20 b(1992],)g(\\P)o(aramet-)1169
7 y(ric)14 b(t)o(yp)q(e)f(classes,")h(in)f Fa(A)o(CM)g(Symp)q(osium)i
(on)e(Lisp)g(and)1169 49 y(F)m(unctional)j(Programming,)e(Sno)o(wbird)q
Fr(,)h(A)o(CM.)1020 132 y(C)e(Elliott)j(&)e(P)f(Hudak)8
b([June)13 b(1997],)h(\\F)m(unctional)i(reactiv)o(e)f(ani-)1169
174 y(mation,")10 b(in)g Fa(Pro)q(c)f(In)o(ternational)i(Conference)f
(on)f(F)m(unc-)1169 215 y(tional)15 b(Programming,)g(Amsterdam)p
Fr(,)e(A)o(CM.)1020 299 y(P)h(Hudak,)h(SL)f(P)o(eyton)h(Jones,)f(PL)g
(W)m(adler,)h(Arvind,)g(B)f(Boutel,)1169 340 y(J)i(F)m(airbairn,)i(J)d
(F)m(asel,)i(M)f(Guzman,)h(K)e(Hammond,)i(J)1169 382
y(Hughes,)j(T)f(Johnsson,)h(R)g(Kieburtz,)g(RS)g(Nikhil,)h(W)1169
423 y(P)o(artain)c(&)f(J)f(P)o(eterson)7 b([Ma)o(y)16
b(1992],)f(\\Rep)q(ort)i(on)f(the)1169 465 y(functional)g(programming)f
(language)h(Hask)o(ell,)e(V)m(ersion)1169 506 y(1.2,")f
Fa(SIGPLAN)g(Notices)c Fr(27.)1020 590 y(MP)21 b(Jones)7
b([Jan)20 b(1995a],)h(\\A)g(system)g(of)f(constructor)i(classes:)1169
631 y(o)o(v)o(erloading)31 b(and)d(implicit)i(higher-order)g(p)q
(olymor-)1169 673 y(phism,")17 b Fa(Journal)f(of)f(F)m(unctional)j
(Programming)11 b Fr(5,)k(1{)1169 714 y(36.)1020 798
y(MP)i(Jones)7 b([June)18 b(1995b],)f(\\Simplifyi)q(ng)j(and)e(impro)o
(ving)i(qual-)1169 839 y(i\014ed)30 b(t)o(yp)q(es,")f(in)g
Fa(Pro)q(c)g(F)m(unctional)h(Programming)1169 881 y(Languages)20
b(and)e(Computer)g(Arc)o(hitecture,)h(La)e(Jolla)p Fr(,)1169
922 y(A)o(CM.)1020 1006 y(MP)i(Jones)7 b([Ma)o(y)19 b(1994],)f(\\The)h
(implemen)o(tation)j(of)c(the)h(Gofer)1169 1047 y(functional)158
b(programming)g(system,")1169 1089 y(Y)m(ALEU/DCS/RR-1030,)14
b(Departmen)o(t)h(of)e(Computer)1169 1130 y(Science,)i(Y)m(ale)e(Univ)o
(ersit)o(y)m(.)1020 1214 y(MP)g(Jones)7 b([Ma)o(y)13
b(1995],)g(\\F)m(unctional)i(programming)g(with)e(o)o(v)o(er-)1169
1255 y(loading)18 b(and)f(higher-order)g(p)q(olymorphism,")h(in)e
Fa(First)1169 1297 y(In)o(ternational)26 b(Spring)e(Sc)o(ho)q(ol)g(on)f
(Adv)n(anced)h(F)m(unc-)1169 1338 y(tional)18 b(Programming)g(T)m(ec)o
(hniques,)f(B)-6 b(\027)-25 b(astad,)17 b(Sw)o(eden)p
Fr(,)1169 1380 y(Springer-V)m(erlag)f(LNCS)c(925.)1020
1463 y(MP)i(Jones)7 b([No)o(v)14 b(1994],)g Fa(Quali\014ed)i(t)o(yp)q
(es:)e(theory)h(and)f(practice)p Fr(,)1169 1505 y(Cam)o(bridge)h(Univ)o
(ersit)o(y)g(Press.)1020 1588 y(S)24 b(Kaes)6 b([Jan)23
b(1988],)h(\\P)o(arametric)g(o)o(v)o(erloading)j(in)d(p)q(olymor-)1169
1630 y(phic)15 b(programming)f(languages,")h(in)f Fa(15th)g(A)o(CM)e
(Sym-)1169 1671 y(p)q(osium)17 b(on)e(Principles)i(of)e(Programming)h
(Languages)r Fr(,)1169 1713 y(A)o(CM,)d(131{144.)1020
1796 y(J)21 b(Launc)o(h)o(bury)j(&)e(SL)g(P)o(eyton)g(Jones)7
b([Dec)22 b(1995],)g(\\State)g(in)1169 1838 y(Hask)o(ell,")17
b Fa(Lisp)g(and)f(Sym)o(b)q(olic)h(Computation)8 b Fr(8,)16
b(293{)1169 1879 y(342.)1020 1963 y(S)10 b(Liang,)h(P)f(Hudak)h(&)e(M)h
(Jones)d([Jan)j(1995],)g(\\Monad)h(transform-)1169 2004
y(ers)i(and)g(mo)q(dular)h(in)o(terpreters,")f(in)g Fa(22nd)g(A)o(CM)f
(Sym-)1169 2046 y(p)q(osium)17 b(on)e(Principles)j(of)d(Programming)i
(Languages,)1169 2087 y(San)d(F)m(rancisco)r Fr(,)g(A)o(CM.)1020
2171 y(D)31 b(Miller)8 b([1991],)30 b(\\A)h(logic)h(programming)g
(language)h(with)1169 2212 y(lam)o(b)q(da)14 b(abstraction,)g(function)
g(v)n(ariables,)g(and)f(simple)1169 2254 y(uni\014cation)q(,")i
Fa(Journal)f(of)f(Logic)h(and)g(Computation)8 b Fr(1.)1020
2337 y(M)15 b(Odersky)m(,)h(PL)f(W)m(adler)i(&)e(M)g(W)m(ehr)7
b([June)16 b(1995],)f(\\A)g(second)1169 2379 y(lo)q(ok)f(at)f(o)o(v)o
(erloading,")i(in)f Fa(Pro)q(c)f(F)m(unctional)i(Program-)1169
2420 y(ming)21 b(Languages)f(and)g(Computer)f(Arc)o(hitecture,)h(La)
1169 2462 y(Jolla)p Fr(,)14 b(A)o(CM.)951 2747 y(15)p
eop
%%Page: 16 16
16 15 bop -76 -34 a Fr(C)13 b(Ok)n(asaki)8 b([Sept)13
b(1996],)g(\\Purely)i(functional)g(data)f(structures,")74
7 y(PhD)d(thesis,)i(CMU-CS-96-177,)d(Departmen)o(t)j(of)e(Com-)74
49 y(puter)i(Science,)h(Carnegie)g(Mellon)h(Univ)o(ersit)o(y)m(.)-76
132 y(SL)26 b(P)o(eyton)h(Jones)7 b([Sept)26 b(1996],)g(\\Bulk)i(t)o
(yp)q(es)f(with)f(class,")74 174 y(in)34 b Fa(Electronic)i(pro)q
(ceedings)g(of)d(the)h(1996)g(Glas-)74 215 y(go)o(w)9
b(F)m(unctional)i(Programming)g(W)m(orkshop)g(\()p Fm(http://-)74
257 y(www.dcs.g)o(la)o(.ac)o(.u)o(k/f)o(p/)o(wor)o(ksh)o(op)o(s/f)o(pw)
o(96/)o(-)74 298 y(Proceedin)o(gs)o(96.)o(ht)o(ml)p Fa(\))p
Fr(.)-76 382 y(SL)h(P)o(eyton)g(Jones,)g(AJ)f(Gordon)h(&)g(SO)f(Finne)d
([Jan)k(1996],)f(\\Con-)74 423 y(curren)o(t)24 b(Hask)o(ell,")i(in)f
Fa(23rd)f(A)o(CM)g(Symp)q(osium)i(on)74 465 y(Principles)19
b(of)d(Programming)j(Languages,)f(St)e(P)o(eters-)74
506 y(burg)d(Beac)o(h,)h(Florida)p Fr(,)g(A)o(CM,)e(295{308.)-76
590 y(PL)e(W)m(adler)i(&)e(S)g(Blott)d([Jan)j(1989],)h(\\Ho)o(w)e(to)i
(mak)o(e)f(ad-ho)q(c)h(p)q(oly-)74 631 y(morphism)18
b(less)f(ad)g(ho)q(c,")g(in)g Fa(Pro)q(c)g(16th)g(A)o(CM)f(Sym-)74
673 y(p)q(osium)g(on)g(Principles)i(of)c(Programming)j(Languages,)74
714 y(Austin,)c(T)m(exas)r Fr(,)f(A)o(CM.)951 2747 y(16)p
eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
